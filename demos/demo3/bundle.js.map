{"version":3,"sources":["webpack:///webpack/bootstrap e7fd6edc5d5b8406a976?a89e","webpack:///external \"React\"?9de9","webpack:///./src/Common.js?5218","webpack:///./demos/demo3/DiamondNodeWidget.js","webpack:///./src/DiagramModel.js?affe","webpack:///./src/Toolkit.js?f595","webpack:///./src/defaults/DefaultPortLabelWidget.js?63a1","webpack:///./src/widgets/LinkLayerWidget.js?cc70","webpack:///./src/widgets/LinkWidget.js?8357","webpack:///./src/widgets/NodeLayerWidget.js?851c","webpack:///./src/widgets/NodeWidget.js?549b","webpack:///./src/widgets/PortWidget.js?d8f4","webpack:///external \"ReactDOM\"?4ab4","webpack:///external \"_\"?b3b9","webpack:///./demos/test.scss?acf3","webpack:///./src/DiagramEngine.js?f766","webpack:///./src/LinkInstanceFactory.js?7cfe","webpack:///./demos/demo3/index.js","webpack:///./src/defaults/DefaultLinkFactory.js?3c2f","webpack:///./src/defaults/DefaultNodeFactory.js?cc05","webpack:///./src/defaults/DefaultNodeModel.js?eaed","webpack:///./src/defaults/DefaultPortModel.js?124b","webpack:///./src/widgets/DiagramWidget.js?d070","webpack:///./src/widgets/actions/MoveCanvasAction.js?5efb","webpack:///./src/widgets/actions/MoveItemsAction.js?aed4","webpack:///./src/BaseEntity.js?b1e5","webpack:///./src/widgets/actions/SelectingAction.js?dae2","webpack:///./src/widgets/actions/index.js?e85a","webpack:///./~/css-loader/lib/css-base.js?ae8b","webpack:///./~/style-loader/addStyles.js?5b4a","webpack:///./demos/test.scss","webpack:///./src/AbstractInstanceFactory.js?e433","webpack:///./src/main.js?3479","webpack:///./demos/demo3/DiamondNodeModel.js","webpack:///./src/WidgetFactories.js?b096","webpack:///./demos/demo3/DiamondPortModel.js","webpack:///./src/defaults/DefaultLinkWidget.js?366e","webpack:///./src/defaults/DefaultNodeWidget.js?1cec","webpack:///./src/widgets/actions/BaseAction.js?3af6","webpack:///./demos/demo3/DiamondInstanceFactories.js","webpack:///./demos/demo3/DiamondWidgetFactory.js"],"names":["BaseModel","selected","ob","_class","constructor","name","id","itterateListeners","listener","selectionChanged","entityRemoved","PointModel","link","points","x","y","removePoint","LinkModel","linkType","extras","sourcePort","targetPort","type","map","p","point","deSerialize","source","getParent","target","serialize","removeLink","getPointIndex","length","indexOf","i","port","addLink","pointModel","splice","index","PortModel","links","parentNode","_","node","getID","NodeModel","nodeType","ports","key","getLinks","forEach","remove","setParentNode","DiamonNodeWidget","div","className","style","position","width","props","size","height","svg","dangerouslySetInnerHTML","__html","React","zIndex","top","left","defaultProps","DiamonNodeWidgetFactory","DiagramModel","nodes","offsetX","offsetY","zoom","rendered","object","diagramEngine","nodeOb","getInstanceFactory","getInstance","portOb","addPort","addNode","linkOb","setTargetPort","getNode","getPortFromID","setSourcePort","ignore","getSelectedItems","element","setSelected","filter","isSelected","flatMap","controlsUpdated","addListener","linksUpdated","removeNode","nodesUpdated","Toolkit","replace","c","r","Math","random","v","toString","DefaultPortLabel","model","label","in","Component","LinkLayerWidget","diagramModel","getDiagramModel","updateLocation","getPortCenter","ex","last","generatedLink","generateWidgetForLink","console","log","getType","cloneElement","pointAdded","getZoomLevel","getOffsetX","getOffsetY","svgStyle","transform","generateLinks","LinkWidget","canEntityRepaint","children","NodeLayerWidget","getNodes","generateWidgetForNode","NodeWidget","PortWidget","state","setState","DiagramEngine","nodeFactories","linkFactories","instanceFactories","canvas","paintableWidgets","forceUpdate","entities","entity","getPorts","getLink","baseModel","undefined","factory","getName","nodeFactoriesUpdated","linkFactoriesUpdated","linkFactory","getFactoryForLink","generateReactWidget","nodeFactory","getFactoryForNode","event","getRelativePoint","pageX","pageY","canvasRect","getBoundingClientRect","selector","querySelector","sourceElement","getNodePortElement","sourceRect","rel","offsetWidth","offsetHeight","LinkInstanceFactory","Demo3","engine","registerNodeFactory","registerLinkFactory","setTimeout","testSerialization","options","color","isInput","port1","port2","registerInstanceFactory","str","JSON","stringify","serializeDiagram","model2","deSerializeDiagram","parse","setDiagramModel","node1","createNode","createPort","diamondNode","node2","linkNodes","window","onload","ReactDOM","render","document","getElementById","DefaultLinkFactory","DefaultNodeFactory","DefaultNodeInstanceFactory","DefaultNodeModel","merge","portModel","DefaultPortInstanceFactory","DefaultPortModel","DiagramWidget","action","renderedNodes","windowListener","setCanvas","removeEventListener","nextProps","refs","setForceUpdate","bind","addEventListener","keyCode","focus","closest","nodeElement","getAttribute","getPort","getPointModel","preventDefault","stopPropagation","setZoomLevel","deltaY","enableRepaintEntities","relative","containsElement","allSelected","mouseX2","mouseY2","selectionModels","initialX","mouseX","initialY","mouseY","setOffset","initialOffsetX","initialOffsetY","getMouseElement","clearRepaintEntities","shiftKey","clearSelection","getRelativeMousePoint","getFirstPoint","getLastPoint","innerWidth","innerHeight","abs","right","bottom","onWheel","onMouseMove","onMouseDown","onMouseUp","renderLinkLayerWidget","renderSelector","MoveCanvasAction","MoveItemsAction","moved","item","BaseEntity","listeners","UID","data","cb","uid","SelectingAction","z","elX","elY","AbstractInstanceFactory","DiamondNodeModel","WidgetFactory","NodeWidgetFactory","LinkWidgetFactory","DiamondPortModel","pos","DefaultLinkWidget","pointIndex","uiCircleProps","cx","cy","circleProps","opacity","onMouseLeave","onMouseEnter","extraProps","paths","margin","pointLeft","pointRight","push","generateLink","addPoint","d","generatePoint","smooth","ds","drawLine","drawAdvancedLine","DefaultNodeWidget","getInPorts","getOutPorts","background","onRemove","BaseAction","ms","Date","getTime","DiamondNodeFactory","DiamondPortFactory","DiamondWidgetFactory"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA,uB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;;AAEA,IAAaA,SAAb;AAAA;;AACE,uBAAc;AAAA;;AAAA;;AAEZ,UAAKC,QAAL,GAAgB,KAAhB;AAFY;AAGb;;AAJH;AAAA;AAAA,gCAMcC,EANd,EAMkB;AACd,wHAAkBA,EAAlB;AACA,WAAKD,QAAL,GAAgBC,GAAGD,QAAnB;AACD;AATH;AAAA;AAAA,gCAWc;AACV;AAEEE,gBAAQ,KAAKC,WAAL,CAAiBC,IAF3B;AAGEJ,kBAAU,KAAKA;AAHjB;AAKD;AAjBH;AAAA;AAAA,4BAmBU;AACN,aAAO,KAAKK,EAAZ;AACD;AArBH;AAAA;AAAA,iCAuBe;AACX,aAAO,KAAKL,QAAZ;AACD;AAzBH;AAAA;AAAA,gCA2BcA,QA3Bd,EA2BwB;AACpB,WAAKA,QAAL,GAAgBA,QAAhB;;AAEA,WAAKM,iBAAL,CAAuB,oBAAY;AACjC,YAAGC,SAASC,gBAAZ,EAA8B;AAC5BD,mBAASC,gBAAT;AACD;AACF,OAJD;AAKD;AAnCH;AAAA;AAAA,6BAqCW;AACP,WAAKF,iBAAL,CAAuB,oBAAY;AACjC,YAAGC,SAASE,aAAZ,EAA2B;AACzBF,mBAASE,aAAT;AACD;AACF,OAJD;AAKD;AA3CH;;AAAA;AAAA,EAA+B,+DAA/B;;AA8CA,IAAaC,UAAb;AAAA;;AACE,sBAAYC,IAAZ,EAAkBC,MAAlB,EAA0B;AAAA;;AAAA;;AAExB,WAAKC,CAAL,GAASD,OAAOC,CAAhB;AACA,WAAKC,CAAL,GAASF,OAAOE,CAAhB;AACA,WAAKH,IAAL,GAAYA,IAAZ;AAJwB;AAKzB;;AANH;AAAA;AAAA,gCAQcV,EARd,EAQkB;AACd,0HAAkBA,EAAlB;AACA,WAAKY,CAAL,GAASZ,GAAGY,CAAZ;AACA,WAAKC,CAAL,GAASb,GAAGa,CAAZ;AACD;AAZH;AAAA;AAAA,gCAcc;AACV;AAEED,WAAG,KAAKA,CAFV;AAGEC,WAAG,KAAKA;AAHV;AAKD;AApBH;AAAA;AAAA,6BAsBW;AACP;;AAEA;AACA,UAAI,KAAKH,IAAT,EAAe;AACb,aAAKA,IAAL,CAAUI,WAAV,CAAsB,IAAtB;AACD;AACF;AA7BH;AAAA;AAAA,mCA+BiBH,MA/BjB,EA+ByB;AACrB,WAAKC,CAAL,GAASD,OAAOC,CAAhB;AACA,WAAKC,CAAL,GAASF,OAAOE,CAAhB;AACD;AAlCH;AAAA;AAAA,2BAoCS;AACL,aAAO,KAAKD,CAAZ;AACD;AAtCH;AAAA;AAAA,2BAwCS;AACL,aAAO,KAAKC,CAAZ;AACD;AA1CH;AAAA;AAAA,8BA4CY;AACR,aAAO,KAAKH,IAAZ;AACD;AA9CH;;AAAA;AAAA,EAAgCZ,SAAhC;;AAiDA,IAAaiB,SAAb;AAAA;;AACE,uBAAc;AAAA;;AAAA;;AAEZ,WAAKC,QAAL,GAAgB,SAAhB;AACA,WAAKL,MAAL,GAAc,CACZ,IAAIF,UAAJ,SAAoB,EAACG,GAAG,CAAJ,EAAMC,GAAG,CAAT,EAApB,CADY,EAEZ,IAAIJ,UAAJ,SAAoB,EAACG,GAAG,CAAJ,EAAMC,GAAG,CAAT,EAApB,CAFY,CAAd;AAIA,WAAKI,MAAL,GAAc,EAAd;AACA,WAAKC,UAAL,GAAkB,IAAlB;AACA,WAAKC,UAAL,GAAkB,IAAlB;AATY;AAUb;;AAXH;AAAA;AAAA,gCAacnB,EAbd,EAakB;AAAA;;AACd,wHAAkBA,EAAlB;AACA,WAAKgB,QAAL,GAAgBhB,GAAGoB,IAAnB;AACA,WAAKT,MAAL,GAAcX,GAAGW,MAAH,CAAUU,GAAV,CAAc,iBAAS;AACnC,YAAIC,IAAI,IAAIb,UAAJ,SAAqB,EAACG,GAAGW,MAAMX,CAAV,EAAYC,GAAEU,MAAMV,CAApB,EAArB,CAAR;AACAS,UAAEE,WAAF,CAAcD,KAAd;AACA,eAAOD,CAAP;AACD,OAJa,CAAd;AAKD;AArBH;AAAA;AAAA,gCAuBc;AACV;AAEEF,cAAM,KAAKJ,QAFb;AAGES,gBAAQ,KAAKP,UAAL,GAAkB,KAAKA,UAAL,CAAgBQ,SAAhB,GAA4BtB,EAA9C,GAAiD,IAH3D;AAIEc,oBAAY,KAAKA,UAAL,GAAkB,KAAKA,UAAL,CAAgBd,EAAlC,GAAqC,IAJnD;AAKEuB,gBAAQ,KAAKR,UAAL,GAAkB,KAAKA,UAAL,CAAgBO,SAAhB,GAA4BtB,EAA9C,GAAiD,IAL3D;AAMEe,oBAAY,KAAKA,UAAL,GAAkB,KAAKA,UAAL,CAAgBf,EAAlC,GAAqC,IANnD;AAOEO,gBAAQ,KAAKA,MAAL,CAAYU,GAAZ,CAAgB;AAAA,iBAASE,MAAMK,SAAN,EAAT;AAAA,SAAhB,CAPV;AAQEX,gBAAQ,KAAKA;AARf;AAUD;AAlCH;AAAA;AAAA,6BAoCW;AACP;AACA,UAAI,KAAKC,UAAT,EAAqB;AACnB,aAAKA,UAAL,CAAgBW,UAAhB,CAA2B,IAA3B;AACD;AACD,UAAI,KAAKV,UAAT,EAAqB;AACnB,aAAKA,UAAL,CAAgBU,UAAhB,CAA2B,IAA3B;AACD;AACF;AA5CH;AAAA;AAAA,gCA8CcN,KA9Cd,EA8CqB;AACjB,aAAO,KAAKO,aAAL,CAAmBP,KAAnB,MAA8B,KAAKZ,MAAL,CAAYoB,MAAZ,GAAmB,CAAxD;AACD;AAhDH;AAAA;AAAA,kCAkDgBR,KAlDhB,EAkDuB;AACnB,aAAO,KAAKZ,MAAL,CAAYqB,OAAZ,CAAoBT,KAApB,CAAP;AACD;AApDH;AAAA;AAAA,kCAsDgBnB,EAtDhB,EAsDoB;AAChB,WAAK,IAAI6B,IAAI,CAAb,EAAgBA,IAAI,KAAKtB,MAAL,CAAYoB,MAAhC,EAAwCE,GAAxC,EAA6C;AAC3C,YAAI,KAAKtB,MAAL,CAAYsB,CAAZ,EAAe7B,EAAf,KAAsBA,EAA1B,EAA8B;AAC5B,iBAAO,KAAKO,MAAL,CAAYsB,CAAZ,CAAP;AACD;AACF;AACD,aAAO,IAAP;AACD;AA7DH;AAAA;AAAA,oCA+DkB;AACd,aAAO,KAAKtB,MAAL,CAAY,CAAZ,CAAP;AACD;AAjEH;AAAA;AAAA,mCAmEiB;AACb,aAAO,KAAKA,MAAL,CAAY,KAAKA,MAAL,CAAYoB,MAAZ,GAAqB,CAAjC,CAAP;AACD;AArEH;AAAA;AAAA,kCAuEgBG,IAvEhB,EAuEsB;AAClBA,WAAKC,OAAL,CAAa,IAAb;AACA,WAAKjB,UAAL,GAAkBgB,IAAlB;AACD;AA1EH;AAAA;AAAA,oCA4EkB;AACd,aAAO,KAAKhB,UAAZ;AACD;AA9EH;AAAA;AAAA,oCAgFkB;AACd,aAAO,KAAKC,UAAZ;AACD;AAlFH;AAAA;AAAA,kCAoFgBe,IApFhB,EAoFsB;AAClBA,WAAKC,OAAL,CAAa,IAAb;AACA,WAAKhB,UAAL,GAAkBe,IAAlB;AACD;AAvFH;AAAA;AAAA,gCAyFc;AACV,aAAO,KAAKvB,MAAZ;AACD;AA3FH;AAAA;AAAA,8BA6FYA,MA7FZ,EA6FoB;AAChB,WAAKA,MAAL,GAAcA,MAAd;AACD;AA/FH;AAAA;AAAA,gCAiGcyB,UAjGd,EAiG0B;AACtB,WAAKzB,MAAL,CAAY0B,MAAZ,CAAmB,KAAKP,aAAL,CAAmBM,UAAnB,CAAnB,EAAmD,CAAnD;AACD;AAnGH;AAAA;AAAA,6BAqGWA,UArGX,EAqGkC;AAAA,UAAXE,KAAW,uEAAH,CAAG;;AAC9B,WAAK3B,MAAL,CAAY0B,MAAZ,CAAmBC,KAAnB,EAA0B,CAA1B,EAA6BF,UAA7B;AACD;AAvGH;AAAA;AAAA,8BAyGY;AACR,aAAO,KAAKpB,QAAZ;AACD;AA3GH;;AAAA;AAAA,EAA+BlB,SAA/B;;AA8GA,IAAayC,SAAb;AAAA;;AACE,qBAAYpC,IAAZ,EAAkB;AAAA;;AAAA;;AAEhB,WAAKA,IAAL,GAAYA,IAAZ;AACA,WAAKqC,KAAL,GAAa,EAAb;AACA,WAAKC,UAAL,GAAkB,IAAlB;AAJgB;AAKjB;;AANH;AAAA;AAAA,gCAQczC,EARd,EAQkB;AACd,wHAAkBA,EAAlB;AACA,WAAKG,IAAL,GAAYH,GAAGG,IAAf;AACD;AAXH;AAAA;AAAA,gCAac;AACV;AAEEA,cAAM,KAAKA,IAFb;AAGEsC,oBAAY,KAAKA,UAAL,CAAgBrC,EAH9B;AAIEoC,eAAO,8CAAAE,CAAErB,GAAF,CAAM,KAAKmB,KAAX,EAAkB;AAAA,iBAAQ9B,KAAKN,EAAb;AAAA,SAAlB;AAJT;AAMD;AApBH;AAAA;AAAA,8BAsBY;AACR,aAAO,KAAKD,IAAZ;AACD;AAxBH;AAAA;AAAA,gCA0Bc;AACV,aAAO,KAAKsC,UAAZ;AACD;AA5BH;AAAA;AAAA,kCA8BgBE,IA9BhB,EA8BsB;AAClB,WAAKF,UAAL,GAAkBE,IAAlB;AACD;AAhCH;AAAA;AAAA,+BAkCajC,IAlCb,EAkCmB;AACf,aAAO,KAAK8B,KAAL,CAAW9B,KAAKkC,KAAL,EAAX,CAAP;AACD;AApCH;AAAA;AAAA,4BAsCUlC,IAtCV,EAsCgB;AACZ,WAAK8B,KAAL,CAAW9B,KAAKkC,KAAL,EAAX,IAA2BlC,IAA3B;AACD;AAxCH;AAAA;AAAA,+BA0Ca;AACT,aAAO,KAAK8B,KAAZ;AACD;AA5CH;;AAAA;AAAA,EAA+B1C,SAA/B;;AA+CA,IAAa+C,SAAb;AAAA;;AACE,uBAAkC;AAAA,QAAtBC,QAAsB,uEAAX,SAAW;;AAAA;;AAAA;;AAEhC,WAAKA,QAAL,GAAgBA,QAAhB;AACA,WAAKlC,CAAL,GAAS,CAAT;AACA,WAAKC,CAAL,GAAS,CAAT;AACA,WAAKI,MAAL,GAAc,EAAd;AACA,WAAK8B,KAAL,GAAa,EAAb;AANgC;AAOjC;;AARH;AAAA;AAAA,gCAUc/C,EAVd,EAUkB;AACd,wHAAkBA,EAAlB;AACA,WAAK8C,QAAL,GAAgB9C,GAAGoB,IAAnB;AACA,WAAKR,CAAL,GAASZ,GAAGY,CAAZ;AACA,WAAKC,CAAL,GAASb,GAAGa,CAAZ;AACA,WAAKI,MAAL,GAAcjB,GAAGiB,MAAjB;AACD;AAhBH;AAAA;AAAA,gCAkBc;AACV;AAEEG,cAAM,KAAK0B,QAFb;AAGElC,WAAG,KAAKA,CAHV;AAIEC,WAAG,KAAKA,CAJV;AAKEI,gBAAQ,KAAKA,MALf;AAME8B,eAAO,8CAAAL,CAAErB,GAAF,CAAM,KAAK0B,KAAX,EAAkB;AAAA,iBAAQb,KAAKN,SAAL,EAAR;AAAA,SAAlB;AANT;AAQD;AA3BH;AAAA;AAAA,6BA6BW;AACP;AACA,WAAK,IAAMoB,GAAX,IAAkB,KAAKD,KAAvB,EAA8B;AAC5B,aAAKA,KAAL,CAAWC,GAAX,EAAgBC,QAAhB,GAA2BC,OAA3B,CAAmC;AAAA,iBAAQxC,KAAKyC,MAAL,EAAR;AAAA,SAAnC;AACD;AACF;AAlCH;AAAA;AAAA,kCAoCgB/C,EApChB,EAoCoB;AAChB,WAAK,IAAM4C,GAAX,IAAkB,KAAKD,KAAvB,EAA8B;AAC5B,YAAI,KAAKA,KAAL,CAAWC,GAAX,EAAgB5C,EAAhB,KAAuBA,EAA3B,EAA+B;AAC7B,iBAAO,KAAK2C,KAAL,CAAWC,GAAX,CAAP;AACD;AACF;AACD,aAAO,IAAP;AACD;AA3CH;AAAA;AAAA,4BA6CU7C,IA7CV,EA6CgB;AACZ,aAAO,KAAK4C,KAAL,CAAW5C,IAAX,CAAP;AACD;AA/CH;AAAA;AAAA,+BAiDa;AACT,aAAO,KAAK4C,KAAZ;AACD;AAnDH;AAAA;AAAA,+BAqDab,IArDb,EAqDmB;AACf;AACA,UAAG,KAAKa,KAAL,CAAWb,KAAK/B,IAAhB,CAAH,EAA0B;AACxB,aAAK4C,KAAL,CAAWb,KAAK/B,IAAhB,EAAsBiD,aAAtB,CAAoC,IAApC;AACA,eAAO,KAAKL,KAAL,CAAWb,KAAK/B,IAAhB,CAAP;AACD;AACF;AA3DH;AAAA;AAAA,4BA6DU+B,IA7DV,EA6DgB;AACZA,WAAKkB,aAAL,CAAmB,IAAnB;AACA,WAAKL,KAAL,CAAWb,KAAK/B,IAAhB,IAAwB+B,IAAxB;AACA,aAAOA,IAAP;AACD;AAjEH;AAAA;AAAA,8BAmEY;AACR,aAAO,KAAKY,QAAZ;AACD;AArEH;;AAAA;AAAA,EAA+BhD,SAA/B,E;;;;;;;;;;;;;;;;;;;;;;;;AC/PA;AACA;AACA;;AAEA,IAAauD,gBAAb;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,2BAMU;AACR,UACC,2CAAUC,GAAV,CAAc,EAACC,WAAW,cAAZ,EAA4BC,OAAO,EAACC,UAAU,UAAX,EAAuBC,OAAO,KAAKC,KAAL,CAAWC,IAAzC,EAA+CC,QAAQ,KAAKF,KAAL,CAAWC,IAAlE,EAAnC,EAAd,EACC,2CAAUE,GAAV,CAAc;AACbJ,WAAM,KAAKC,KAAL,CAAWC,IADJ,EACSC,QAAQ,KAAKF,KAAL,CAAWC,IAD5B,EACiCG,yBAAyB,EAACC,QAAO,yMAIe,KAAKL,KAAL,CAAWC,IAAX,GAAgB,CAJ/B,SAIuC,KAAKD,KAAL,CAAWC,IAAX,GAAgB,CAJvD,aAIkE,KAAKD,KAAL,CAAWC,IAAX,GAAgB,EAJlF,UAI2F,KAAKD,KAAL,CAAWC,IAAX,GAAgB,CAJ3G,SAImH,KAAKD,KAAL,CAAWC,IAAX,GAAgB,CAJnI,UAI2I,KAAKD,KAAL,CAAWC,IAAX,GAAgB,EAJ3J,uCAAR,EAD1D,EAAd,CADD;;AAUC;AACAK,GAAA,2CAAUX,GAAV,CAAc,EAACE,OAAO,EAACC,UAAU,UAAX,EAAuBS,QAAO,EAA9B,EAAiCC,KAAI,KAAKR,KAAL,CAAWC,IAAX,GAAgB,CAAhB,GAAoB,CAAzD,EAAR,EAAd,EACC,qDAAoB,6DAApB,EAAmC,EAACzD,MAAM,MAAP,EAAewC,MAAM,KAAKgB,KAAL,CAAWhB,IAAhC,EAAnC,CADD,CAXD;;AAeC;AACAsB,GAAA,2CAAUX,GAAV,CAAc,EAACE,OAAO,EAACC,UAAU,UAAX,EAAuBS,QAAO,EAA9B,EAAiCE,MAAK,KAAKT,KAAL,CAAWC,IAAX,GAAgB,CAAhB,GAAkB,CAAxD,EAAR,EAAd,EACC,qDAAoB,6DAApB,EAAmC,EAACzD,MAAM,KAAP,EAAcwC,MAAM,KAAKgB,KAAL,CAAWhB,IAA/B,EAAnC,CADD,CAhBD;;AAoBC;AACAsB,GAAA,2CAAUX,GAAV,CAAc,EAACE,OAAO,EAACC,UAAU,UAAX,EAAuBS,QAAO,EAA9B,EAAiCE,MAAK,KAAKT,KAAL,CAAWC,IAAX,GAAgB,EAAtD,EAAyDO,KAAI,KAAKR,KAAL,CAAWC,IAAX,GAAgB,CAA7E,EAAR,EAAd,EACC,qDAAoB,6DAApB,EAAmC,EAACzD,MAAM,OAAP,EAAgBwC,MAAM,KAAKgB,KAAL,CAAWhB,IAAjC,EAAnC,CADD,CArBD;;AAyBC;AACAsB,GAAA,2CAAUX,GAAV,CAAc,EAACE,OAAO,EAACC,UAAU,UAAX,EAAuBS,QAAO,EAA9B,EAAiCE,MAAM,KAAKT,KAAL,CAAWC,IAAX,GAAgB,CAAhB,GAAoB,CAA3D,EAA6DO,KAAI,KAAKR,KAAL,CAAWC,IAAX,GAAgB,EAAjF,EAAR,EAAd,EACC,qDAAoB,6DAApB,EAAmC,EAACzD,MAAM,QAAP,EAAiBwC,MAAM,KAAKgB,KAAL,CAAWhB,IAAlC,EAAnC,CADD,CA1BD,CADD;AAgCA;AAvCF;;AAAA;AAAA,EAAsC,gDAAtC,UACQ0B,YADR,GACuB;AACrBT,OAAK,GADgB;AAErBjB,OAAM;AAFe,CADvB;;AA0CO,IAAI2B,0BAA0B,qDAAoBjB,gBAApB,CAA9B,C;;;;;;;;;;;;;;;;;;;;;;;;;AC9CP;AACA;AACA;;AAEA,IAAakB,YAAb;AAAA;;AACE,0BAAa;AAAA;;AAAA;;AAEX,UAAK/B,KAAL,GAAa,EAAb;AACA,UAAKgC,KAAL,GAAa,EAAb;AACA,UAAKC,OAAL,GAAe,CAAf;AACA,UAAKC,OAAL,GAAe,CAAf;AACA,UAAKC,IAAL,GAAY,GAAZ;AACA,UAAKC,QAAL,GAAgB,KAAhB;AAPW;AAQZ;;AATH;AAAA;AAAA,uCAWqBC,MAXrB,EAW6BC,aAX7B,EAW4C;AAAA;;AACxC,WAAKtD,WAAL,CAAiBqD,MAAjB;AACA,WAAKJ,OAAL,GAAeI,OAAOJ,OAAtB;AACA,WAAKC,OAAL,GAAeG,OAAOH,OAAtB;AACA,WAAKC,IAAL,GAAYE,OAAOF,IAAnB;;AAEA;AACAjC,MAAA,8CAAAA,CAAEQ,OAAF,CAAU2B,OAAOL,KAAjB,EAAwB,gBAAQ;AAC9B,YAAIO,SAASD,cAAcE,kBAAd,CAAiCrC,KAAK1C,MAAtC,EAA8CgF,WAA9C,EAAb;AACAF,eAAOvD,WAAP,CAAmBmB,IAAnB;;AAEA;AACAD,QAAA,8CAAAA,CAAEQ,OAAF,CAAUP,KAAKI,KAAf,EAAsB,gBAAQ;AAC5B,cAAImC,SAASJ,cAAcE,kBAAd,CAAiC9C,KAAKjC,MAAtC,EAA8CgF,WAA9C,EAAb;AACAC,iBAAO1D,WAAP,CAAmBU,IAAnB;AACA6C,iBAAOI,OAAP,CAAeD,MAAf;AACD,SAJD;;AAMA,eAAKE,OAAL,CAAaL,MAAb;AACD,OAZD;;AAcA;AACArC,MAAA,8CAAAA,CAAEQ,OAAF,CAAU2B,OAAOrC,KAAjB,EAAwB,gBAAS;AAC/B,YAAI6C,SAASP,cAAcE,kBAAd,CAAiCtE,KAAKT,MAAtC,EAA8CgF,WAA9C,EAAb;AACAI,eAAO7D,WAAP,CAAmBd,IAAnB;;AAEA,YAAIA,KAAKiB,MAAT,EAAiB;AACf0D,iBAAOC,aAAP,CAAqB,OAAKC,OAAL,CAAa7E,KAAKiB,MAAlB,EAA0B6D,aAA1B,CAAwC9E,KAAKS,UAA7C,CAArB;AACD;;AAED,YAAIT,KAAKe,MAAT,EAAiB;AACf4D,iBAAOI,aAAP,CAAqB,OAAKF,OAAL,CAAa7E,KAAKe,MAAlB,EAA0B+D,aAA1B,CAAwC9E,KAAKQ,UAA7C,CAArB;AACD;;AAED,eAAKiB,OAAL,CAAakD,MAAb;AACD,OAbD;AAcD;AA/CH;AAAA;AAAA,uCAiDqB;AACjB,0BACK,KAAKzD,SAAL,EADL;AAEE6C,iBAAS,KAAKA,OAFhB;AAGEC,iBAAS,KAAKA,OAHhB;AAIEC,cAAM,KAAKA,IAJb;AAKEnC,eAAO,8CAAAE,CAAErB,GAAF,CAAM,KAAKmB,KAAX,EAAkB;AAAA,iBAAQ9B,KAAKkB,SAAL,EAAR;AAAA,SAAlB,CALT;AAME4C,eAAO,8CAAA9B,CAAErB,GAAF,CAAM,KAAKmD,KAAX,EAAkB;AAAA,iBAAQ9D,KAAKkB,SAAL,EAAR;AAAA,SAAlB;AANT;AAQD;AA1DH;AAAA;AAAA,mCA4DiB8D,MA5DjB,EA4DyB;AACrBhD,MAAA,8CAAAA,CAAEQ,OAAF,CAAU,KAAKyC,gBAAL,EAAV,EAAmC,mBAAW;AAC5C,YAAID,UAAUA,OAAO9C,KAAP,OAAmBgD,QAAQhD,KAAR,EAAjC,EAAkD;AAChD;AACD;AACDgD,gBAAQC,WAAR,CAAoB,KAApB,EAJ4C,CAIhB;AAC7B,OALD;AAMD;AAnEH;AAAA;AAAA,uCAqEqB;AACjB,0CAEK,8CAAAnD,CAAEoD,MAAF,CAAS,KAAKtB,KAAd,EAAqB;AAAA,eAAQ7B,KAAKoD,UAAL,EAAR;AAAA,OAArB,CAFL,sBAIK,8CAAArD,CAAEoD,MAAF,CAAS,8CAAApD,CAAEsD,OAAF,CAAU,KAAKxD,KAAf,EAAsB;AAAA,eAAQG,KAAKhC,MAAb;AAAA,OAAtB,CAAT,EAAqD;AAAA,eAAQuB,KAAK6D,UAAL,EAAR;AAAA,OAArD,CAJL,sBAMK,8CAAArD,CAAEoD,MAAF,CAAS,KAAKtD,KAAd,EAAqB;AAAA,eAAQ9B,KAAKqF,UAAL,EAAR;AAAA,OAArB,CANL;AAQD;AA9EH;AAAA;AAAA,iCAgFepB,IAhFf,EAgFqB;AACjB,WAAKA,IAAL,GAAYA,IAAZ;AACA,WAAKtE,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS2F,eAAT;AACD,OAFD;AAGD;AArFH;AAAA;AAAA,8BAuFYxB,OAvFZ,EAuFqBC,OAvFrB,EAuF8B;AAC1B,WAAKD,OAAL,GAAeA,OAAf;AACA,WAAKC,OAAL,GAAeA,OAAf;AACA,WAAKrE,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS2F,eAAT;AACD,OAFD;AAGD;AA7FH;AAAA;AAAA,+BA+FaxB,OA/Fb,EA+FsB;AAClB,WAAKA,OAAL,GAAeA,OAAf;AACA,WAAKpE,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS2F,eAAT;AACD,OAFD;AAGD;AApGH;AAAA;AAAA,+BAsGavB,OAtGb,EAsGsB;AAClB,WAAKD,OAAL,GAAeC,OAAf;AACA,WAAKrE,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS2F,eAAT;AACD,OAFD;AAGD;AA3GH;AAAA;AAAA,iCA6Ge;AACX,aAAO,KAAKvB,OAAZ;AACD;AA/GH;AAAA;AAAA,iCAiHe;AACX,aAAO,KAAKD,OAAZ;AACD;AAnHH;AAAA;AAAA,mCAqHiB;AACb,aAAO,KAAKE,IAAZ;AACD;AAvHH;AAAA;AAAA,4BAyHUhC,IAzHV,EAyHgB;AACZ,UAAIA,gBAAgB,0DAApB,EAA+B;AAC7B,eAAOA,IAAP;AACD;AACD,UAAI,CAAC,KAAK6B,KAAL,CAAW7B,IAAX,CAAL,EAAuB;AACrB,eAAO,IAAP;AACD;AACD,aAAO,KAAK6B,KAAL,CAAW7B,IAAX,CAAP;AACD;AAjIH;AAAA;AAAA,4BAmIUjC,IAnIV,EAmIgB;AACZ,UAAIA,gBAAgB,0DAApB,EAA+B;AAC7B,eAAOA,IAAP;AACD;AACD,UAAG,CAAC,KAAK8B,KAAL,CAAW9B,IAAX,CAAJ,EAAsB;AACpB,eAAO,IAAP;AACD;AACD,aAAO,KAAK8B,KAAL,CAAW9B,IAAX,CAAP;AACD;AA3IH;AAAA;AAAA,4BA6IUA,IA7IV,EA6IgB;AAAA;;AACZA,WAAKwF,WAAL,CAAiB;AACf1F,uBAAe,yBAAM;AACnB,iBAAKqB,UAAL,CAAgBnB,IAAhB;AACD;AAHc,OAAjB;AAKA,WAAK8B,KAAL,CAAW9B,KAAKkC,KAAL,EAAX,IAA2BlC,IAA3B;AACA,WAAKL,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS6F,YAAT;AACD,OAFD;AAGA,aAAOzF,IAAP;AACD;AAxJH;AAAA;AAAA,4BA0JUiC,IA1JV,EA0JgB;AAAA;;AACZA,WAAKuD,WAAL,CAAiB;AACf1F,uBAAe,yBAAM;AACnB,iBAAK4F,UAAL,CAAgBzD,IAAhB;AACD;AAHc,OAAjB;AAKA,WAAK6B,KAAL,CAAW7B,KAAKC,KAAL,EAAX,IAA2BD,IAA3B;AACA,WAAKtC,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS+F,YAAT;AACD,OAFD;AAGA,aAAO1D,IAAP;AACD;AArKH;AAAA;AAAA,+BAuKajC,IAvKb,EAuKmB;AACf,UAAIA,gBAAgB,0DAApB,EAA8B;AAC5B,eAAO,KAAK8B,KAAL,CAAW9B,KAAKkC,KAAL,EAAX,CAAP;AACA,aAAKvC,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,mBAAS6F,YAAT;AACD,SAFD;AAGA;AACD;AACD,aAAO,KAAK3D,KAAL,CAAW,KAAK9B,IAAhB,CAAP;AACA,WAAKL,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS6F,YAAT;AACD,OAFD;AAGD;AAnLH;AAAA;AAAA,+BAqLaxD,IArLb,EAqLmB;AACf,UAAIA,gBAAgB,0DAApB,EAA+B;AAC7B,eAAO,KAAK6B,KAAL,CAAW7B,KAAKC,KAAL,EAAX,CAAP;AACA,aAAKvC,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,mBAAS+F,YAAT;AACD,SAFD;AAGA;AACD;;AAED,aAAO,KAAK7B,KAAL,CAAW,KAAK7B,IAAhB,CAAP;AACA,WAAKtC,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS+F,YAAT;AACD,OAFD;AAGD;AAlMH;AAAA;AAAA,+BAoMa;AACT,aAAO,KAAK7D,KAAZ;AACD;AAtMH;AAAA;AAAA,+BAwMa;AACT,aAAO,KAAKgC,KAAZ;AACD;AA1MH;;AAAA;AAAA,EAAkC,+DAAlC,E;;;;;;;;;;;;;ACJA,IAAa8B,OAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AACE;;;;AADF,0BAKe;AACX,aAAO,uCAAuCC,OAAvC,CAA+C,OAA/C,EAAwD,UAAUC,CAAV,EAAa;AAC1E,YAAIC,IAAIC,KAAKC,MAAL,KAAgB,EAAhB,GAAqB,CAA7B;AAAA,YAAgCC,IAAIJ,KAAK,GAAL,GAAWC,CAAX,GAAgBA,IAAI,GAAJ,GAAU,GAA9D;AACA,eAAOG,EAAEC,QAAF,CAAW,EAAX,CAAP;AACD,OAHM,CAAP;AAID;AAVH;;AAAA;AAAA,I;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;;AAEA,IAAaC,gBAAb;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,6BAMW;AAAA,UACCC,KADD,GACW,KAAKpD,KADhB,CACCoD,KADD;;AAEP,UAAM7E,OACJ,4DAAC,uEAAD,IAAY,MAAM6E,MAAM5G,IAAxB,EAA8B,MAAM4G,MAAMrF,SAAN,EAApC,GADF;AAGA,UAAMsF,QACJ;AAAA;AAAA,UAAK,WAAU,MAAf;AACGD,cAAMC;AADT,OADF;;AAMA,aACE;AAAA;AAAA,UAAK,WAAW,CAACD,MAAME,EAAN,GAAW,IAAX,GAAkB,KAAnB,IAA4B,OAA5C;AACGF,cAAME,EAAN,GAAW/E,IAAX,GAAkB8E,KADrB;AAEGD,cAAME,EAAN,GAAWD,KAAX,GAAmB9E;AAFtB,OADF;AAMD;AAvBH;;AAAA;AAAA,EAAsC,6CAAA+B,CAAMiD,SAA5C,UACS7C,YADT,GACwB;AACpB4C,MAAI,IADgB;AAEpBD,SAAO;AAFa,CADxB,S;;;;;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;;AAEA,IAAaG,eAAb;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,oCACkB;AAAA;;AACd,UAAMC,eAAe,KAAKzD,KAAL,CAAWmB,aAAX,CAAyBuC,eAAzB,EAArB;;AAEA,aAAO,8CAAA3E,CAAErB,GAAF,CAAM+F,aAAanE,QAAb,EAAN,EAA+B,gBAAQ;AAC5C;AACA,YAAIvC,KAAKQ,UAAL,KAAoB,IAAxB,EAA8B;AAC5B,cAAG;AACD;AACAR,iBAAKC,MAAL,CAAY,CAAZ,EAAe2G,cAAf,CAA8B,OAAK3D,KAAL,CAAWmB,aAAX,CAAyByC,aAAzB,CAAuC7G,KAAKQ,UAA5C,CAA9B;AACD;AACD;AACA,iBAAMsG,EAAN,EAAU;AACRJ,yBAAavF,UAAb,CAAwBnB,IAAxB;AACA;AACD;AACF;AACD,YAAIA,KAAKS,UAAL,KAAoB,IAAxB,EAA8B;AAC5B,cAAG;AACDuB,YAAA,8CAAAA,CAAE+E,IAAF,CAAO/G,KAAKC,MAAZ,EAAoB2G,cAApB,CAAmC,OAAK3D,KAAL,CAAWmB,aAAX,CAAyByC,aAAzB,CAAuC7G,KAAKS,UAA5C,CAAnC;AACD;AACD;AACA,iBAAMqG,EAAN,EAAS;AACPJ,yBAAavF,UAAb,CAAwBnB,IAAxB;AACA;AACD;AACF;;AAED;AACA,YAAMgH,gBAAgB,OAAK/D,KAAL,CAAWmB,aAAX,CAAyB6C,qBAAzB,CAA+CjH,IAA/C,CAAtB;AACA,YAAG,CAACgH,aAAJ,EAAkB;AAChBE,kBAAQC,GAAR,CAAY,iCAAiCnH,KAAKoH,OAAL,EAA7C;AACA,iBAAO,IAAP;AACD;;AAED,YAAMnE,QAAQ;AACZX,eAAKtC,KAAKkC,KAAL,EADO;AAEZlC,gBAAMA,IAFM;AAGZoE,yBAAe,OAAKnB,KAAL,CAAWmB;AAHd,SAAd;;AAMA,eACE;AAAC,yEAAD;AAAgBnB,eAAhB;AACGM,UAAA,6CAAAA,CAAM8D,YAAN,CAAmBL,aAAnB,EAAkC,EAAEM,YAAY,OAAKrE,KAAL,CAAWqE,UAAzB,EAAlC;AADH,SADF;AAKD,OA1CM,CAAP;AA2CD;AA/CH;AAAA;AAAA,6BAiDW;AACP,UAAMZ,eAAe,KAAKzD,KAAL,CAAWmB,aAAX,CAAyBuC,eAAzB,EAArB;AACA,UAAM1C,OAAOyC,aAAaa,YAAb,EAAb;AACA,UAAMxD,UAAU2C,aAAac,UAAb,EAAhB;AACA,UAAMxD,UAAU0C,aAAae,UAAb,EAAhB;AACA,UAAMC,WAAW;AACfC,8BAAoB1D,OAAO,KAA3B,oBAA+CF,OAA/C,YAA6DC,OAA7D,QADe;AAEfhB,eAAO,MAFQ;AAGfG,gBAAQ;AAHO,OAAjB;;AAMA,aACE;AAAA;AAAA,UAAK,OAAOuE,QAAZ;AACG,aAAKE,aAAL;AADH,OADF;AAKD;AAjEH;;AAAA;AAAA,EAAqC,6CAAArE,CAAMiD,SAA3C,E;;;;;;;;;;;;;;;;;;;ACJA;;AAEA,IAAaqB,UAAb;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CACyB;AACrB,aAAO,KAAK5E,KAAL,CAAWmB,aAAX,CAAyB0D,gBAAzB,CAA0C,KAAK7E,KAAL,CAAWjD,IAArD,CAAP;AACD;AAHH;AAAA;AAAA,6BAKW;AACP,aAAO,KAAKiD,KAAL,CAAW8E,QAAlB;AACD;AAPH;;AAAA;AAAA,EAAgC,6CAAAxE,CAAMiD,SAAtC,E;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;;AAEA,IAAawB,eAAb;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,6BACW;AAAA;;AAAA,UACC5D,aADD,GACmB,KAAKnB,KADxB,CACCmB,aADD;;AAEP,UAAMsC,eAAetC,cAAcuC,eAAd,EAArB;AACA,UAAM1D,QAAQ;AACZJ,mBAAU,WADE;AAEZC,eAAM;AACJ6E,qBAAW,WAAWjB,aAAaa,YAAb,KAA8B,KAAzC,GAAiD,cAAjD,GAAkEb,aAAac,UAAb,EAAlE,GAA4F,KAA5F,GAAkGd,aAAae,UAAb,EAAlG,GAA4H,KADnI;AAEJzE,iBAAO,MAFH;AAGJG,kBAAQ;AAHJ;AAFM,OAAd;;AASA;AACA,UAAM4E,WAAW,8CAAA/F,CAAErB,GAAF,CAAM+F,aAAauB,QAAb,EAAN,EAA+B,gBAAQ;AACtD,eACE;AAAC,yEAAD;AAAA,YAAY,KAAKhG,KAAKvC,EAAtB,EAA0B,MAAMuC,IAAhC,EAAsC,eAAemC,aAArD;AACG,iBAAKnB,KAAL,CAAWmB,aAAX,CAAyB8D,qBAAzB,CAA+CjG,IAA/C;AADH,SADF;AAKD,OANgB,CAAjB;;AAQA,aACE;AAAA;AAASgB,aAAT;AACG8E;AADH,OADF;AAKD;AA3BH;;AAAA;AAAA,EAAqC,6CAAAxE,CAAMiD,SAA3C,E;;;;;;;;;;;;;;;;;;;ACJA;;AAEA,IAAa2B,UAAb;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,4CACyB;AACrB,aAAO,KAAKlF,KAAL,CAAWmB,aAAX,CAAyB0D,gBAAzB,CAA0C,KAAK7E,KAAL,CAAWhB,IAArD,CAAP;AACD;AAHH;AAAA;AAAA,6BAKW;AAAA,mBACoB,KAAKgB,KADzB;AAAA,UACChB,IADD,UACCA,IADD;AAAA,UACO8F,QADP,UACOA,QADP;;AAEP,UAAM9E,QAAQ;AACZ,uBAAehB,KAAKvC,EADR;AAEZmD,mBAAW,UAAU,KAAKI,KAAL,CAAWhB,IAAX,CAAgBoD,UAAhB,KAA+B,WAA/B,GAA6C,EAAvD,CAFC;AAGZvC,eAAM;AACJW,eAAK,KAAKR,KAAL,CAAWhB,IAAX,CAAgB9B,CADjB;AAEJuD,gBAAM,KAAKT,KAAL,CAAWhB,IAAX,CAAgB/B;AAFlB;AAHM,OAAd;;AASA,aACE;AAAA;AAAS+C,aAAT;AACG8E;AADH,OADF;AAKD;AArBH;;AAAA;AAAA,EAAgC,6CAAAxE,CAAMiD,SAAtC,E;;;;;;;;;;;;;;;;;;;ACFA;;AAEA,IAAa4B,UAAb;AAAA;;AACE,sBAAYnF,KAAZ,EAAmB;AAAA;;AAAA,wHACXA,KADW;;AAEjB,UAAKoF,KAAL,GAAa;AACXhJ,gBAAU;AADC,KAAb;AAFiB;AAKlB;;AANH;AAAA;AAAA,6BAQW;AAAA;;AAAA,mBACgB,KAAK4D,KADrB;AAAA,UACCxD,IADD,UACCA,IADD;AAAA,UACOwC,IADP,UACOA,IADP;;AAEP,aACE;AACE,mBAAW,UAAU,KAAKoG,KAAL,CAAWhJ,QAAX,GAAsB,WAAtB,GAAoC,EAA9C,CADb;AAEE,sBAAc;AAAA,iBAAM,OAAKiJ,QAAL,CAAc,EAAEjJ,UAAU,IAAZ,EAAd,CAAN;AAAA,SAFhB;AAGE,sBAAc;AAAA,iBAAM,OAAKiJ,QAAL,CAAc,EAAEjJ,UAAU,KAAZ,EAAd,CAAN;AAAA,SAHhB;AAIE,qBAAWI,IAJb;AAKE,uBAAawC,KAAKC,KAAL;AALf,QADF;AASD;AAnBH;;AAAA;AAAA,EAAgC,6CAAAqB,CAAMiD,SAAtC,E;;;;;;;ACFA,0B;;;;;;;ACAA,mB;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA,gDAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,gCAAgC,UAAU,EAAE;AAC5C,C;;;;;;;;;;;;;;;;;;;;;;ACpBA;AACA;AACA;AACA;;AAEA;;;AAGA,IAAa+B,aAAb;AAAA;;AACE,2BAAc;AAAA;;AAAA;;AAEZ,UAAK7B,YAAL,GAAoB,IAAI,mEAAJ,EAApB;AACA,UAAK8B,aAAL,GAAqB,EAArB;AACA,UAAKC,aAAL,GAAqB,EAArB;AACA,UAAKC,iBAAL,GAAyB,EAAzB;AACA,UAAKC,MAAL,GAAc,IAAd;AACA,UAAKC,gBAAL,GAAwB,IAAxB;AACA,UAAKC,WAAL,GAAmB,YAAM,CAAE,CAA3B;AARY;AASb;;AAVH;AAAA;AAAA,2CAYyB;AACrB,WAAKD,gBAAL,GAAwB,IAAxB;AACD;AAdH;AAAA;AAAA,0CAgBwBE,QAhBxB,EAgBkC;AAAA;;AAC9B,WAAKF,gBAAL,GAAwB,EAAxB;AACAE,eAAStG,OAAT,CAAiB,UAACuG,MAAD,EAAY;;AAE3B;AACA,YAAIA,kBAAkB,0DAAtB,EAAiC;AAC/B/G,UAAA,8CAAAA,CAAEQ,OAAF,CAAUuG,OAAOC,QAAP,EAAV,EAA6B,gBAAQ;AACnChH,YAAA,8CAAAA,CAAEQ,OAAF,CAAUhB,KAAKe,QAAL,EAAV,EAA2B,gBAAQ;AACjC,qBAAKqG,gBAAL,CAAsB5I,KAAKkC,KAAL,EAAtB,IAAsC,IAAtC;AACD,aAFD;AAGD,WAJD;AAKD;;AAED,YAAI6G,kBAAkB,2DAAtB,EAAkC;AAChC,iBAAKH,gBAAL,CAAsBG,OAAOE,OAAP,GAAiB/G,KAAjB,EAAtB,IAAkD,IAAlD;AACD;;AAED,eAAK0G,gBAAL,CAAsBG,OAAO7G,KAAP,EAAtB,IAAwC,IAAxC;AACD,OAhBD;AAiBD;AAnCH;AAAA;AAAA,qCAqCmBgH,SArCnB,EAqC8B;AAC1B;AACA,UAAI,KAAKN,gBAAL,KAA0B,IAA9B,EAAoC;AAClC,eAAO,IAAP;AACD;;AAED,aAAO,KAAKA,gBAAL,CAAsBM,UAAUhH,KAAV,EAAtB,MAA6CiH,SAApD;AACD;AA5CH;AAAA;AAAA,8BA8CYR,MA9CZ,EA8CoB;AAChB,WAAKA,MAAL,GAAcA,MAAd;AACD;AAhDH;AAAA;AAAA,oCAkDkBtC,KAlDlB,EAkDyB;AACrB,WAAKK,YAAL,GAAoBL,KAApB;AACD;AApDH;AAAA;AAAA,mCAsDiBwC,WAtDjB,EAsD8B;AAC1B,WAAKA,WAAL,GAAmBA,WAAnB;AACD;AAxDH;AAAA;AAAA,sCA0DoB;AAChB,aAAO,KAAKnC,YAAZ;AACD;AA5DH;AAAA;AAAA,uCA8DqB;AACjB,aAAO,KAAK8B,aAAZ;AACD;AAhEH;AAAA;AAAA,uCAkEqB;AACjB,aAAO,KAAKC,aAAZ;AACD;AApEH;AAAA;AAAA,uCAsEqB5F,SAtErB,EAsEgC;AAC5B,aAAO,KAAK6F,iBAAL,CAAuB7F,SAAvB,CAAP;AACD;AAxEH;AAAA;AAAA,4CA0E0BuG,OA1E1B,EA0EmC;AAC/B,WAAKV,iBAAL,CAAuBU,QAAQC,OAAR,EAAvB,IAA4CD,OAA5C;AACD;AA5EH;AAAA;AAAA,wCA8EsBA,OA9EtB,EA8E+B;AAC3B,WAAKZ,aAAL,CAAmBY,QAAQhC,OAAR,EAAnB,IAAwCgC,OAAxC;AACA,WAAKzJ,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS0J,oBAAT;AACD,OAFD;AAGD;AAnFH;AAAA;AAAA,wCAqFsBF,OArFtB,EAqF+B;AAC3B,WAAKX,aAAL,CAAmBW,QAAQhC,OAAR,EAAnB,IAAwCgC,OAAxC;AACA,WAAKzJ,iBAAL,CAAuB,UAACC,QAAD,EAAc;AACnCA,iBAAS2J,oBAAT;AACD,OAFD;AAGD;AA1FH;AAAA;AAAA,sCA4FoBtH,IA5FpB,EA4F0B;AACtB,UAAI,KAAKuG,aAAL,CAAmBvG,KAAKmF,OAAL,EAAnB,CAAJ,EAAuC;AACrC,eAAO,KAAKoB,aAAL,CAAmBvG,KAAKmF,OAAL,EAAnB,CAAP;AACD;AACDF,cAAQC,GAAR,oDAA6DlF,KAAKmF,OAAL,EAA7D;AACA,aAAO,IAAP;AACD;AAlGH;AAAA;AAAA,sCAoGoBpH,IApGpB,EAoG0B;AACtB,UAAI,KAAKyI,aAAL,CAAmBzI,KAAKoH,OAAL,EAAnB,CAAJ,EAAwC;AACtC,eAAO,KAAKqB,aAAL,CAAmBzI,KAAKoH,OAAL,EAAnB,CAAP;AACD;AACDF,cAAQC,GAAR,oDAA6DnH,KAAKoH,OAAL,EAA7D;AACA,aAAO,IAAP;AACD;AA1GH;AAAA;AAAA,0CA4GwBpH,IA5GxB,EA4G8B;AAC1B,UAAMwJ,cAAc,KAAKC,iBAAL,CAAuBzJ,IAAvB,CAApB;AACA,UAAG,CAACwJ,WAAJ,EAAiB;AACf,sDAA4CxJ,KAAKoH,OAAL,EAA5C;AACD;AACD,aAAOoC,YAAYE,mBAAZ,CAAgC,IAAhC,EAAsC1J,IAAtC,CAAP;AACD;AAlHH;AAAA;AAAA,0CAoHwBiC,IApHxB,EAoH8B;AAC1B,UAAM0H,cAAc,KAAKC,iBAAL,CAAuB3H,IAAvB,CAApB;AACA,UAAG,CAAC0H,WAAJ,EAAiB;AACf,wDAA8C1H,KAAKmF,OAAL,EAA9C;AACD;AACD,aAAOuC,YAAYD,mBAAZ,CAAgC,IAAhC,EAAsCzH,IAAtC,CAAP;AACD;AA1HH;AAAA;AAAA,0CA4HwB4H,KA5HxB,EA4H+B;AAC3B,UAAMhJ,QAAQ,KAAKiJ,gBAAL,CAAsBD,MAAME,KAA5B,EAAmCF,MAAMG,KAAzC,CAAd;AACA,aAAO;AACL9J,WAAIW,MAAMX,CAAN,IAAW,KAAKwG,YAAL,CAAkBa,YAAlB,KAAmC,KAA9C,CAAD,GAAyD,KAAKb,YAAL,CAAkBc,UAAlB,EADvD;AAELrH,WAAIU,MAAMV,CAAN,IAAW,KAAKuG,YAAL,CAAkBa,YAAlB,KAAmC,KAA9C,CAAD,GAAyD,KAAKb,YAAL,CAAkBe,UAAlB;AAFvD,OAAP;AAID;AAlIH;AAAA;AAAA,qCAoImBvH,CApInB,EAoIqBC,CApIrB,EAoIwB;AACpB,UAAM8J,aAAa,KAAKtB,MAAL,CAAYuB,qBAAZ,EAAnB;AACA,aAAO,EAAEhK,GAAGA,IAAE+J,WAAWvG,IAAlB,EAAwBvD,GAAGA,IAAE8J,WAAWxG,GAAxC,EAAP;AACD;AAvIH;AAAA;AAAA,uCAyIqBjC,IAzIrB,EAyI2B;AACvB,UAAM2I,WAAW,KAAKxB,MAAL,CAAYyB,aAAZ,uBACK5I,KAAK6H,OAAL,EADL,wBACsC7H,KAAKR,SAAL,GAAiBkB,KAAjB,EADtC,QAAjB;AAGA,UAAIiI,aAAa,IAAjB,EAAuB;AACrB,+DAAqD3I,KAAKR,SAAL,GAAiBkB,KAAjB,EAArD,qBAA6FV,KAAK6H,OAAL,EAA7F;AACD;AACD,aAAOc,QAAP;AACD;AAjJH;AAAA;AAAA,kCAmJgB3I,IAnJhB,EAmJsB;AAClB,UAAM6I,gBAAgB,KAAKC,kBAAL,CAAwB9I,IAAxB,CAAtB;AACA,UAAM+I,aAAaF,cAAcH,qBAAd,EAAnB;AACA,UAAMM,MAAM,KAAKV,gBAAL,CAAsBS,WAAW7G,IAAjC,EAAsC6G,WAAW9G,GAAjD,CAAZ;AACA,UAAMvD,IAAKmK,cAAcI,WAAd,GAA4B,CAA7B,GAAkCD,IAAItK,CAAJ,IAAS,KAAKwG,YAAL,CAAkBa,YAAlB,KAAmC,KAA5C,CAAlC,GACR,KAAKb,YAAL,CAAkBc,UAAlB,EADF;AAEA,UAAMrH,IAAKkK,cAAcK,YAAd,GAA2B,CAA5B,GAAiCF,IAAIrK,CAAJ,IAAS,KAAKuG,YAAL,CAAkBa,YAAlB,KAAmC,KAA5C,CAAjC,GACR,KAAKb,YAAL,CAAkBe,UAAlB,EADF;;AAGA,aAAO;AACLvH,YADK;AAELC;AAFK,OAAP;AAID;AAhKH;;AAAA;AAAA,EAAmC,+DAAnC,E;;;;;;;;;;;;;;;;;;;ACRA;AACA;;AAEA,IAAawK,mBAAb;AAAA;;AACE,iCAAc;AAAA;;AAAA,qIACN,WADM;AAEb;;AAHH;AAAA;AAAA,kCAKgB;AACZ,aAAO,IAAI,0DAAJ,EAAP;AACD;AAPH;;AAAA;AAAA,EAAyC,yFAAzC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;IAMMC,K;;;AACJ,iBAAY3H,KAAZ,EAAmB;AAAA;;AAGjB;AAHiB,8GACXA,KADW;;AAIjB,UAAK4H,MAAL,GAAc,IAAI,gEAAJ,EAAd;AACA,UAAKA,MAAL,CAAYC,mBAAZ,CAAgC,IAAI,qEAAJ,EAAhC;AACD,UAAKD,MAAL,CAAYE,mBAAZ,CAAgC,IAAI,qEAAJ,EAAhC;AACA,UAAKF,MAAL,CAAYC,mBAAZ,CAAgC,IAAI,mFAAJ,EAAhC;;AAEA;AACA,UAAKzE,KAAL,GAAa,IAAI,+DAAJ,EAAb;AAVkB;AAWlB;;;;wCAEmB;AAAA;;AAClB2E,iBAAW,YAAM;AACf,eAAKC,iBAAL;AACD,OAFD,EAEG,IAFH;AAGD;;;+BAEUC,O,EAAS;AAAA,UACVzL,IADU,GACYyL,OADZ,CACVzL,IADU;AAAA,UACJ0L,KADI,GACYD,OADZ,CACJC,KADI;AAAA,UACGjL,CADH,GACYgL,OADZ,CACGhL,CADH;AAAA,UACMC,CADN,GACY+K,OADZ,CACM/K,CADN;;AAElB,UAAI8B,OAAO,IAAI,mEAAJ,CAAyBxC,IAAzB,EAA+B0L,KAA/B,CAAX;AACDlJ,WAAK/B,CAAL,GAASA,CAAT;AACA+B,WAAK9B,CAAL,GAASA,CAAT;AACA,aAAO8B,IAAP;AACA;;;+BAEUA,I,EAAMiJ,O,EAAS;AAAA,UAChBE,OADgB,GACMF,OADN,CAChBE,OADgB;AAAA,UACP1L,EADO,GACMwL,OADN,CACPxL,EADO;AAAA,UACHD,IADG,GACMyL,OADN,CACHzL,IADG;;AAExB,aAAOwC,KAAKwC,OAAL,CAAa,IAAI,mEAAJ,CAAyB2G,OAAzB,EAAkC1L,EAAlC,EAAsCD,IAAtC,CAAb,CAAP;AACD;;;8BAES4L,K,EAAOC,K,EAAO;AACtB,UAAMtL,OAAO,IAAI,4DAAJ,EAAb;AACDA,WAAK+E,aAAL,CAAmBsG,KAAnB;AACArL,WAAK4E,aAAL,CAAmB0G,KAAnB;AACA,aAAOtL,IAAP;AACA;;;wCAEmB;AAAA,UACV6K,MADU,GACQ,IADR,CACVA,MADU;AAAA,UACFxE,KADE,GACQ,IADR,CACFA,KADE;;AAGlB;;AACDwE,aAAOU,uBAAP,CAA+B,IAAI,6EAAJ,EAA/B;AACAV,aAAOU,uBAAP,CAA+B,IAAI,6EAAJ,EAA/B;AACAV,aAAOU,uBAAP,CAA+B,IAAI,sEAAJ,EAA/B;AACAV,aAAOU,uBAAP,CAA+B,IAAI,qFAAJ,EAA/B;AACAV,aAAOU,uBAAP,CAA+B,IAAI,qFAAJ,EAA/B;;AAEA;AACA,UAAMC,MAAMC,KAAKC,SAAL,CAAerF,MAAMsF,gBAAN,EAAf,CAAZ;AACAzE,cAAQC,GAAR,CAAYqE,GAAZ;;AAEA;AACA,UAAMI,SAAS,IAAI,+DAAJ,EAAf;AACAA,aAAOC,kBAAP,CAA0BJ,KAAKK,KAAL,CAAWN,GAAX,CAA1B,EAA0CX,MAA1C;AACAA,aAAOkB,eAAP,CAAuBH,MAAvB;AACA1E,cAAQC,GAAR,CAAYyE,MAAZ;AACA;;;6BAEQ;AAAA,UACCf,MADD,GACmB,IADnB,CACCA,MADD;AAAA,UACSxE,KADT,GACmB,IADnB,CACSA,KADT;;AAGP;;AACA,UAAM2F,QAAQ,KAAKC,UAAL,CAAgB;AAC5BxM,cAAM,QADsB;AAE5B0L,eAAO,kBAFqB;AAG5BjL,WAAG,GAHyB;AAI5BC,WAAG;AAJyB,OAAhB,CAAd;AAMA,UAAMkL,QAAQ,KAAKa,UAAL,CAAgBF,KAAhB,EAAuB;AACnCZ,iBAAS,KAD0B;AAEnC1L,YAAI,OAF+B;AAGnCD,cAAM;AAH6B,OAAvB,CAAd;;AAMA;AACA,UAAM0M,cAAc,IAAI,2EAAJ,EAApB;AACAA,kBAAYjM,CAAZ,GAAgB,GAAhB;AACDiM,kBAAYhM,CAAZ,GAAgB,GAAhB;;AAEC;AACA,UAAMiM,QAAQ,KAAKH,UAAL,CAAgB;AAC5BxM,cAAM,QADsB;AAE5B0L,eAAO,KAFqB;AAG5BjL,WAAG,GAHyB;AAI5BC,WAAG;AAJyB,OAAhB,CAAd;AAMA,UAAMmL,QAAQ,KAAKY,UAAL,CAAgBE,KAAhB,EAAuB;AACnChB,iBAAS,IAD0B;AAEnC1L,YAAI,MAF+B;AAGnCD,cAAM;AAH6B,OAAvB,CAAd;;AAMD;AACA4G,YAAM3B,OAAN,CAAcsH,KAAd;AACA3F,YAAM3B,OAAN,CAAcyH,WAAd;AACA9F,YAAM3B,OAAN,CAAc0H,KAAd;AACA/F,YAAM5E,OAAN,CAAc,KAAK4K,SAAL,CAAehB,KAAf,EAAsBc,YAAY9J,KAAZ,CAAkB,MAAlB,CAAtB,CAAd;AACAgE,YAAM5E,OAAN,CAAc,KAAK4K,SAAL,CAAeF,YAAY9J,KAAZ,CAAkB,OAAlB,CAAf,EAA2CiJ,KAA3C,CAAd;;AAEA;AACAT,aAAOkB,eAAP,CAAuB1F,KAAvB;;AAEC;AACD,aAAO,4DAAC,gEAAD,IAAmB,eAAewE,MAAlC,GAAP;AACA;;;;EA3GiB,6CAAAtH,CAAMiD,S;;AA8G1B8F,OAAOC,MAAP,GAAgB,YAAM;AACpBC,EAAA,iDAAAA,CAASC,MAAT,CAAgB,4DAAC,KAAD,OAAhB,EAA2BC,SAASC,cAAT,CAAwB,MAAxB,CAA3B;AACD,CAFD,C;;;;;;;;;;;;;;;;;;;;;AC5HA;AACA;AACA;;AAEA,IAAaC,kBAAb;AAAA;;AACE,gCAAa;AAAA;;AAAA,mIACL,SADK;AAEZ;;AAHH;AAAA;AAAA,wCAKsBxI,aALtB,EAKqCpE,IALrC,EAK2C;AACvC,aACE,4DAAC,6EAAD,IAAmB,MAAMA,IAAzB,EAA+B,eAAeoE,aAA9C,GADF;AAGD;AATH;;AAAA;AAAA,EAAwC,2EAAxC,E;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;;AAEA,IAAayI,kBAAb;AAAA;;AACE,gCAAa;AAAA;;AAAA,mIACL,SADK;AAEZ;;AAHH;AAAA;AAAA,wCAKsBzI,aALtB,EAKqCnC,IALrC,EAK2C;AACvC,aACE,4DAAC,6EAAD,IAAmB,MAAMA,IAAzB,EAA+B,eAAemC,aAA9C,GADF;AAGD;AATH;;AAAA;AAAA,EAAwC,2EAAxC,E;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;;AAEA,IAAa0I,0BAAb;AAAA;;AACE,wCAAa;AAAA;;AAAA,mJACL,kBADK;AAEZ;;AAHH;AAAA;AAAA,kCAKe;AACX,aAAO,IAAIC,gBAAJ,EAAP;AACD;AAPH;;AAAA;AAAA,EAAgD,yFAAhD;;AAUA,IAAaA,gBAAb;AAAA;;AACE,8BAAyD;AAAA,QAA7CtN,IAA6C,uEAAtC,UAAsC;AAAA,QAA1B0L,KAA0B,uEAAlB,gBAAkB;;AAAA;;AAAA,qIACjD,SADiD;;AAEvD,WAAK1L,IAAL,GAAYA,IAAZ;AACA,WAAK0L,KAAL,GAAaA,KAAb;AAHuD;AAIxD;;AALH;AAAA;AAAA,gCAOchH,MAPd,EAOsB;AAClB,sIAAkBA,MAAlB;AACA,WAAK1E,IAAL,GAAY0E,OAAO1E,IAAnB;AACA,WAAK0L,KAAL,GAAahH,OAAOgH,KAApB;AACD;AAXH;AAAA;AAAA,gCAac;AACV,aAAO,8CAAAnJ,CAAEgL,KAAF,gIAA2B;AAChCvN,cAAM,KAAKA,IADqB;AAEhC0L,eAAO,KAAKA;AAFoB,OAA3B,CAAP;AAID;AAlBH;AAAA;AAAA,iCAoBe;AACX,aAAO,8CAAAnJ,CAAEoD,MAAF,CAAS,KAAK/C,KAAd,EAAoB,UAAC4K,SAAD;AAAA,eAAeA,UAAU1G,EAAzB;AAAA,OAApB,CAAP;AACD;AAtBH;AAAA;AAAA,kCAwBgB;AACZ,aAAO,8CAAAvE,CAAEoD,MAAF,CAAS,KAAK/C,KAAd,EAAoB,UAAC4K,SAAD;AAAA,eAAe,CAACA,UAAU1G,EAA1B;AAAA,OAApB,CAAP;AACD;AA1BH;;AAAA;AAAA,EAAsC,0DAAtC,E;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AACA;;AAEA,IAAa2G,0BAAb;AAAA;;AACE,wCAAa;AAAA;;AAAA,mJACL,kBADK;AAEZ;;AAHH;AAAA;AAAA,kCAKe;AACX,aAAO,IAAIC,gBAAJ,CAAqB,IAArB,EAA2B,SAA3B,CAAP;AACD;AAPH;;AAAA;AAAA,EAAgD,yFAAhD;;AAUA,IAAaA,gBAAb;AAAA;;AACE,4BAAY/B,OAAZ,EAAqB3L,IAArB,EAAyC;AAAA,QAAd6G,KAAc,uEAAN,IAAM;;AAAA;;AAAA,qIACjC7G,IADiC;;AAEvC,WAAK8G,EAAL,GAAU6E,OAAV;AACA,WAAK9E,KAAL,GAAaA,SAAS7G,IAAtB;AAHuC;AAIxC;;AALH;AAAA;AAAA,gCAOc0E,MAPd,EAOsB;AAClB,sIAAkBA,MAAlB;AACA,WAAKoC,EAAL,GAAUpC,OAAOoC,EAAjB;AACA,WAAKD,KAAL,GAAanC,OAAOmC,KAApB;AACD;AAXH;AAAA;AAAA,gCAac;AACV;AAEEC,YAAI,KAAKA,EAFX;AAGED,eAAO,KAAKA;AAHd;AAKD;AAnBH;;AAAA;AAAA,EAAsC,0DAAtC,E;;;;;;;;;;;;;;;;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAa8G,aAAb;AAAA;;AACE,yBAAYnK,KAAZ,EAAmB;AAAA;;AAAA,8HACXA,KADW;;AAEjB,UAAKoF,KAAL,GAAa;AACXgF,cAAQ,IADG;AAEXC,qBAAe,KAFJ;AAGXC,sBAAgB;AAHL,KAAb;AAFiB;AAOlB;;AARH;AAAA;AAAA,2CAUwB;AACpB,WAAKtK,KAAL,CAAWmB,aAAX,CAAyBoJ,SAAzB,CAAmC,IAAnC;AACAlB,aAAOmB,mBAAP,CAA2B,SAA3B,EAAsC,KAAKpF,KAAL,CAAWkF,cAAjD;AACD;AAbH;AAAA;AAAA,wCAesBG,SAftB,EAeiC;AAC7B,UAAI,KAAKzK,KAAL,CAAWmB,aAAX,CAAyBsC,YAAzB,CAAsChH,EAAtC,KAA6CgO,UAAUtJ,aAAV,CAAwBsC,YAAxB,CAAqChH,EAAtF,EAA0F;AACxF,aAAK4I,QAAL,CAAc,EAAEgF,eAAe,KAAjB,EAAd;AACAI,kBAAUtJ,aAAV,CAAwBsC,YAAxB,CAAqCxC,QAArC,GAAgD,IAAhD;AACD;AACD,UAAI,CAACwJ,UAAUtJ,aAAV,CAAwBsC,YAAxB,CAAqCxC,QAA1C,EAAoD;AAClD,aAAKoE,QAAL,CAAc,EAAEgF,eAAe,KAAjB,EAAd;AACAI,kBAAUtJ,aAAV,CAAwBsC,YAAxB,CAAqCxC,QAArC,GAAgD,IAAhD;AACD;AACF;AAxBH;AAAA;AAAA,yCA0BuB;AACnB,UAAI,CAAC,KAAKmE,KAAL,CAAWiF,aAAhB,EAA+B;AAC7B,aAAKhF,QAAL,CAAc;AACZgF,yBAAe;AADH,SAAd;AAGD;AACF;AAhCH;AAAA;AAAA,wCAkCsB;AAAA;;AAAA,UACVlJ,aADU,GACQ,KAAKnB,KADb,CACVmB,aADU;;AAElBA,oBAAcoJ,SAAd,CAAwB,KAAKG,IAAL,CAAU,QAAV,CAAxB;AACAvJ,oBAAcwJ,cAAd,CAA6B,KAAK/E,WAAL,CAAiBgF,IAAjB,CAAsB,IAAtB,CAA7B;;AAEA;AACA,WAAKvF,QAAL,CAAc;AACZgF,uBAAe,IADH;AAEZC,wBAAgBjB,OAAOwB,gBAAP,CAAwB,SAAxB,EAAmC,iBAAS;AAC1D;AACA,cAAGjE,MAAMkE,OAAN,KAAkB,EAAlB,IAAwBlE,MAAMkE,OAAN,KAAkB,CAA7C,EAAgD;AAC9C3J,0BAAcuC,eAAd,GAAgC1B,gBAAhC,GAAmDzC,OAAnD,CAA2D,mBAAW;AACpE0C,sBAAQzC,MAAR;AACD,aAFD;AAGA,mBAAKoG,WAAL;AACD;AACF,SARe;AAFJ,OAAd;AAYAyD,aAAO0B,KAAP;AACD;;AAED;;;;AAvDF;AAAA;AAAA,oCA0DkBnE,KA1DlB,EA0DyB;AAAA,UACbnD,YADa,GACI,KAAKzD,KAAL,CAAWmB,aADf,CACbsC,YADa;AAAA,UAEbzF,MAFa,GAEF4I,KAFE,CAEb5I,MAFa;;AAIrB;;AACA,UAAIiE,UAAUjE,OAAOgN,OAAP,CAAe,kBAAf,CAAd;AACA,UAAI/I,OAAJ,EAAa;AACX,YAAMgJ,cAAcjN,OAAOgN,OAAP,CAAe,oBAAf,CAApB;AACA,eAAO;AACL5H,iBAAOK,aAAa7B,OAAb,CAAqBqJ,YAAYC,YAAZ,CAAyB,aAAzB,CAArB,EAA8DC,OAA9D,CAAsElJ,QAAQiJ,YAAR,CAAqB,WAArB,CAAtE,CADF;AAELjJ;AAFK,SAAP;AAID;;AAED;AACAA,gBAAUjE,OAAOgN,OAAP,CAAe,iBAAf,CAAV;AACA,UAAI/I,OAAJ,EAAa;AACX,eAAO;AACLmB,iBAAOK,aAAauC,OAAb,CAAqB/D,QAAQiJ,YAAR,CAAqB,aAArB,CAArB,EAA0DE,aAA1D,CAAwEnJ,QAAQiJ,YAAR,CAAqB,SAArB,CAAxE,CADF;AAELjJ;AAFK,SAAP;AAID;;AAED;AACAA,gBAAUjE,OAAOgN,OAAP,CAAe,eAAf,CAAV;AACA,UAAI/I,OAAJ,EAAa;AACX,eAAO;AACLmB,iBAAOK,aAAauC,OAAb,CAAqB/D,QAAQiJ,YAAR,CAAqB,aAArB,CAArB,CADF;AAELjJ;AAFK,SAAP;AAID;;AAED;AACAA,gBAAUjE,OAAOgN,OAAP,CAAe,oBAAf,CAAV;AACA,UAAI/I,OAAJ,EAAa;AACX,eAAO;AACLmB,iBAAOK,aAAa7B,OAAb,CAAqBK,QAAQiJ,YAAR,CAAqB,aAArB,CAArB,CADF;AAELjJ;AAFK,SAAP;AAID;;AAED,aAAO,IAAP;AACD;AApGH;AAAA;AAAA,4BAsGU2E,KAtGV,EAsGiB;AAAA,UACJzF,aADI,GACc,KAAKnB,KADnB,CACJmB,aADI;;AAEb,UAAMsC,eAAetC,cAAcuC,eAAd,EAArB;AACAkD,YAAMyE,cAAN;AACAzE,YAAM0E,eAAN;AACA7H,mBAAa8H,YAAb,CAA0B9H,aAAaa,YAAb,KAA+BsC,MAAM4E,MAAN,GAAe,EAAxE;AACArK,oBAAcsK,qBAAd,CAAoC,EAApC;AACA,WAAK7F,WAAL;AACD;AA9GH;AAAA;AAAA,gCAgHcgB,KAhHd,EAgHqB;AAAA;;AAAA,UACRzF,aADQ,GACU,KAAKnB,KADf,CACRmB,aADQ;AAAA,UAETiJ,MAFS,GAEE,KAAKhF,KAFP,CAETgF,MAFS;;AAGjB,UAAM3G,eAAetC,cAAcuC,eAAd,EAArB;;AAEA;AACA,UAAI0G,kBAAkB,iEAAtB,EAAuC;AACrC,YAAMsB,WAAWvK,cAAc0F,gBAAd,CAA+BD,MAAME,KAArC,EAA4CF,MAAMG,KAAlD,CAAjB;;AAEAhI,QAAA,8CAAAA,CAAEQ,OAAF,CAAUkE,aAAauB,QAAb,EAAV,EAAmC,gBAAQ;AACzC,cAAIoF,OAAOuB,eAAP,CAAuB3M,KAAK/B,CAA5B,EAA+B+B,KAAK9B,CAApC,EAAuCuG,YAAvC,CAAJ,EAA0D;AACxDzE,iBAAKkD,WAAL,CAAiB,IAAjB;AACD;AACF,SAJD;;AAMAnD,QAAA,8CAAAA,CAAEQ,OAAF,CAAUkE,aAAanE,QAAb,EAAV,EAAmC,gBAAQ;AACzC,cAAIsM,cAAc,IAAlB;AACA7O,eAAKC,MAAL,CAAYuC,OAAZ,CAAoB,iBAAS;AAC3B,gBAAI6K,OAAOuB,eAAP,CAAuB/N,MAAMX,CAA7B,EAAgCW,MAAMV,CAAtC,EAAyCuG,YAAzC,CAAJ,EAA4D;AAC1D7F,oBAAMsE,WAAN,CAAkB,IAAlB;AACD,aAFD,MAEO;AACL0J,4BAAc,KAAd;AACD;AACF,WAND;;AAQA,cAAIA,WAAJ,EAAiB;AACf7O,iBAAKmF,WAAL,CAAiB,IAAjB;AACD;AACF,SAbD;;AAeAkI,eAAOyB,OAAP,GAAiBH,SAASzO,CAA1B;AACAmN,eAAO0B,OAAP,GAAiBJ,SAASxO,CAA1B;AACA,aAAKmI,QAAL,CAAc,EAAE+E,cAAF,EAAd;AACA;AACD,OA5BD,MA4BO,IAAIA,kBAAkB,iEAAtB,EAAuC;AAC5C;AACAA,eAAO2B,eAAP,CAAuBxM,OAAvB,CAA+B,iBAAS;AACtC,cAAI6D,MAAMA,KAAN,YAAuB,0DAAvB,IAAoCA,MAAMA,KAAN,YAAuB,2DAA/D,EAA2E;AACzEA,kBAAMA,KAAN,CAAYnG,CAAZ,GAAgBmG,MAAM4I,QAAN,GACd,CAACpF,MAAME,KAAN,GAAc,OAAK1B,KAAL,CAAWgF,MAAX,CAAkB6B,MAAjC,KAA4CxI,aAAaa,YAAb,KAA8B,GAA1E,CADF;AAGAlB,kBAAMA,KAAN,CAAYlG,CAAZ,GAAgBkG,MAAM8I,QAAN,GACd,CAACtF,MAAMG,KAAN,GAAc,OAAK3B,KAAL,CAAWgF,MAAX,CAAkB+B,MAAjC,KAA4C1I,aAAaa,YAAb,KAA8B,GAA1E,CADF;AAGD;AACF,SATD;AAUA,aAAKsB,WAAL;AACD,OAbM,MAaA,IAAI,KAAKR,KAAL,CAAWgF,MAAX,YAA6B,kEAAjC,EAAmD;AACxD;AACA3G,qBAAa2I,SAAb,CACEhC,OAAOiC,cAAP,GACE,CAACzF,MAAME,KAAN,GAAc,KAAK1B,KAAL,CAAWgF,MAAX,CAAkB6B,MAAjC,KAA4CxI,aAAaa,YAAb,KAA8B,GAA1E,CAFJ,EAIE8F,OAAOkC,cAAP,GACE,CAAC1F,MAAMG,KAAN,GAAY,KAAK3B,KAAL,CAAWgF,MAAX,CAAkB+B,MAA/B,KAA0C1I,aAAaa,YAAb,KAA8B,GAAxE,CALJ;AAQA,aAAKsB,WAAL;AACD;AACF;AA3KH;AAAA;AAAA,gCA6KcgB,KA7Kd,EA6KqB;AAAA,UACRzF,aADQ,GACU,KAAKnB,KADf,CACRmB,aADQ;;AAEjB,UAAMsC,eAAetC,cAAcuC,eAAd,EAArB;AACA,UAAMN,QAAQ,KAAKmJ,eAAL,CAAqB3F,KAArB,CAAd;;AAEAzF,oBAAcqL,oBAAd;;AAEA;AACA,UAAIpJ,UAAU,IAAd,EAAoB;AAClB;AACA,YAAIwD,MAAM6F,QAAV,EAAoB;AAClB,cAAMf,WAAWvK,cAAc0F,gBAAd,CAA+BD,MAAME,KAArC,EAA4CF,MAAMG,KAAlD,CAAjB;AACA,eAAK1B,QAAL,CAAc;AACZ+E,oBAAQ,IAAI,iEAAJ,CACNsB,SAASzO,CADH,EACMyO,SAASxO,CADf;AADI,WAAd;AAKD,SAPD,MAOO;AACL;AACA,cAAMwO,YAAWvK,cAAc0F,gBAAd,CAA+BD,MAAME,KAArC,EAA4CF,MAAMG,KAAlD,CAAjB;AACAtD,uBAAaiJ,cAAb;AACA,eAAKrH,QAAL,CAAc;AACZ+E,oBAAQ,IAAI,kEAAJ,CAAqBsB,UAASzO,CAA9B,EAAiCyO,UAASxO,CAA1C,EAA6CuG,YAA7C;AADI,WAAd;AAGD;AACF,OAjBD,MAiBO,IAAIL,MAAMA,KAAN,YAAuB,0DAA3B,EAAsC;AAC3C;AACA,YAAMsI,aAAWvK,cAAcwL,qBAAd,CAAoC/F,KAApC,CAAjB;AACA,YAAM7J,OAAO,IAAI,0DAAJ,EAAb;AACAA,aAAK+E,aAAL,CAAmBsB,MAAMA,KAAzB;;AAEArG,aAAK6P,aAAL,GAAqBjJ,cAArB,CAAoC+H,UAApC;AACA3O,aAAK8P,YAAL,GAAoBlJ,cAApB,CAAmC+H,UAAnC;;AAEAjI,qBAAaiJ,cAAb;AACA3P,aAAK8P,YAAL,GAAoB3K,WAApB,CAAgC,IAAhC;AACAuB,qBAAajF,OAAb,CAAqBzB,IAArB;;AAEA,aAAKsI,QAAL,CAAc;AACZ+E,kBAAQ,IAAI,iEAAJ,CAAoBxD,MAAME,KAA1B,EAAiCF,MAAMG,KAAvC,EAA8C5F,aAA9C;AADI,SAAd;AAGD,OAhBM,MAgBA;AACL;AACA,YAAI,CAACyF,MAAM6F,QAAP,IAAmB,CAACrJ,MAAMA,KAAN,CAAYhB,UAAZ,EAAxB,EAAkD;AAChDqB,uBAAaiJ,cAAb;AACD;AACDtJ,cAAMA,KAAN,CAAYlB,WAAZ,CAAwB,IAAxB;;AAEA,aAAKmD,QAAL,CAAc;AACZ+E,kBAAQ,IAAI,iEAAJ,CAAoBxD,MAAME,KAA1B,EAAiCF,MAAMG,KAAvC,EAA6C5F,aAA7C;AADI,SAAd;AAGD;AACF;AAjOH;AAAA;AAAA,8BAmOYyF,KAnOZ,EAmOmB;AAAA,UACNzF,aADM,GACY,KAAKnB,KADjB,CACNmB,aADM;;AAGf;;AACA,UAAI,KAAKiE,KAAL,CAAWgF,MAAX,YAA6B,iEAAjC,EAAkD;AAChD,YAAMnI,UAAU,KAAKsK,eAAL,CAAqB3F,KAArB,CAAhB;AACA,YAAI3E,OAAJ,EAAa;AACX,eAAKmD,KAAL,CAAWgF,MAAX,CAAkB2B,eAAlB,CAAkCxM,OAAlC,CAA0C,iBAAS;AACjD;AACA,gBAAI,EAAE6D,MAAMA,KAAN,YAAuB,2DAAzB,CAAJ,EAA0C;AACxC;AACD;;AAED,gBAAInB,QAAQmB,KAAR,YAAyB,0DAA7B,EAAwC;AACtCA,oBAAMA,KAAN,CAAY4C,OAAZ,GAAsBrE,aAAtB,CAAoCM,QAAQmB,KAA5C;AACD;AACF,WATD;AAUD;AACF;;AAEDjC,oBAAcqL,oBAAd;AACA,WAAKnH,QAAL,CAAc,EAAE+E,QAAQ,IAAV,EAAd;AACD;AAzPH;AAAA;AAAA,4CA2P0B;AAAA;;AAAA,UACbjJ,aADa,GACK,KAAKnB,KADV,CACbmB,aADa;;AAEtB,UAAMsC,eAAetC,cAAcuC,eAAd,EAArB;;AAEA,UAAI,CAAC,KAAK0B,KAAL,CAAWiF,aAAhB,EAA+B;AAC7B,eAAO,IAAP;AACD;;AAED,aACE,4DAAC,yEAAD;AACE,uBAAelJ,aADjB;AAEE,oBAAY,oBAACvD,KAAD,EAAQgJ,KAAR,EAAkB;AAC5BA,gBAAM0E,eAAN;AACA7H,uBAAaiJ,cAAb,CAA4B9O,KAA5B;AACA,iBAAKyH,QAAL,CAAc;AACZ+E,oBAAQ,IAAI,iEAAJ,CAAoBxD,MAAME,KAA1B,EAAiCF,MAAMG,KAAvC,EAA8C5F,aAA9C;AADI,WAAd;AAGD;AARH,QADF;AAYD;AA/QH;AAAA;AAAA,qCAiRmB;AAAA,UACPiJ,MADO,GACI,KAAKhF,KADT,CACPgF,MADO;;AAEf,UAAM5C,cAAc,KAAKkD,IAAL,CAAUhF,MAAV,IAAoB,KAAKgF,IAAL,CAAUhF,MAAV,CAAiB8B,WAArC,IAAoD6B,OAAOyD,UAA/E;AACA,UAAMrF,eAAe,KAAKiD,IAAL,CAAUhF,MAAV,IAAoB,KAAKgF,IAAL,CAAUhF,MAAV,CAAiB+B,YAArC,IAAqD4B,OAAO0D,WAAjF;;AAEA,UAAI,EAAE3C,kBAAkB,iEAApB,CAAJ,EAA0C;AACxC,eAAO,IAAP;AACD;;AAED,UAAMvK,QAAQ;AACZE,eAAOgD,KAAKiK,GAAL,CAAS5C,OAAOyB,OAAP,GAAiBzB,OAAO6B,MAAjC,CADK;AAEZ/L,gBAAQ6C,KAAKiK,GAAL,CAAS5C,OAAO0B,OAAP,GAAiB1B,OAAO+B,MAAjC;AAFI,OAAd;;AAKA,UAAK/B,OAAOyB,OAAP,GAAiBzB,OAAO6B,MAAzB,GAAmC,CAAvC,EAA0C;AACxCpM,cAAMoN,KAAN,GAAczF,cAAc4C,OAAO6B,MAAnC;AACD,OAFD,MAEO;AACLpM,cAAMY,IAAN,GAAa2J,OAAO6B,MAApB;AACD;;AAED,UAAK7B,OAAO0B,OAAP,GAAiB1B,OAAO+B,MAAzB,GAAmC,CAAvC,EAA0C;AACxCtM,cAAMqN,MAAN,GAAezF,eAAe2C,OAAO+B,MAArC;AACD,OAFD,MAEO;AACLtM,cAAMW,GAAN,GAAY4J,OAAO+B,MAAnB;AACD;;AAED,aACE;AACE,mBAAU,UADZ;AAEE,eAAOtM;AAFT,QADF;AAMD;AAjTH;AAAA;AAAA,6BAmTW;AAAA,UACEsB,aADF,GACoB,KAAKnB,KADzB,CACEmB,aADF;;;AAGP,aACE;AAAA;AAAA;AACE,eAAI,QADN;AAEE,qBAAU,0BAFZ;AAGE,mBAAS,KAAKgM,OAAL,CAAavC,IAAb,CAAkB,IAAlB,CAHX;AAIE,uBAAa,KAAKwC,WAAL,CAAiBxC,IAAjB,CAAsB,IAAtB,CAJf;AAKE,uBAAa,KAAKyC,WAAL,CAAiBzC,IAAjB,CAAsB,IAAtB,CALf;AAME,qBAAW,KAAK0C,SAAL,CAAe1C,IAAf,CAAoB,IAApB;AANb;AAQG,aAAK2C,qBAAL,EARH;AASE,oEAAC,yEAAD,IAAiB,eAAepM,aAAhC,GATF;AAUG,aAAKqM,cAAL;AAVH,OADF;AAcD;AApUH;;AAAA;AAAA,EAAmC,6CAAAlN,CAAMiD,SAAzC,E;;;;;;;;;;;;;;;;ACPA;;AAEA,IAAakK,gBAAb;AAAA;;AACE,4BAAYxB,MAAZ,EAAoBE,MAApB,EAA4B1I,YAA5B,EAA0C;AAAA;;AAAA,oIAClCwI,MADkC,EAC1BE,MAD0B;;AAExC,UAAKE,cAAL,GAAsB5I,aAAac,UAAb,EAAtB;AACA,UAAK+H,cAAL,GAAsB7I,aAAae,UAAb,EAAtB;AAHwC;AAIzC;;AALH;AAAA,EAAsC,+DAAtC,E;;;;;;;;;;;;;;;;ACFA;;AAEA,IAAakJ,eAAb;AAAA;;AACE,2BAAYzB,MAAZ,EAAoBE,MAApB,EAA4BhL,aAA5B,EAA2C;AAAA;;AAAA,kIACnC8K,MADmC,EAC3BE,MAD2B;;AAEzC,UAAKwB,KAAL,GAAa,KAAb;AACAxM,kBAAcsK,qBAAd,CAAoCtK,cAAcuC,eAAd,GAAgC1B,gBAAhC,EAApC;AACA,UAAK+J,eAAL,GAAuB5K,cAAcuC,eAAd,GAAgC1B,gBAAhC,GAAmDtE,GAAnD,CAAuD;AAAA,aAAS;AACrF0F,eAAOwK,IAD8E;AAErF5B,kBAAU4B,KAAK3Q,CAFsE;AAGrFiP,kBAAU0B,KAAK1Q;AAHsE,OAAT;AAAA,KAAvD,CAAvB;AAJyC;AAS1C;;AAVH;AAAA,EAAqC,+DAArC,E;;;;;;;;;;;;;;ACFA;;AAEA,IAAa2Q,UAAb;AACE,wBAAc;AAAA;;AACZ,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKrR,EAAL,GAAU,yDAAAkG,CAAQoL,GAAR,EAAV;AACD;;AAJH;AAAA;AAAA,4BAMU;AACN,aAAO,KAAKtR,EAAZ;AACD;AARH;AAAA;AAAA,qCAUmB;AACf,WAAKqR,SAAL,GAAiB,EAAjB;AACD;AAZH;AAAA;AAAA,gCAccE,IAdd,EAcoB;AAChB,WAAKvR,EAAL,GAAUuR,KAAKvR,EAAf;AACD;AAhBH;AAAA;AAAA,gCAkBc;AACV,aAAO;AACLA,YAAI,KAAKA;AADJ,OAAP;AAGD;AAtBH;AAAA;AAAA,sCAwBoBwR,EAxBpB,EAwBwB;AACpB,WAAK,IAAM5O,GAAX,IAAkB,KAAKyO,SAAvB,EAAkC;AAChCG,WAAG,KAAKH,SAAL,CAAezO,GAAf,CAAH;AACD;AACF;AA5BH;AAAA;AAAA,mCA8BiB1C,QA9BjB,EA8B2B;AACvB,UAAI,KAAKmR,SAAL,CAAenR,QAAf,CAAJ,EAA8B;AAC5B,eAAO,KAAKmR,SAAL,CAAenR,QAAf,CAAP;AACA,eAAO,IAAP;AACD;AACD,aAAO,KAAP;AACD;AApCH;AAAA;AAAA,gCAsCcA,QAtCd,EAsCwB;AACpB,UAAMuR,MAAM,yDAAAvL,CAAQoL,GAAR,EAAZ;AACA,WAAKD,SAAL,CAAeI,GAAf,IAAsBvR,QAAtB;AACA,aAAOuR,GAAP;AACD;AA1CH;;AAAA;AAAA,I;;;;;;;;;;;;;;;;;;ACFA;;AAEA,IAAaC,eAAb;AAAA;;AACE,2BAAYlC,MAAZ,EAAoBE,MAApB,EAA4B;AAAA;;AAAA,kIACpBF,MADoB,EACZE,MADY;;AAE1B,UAAKN,OAAL,GAAeI,MAAf;AACA,UAAKH,OAAL,GAAeK,MAAf;AAH0B;AAI3B;;AALH;AAAA;AAAA,oCAOkBlP,CAPlB,EAOqBC,CAPrB,EAOwBuG,YAPxB,EAOsC;AAAA,UAC1BwI,MAD0B,GACW,IADX,CAC1BA,MAD0B;AAAA,UAClBJ,OADkB,GACW,IADX,CAClBA,OADkB;AAAA,UACTM,MADS,GACW,IADX,CACTA,MADS;AAAA,UACDL,OADC,GACW,IADX,CACDA,OADC;;AAElC,UAAMsC,IAAI3K,aAAaa,YAAb,KAA8B,GAAxC;AACA,UAAM+J,MAAM,CAACpR,IAAIwG,aAAac,UAAb,EAAL,IAAkC6J,CAA9C;AACA,UAAME,MAAM,CAACpR,IAAIuG,aAAae,UAAb,EAAL,IAAkC4J,CAA9C;;AAEA,aACE,CAAEvC,UAAUI,MAAX,GAAqBoC,MAAMpC,MAA3B,GAAoCoC,MAAMpC,MAA3C,MACEJ,UAAUI,MAAX,GAAqBoC,MAAMxC,OAA3B,GAAqCwC,MAAMxC,OAD5C,MAEEC,UAAUK,MAAX,GAAqBmC,MAAMnC,MAA3B,GAAoCmC,MAAMnC,MAF3C,MAGEL,UAAUK,MAAX,GAAqBmC,MAAMxC,OAA3B,GAAqCwC,MAAMxC,OAH5C,CADF;AAMD;AAnBH;;AAAA;AAAA,EAAqC,+DAArC,E;;;;;;;;;;;;;;ACFA;AACA;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA,wCAAwC,gBAAgB;AACxD,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,YAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACjDA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;;ACrPA;AACA;;;AAGA;AACA,4BAA6B,cAAc,eAAe,EAAE,uBAAuB,gBAAgB,iBAAiB,wBAAwB,kBAAkB,EAAE,gBAAgB,yBAAyB,EAAE,kBAAkB,mBAAmB,iC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","file":"demo3/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 226);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e7fd6edc5d5b8406a976","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0 1 2 3","import _ from 'lodash';\nimport { BaseEntity } from './BaseEntity';\n\nexport class BaseModel extends BaseEntity {\n  constructor() {\n    super();\n    this.selected = false;\n  }\n\n  deSerialize(ob) {\n    super.deSerialize(ob);\n    this.selected = ob.selected;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      _class: this.constructor.name,\n      selected: this.selected\n    };\n  }\n\n  getID() {\n    return this.id;\n  }\n\n  isSelected() {\n    return this.selected;\n  }\n\n  setSelected(selected) {\n    this.selected = selected;\n\n    this.itterateListeners(listener => {\n      if(listener.selectionChanged) {\n        listener.selectionChanged();\n      }\n    });\n  }\n\n  remove() {\n    this.itterateListeners(listener => {\n      if(listener.entityRemoved) {\n        listener.entityRemoved();\n      }\n    });\n  }\n}\n\nexport class PointModel extends BaseModel {\n  constructor(link, points) {\n    super();\n    this.x = points.x;\n    this.y = points.y;\n    this.link = link;\n  }\n\n  deSerialize(ob) {\n    super.deSerialize(ob);\n    this.x = ob.x;\n    this.y = ob.y;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      x: this.x,\n      y: this.y\n    };\n  }\n\n  remove() {\n    super.remove();\n\n    // Clear references\n    if (this.link) {\n      this.link.removePoint(this);\n    }\n  }\n\n  updateLocation(points) {\n    this.x = points.x;\n    this.y = points.y;\n  }\n\n  getX() {\n    return this.x;\n  }\n\n  getY() {\n    return this.y;\n  }\n\n  getLink() {\n    return this.link;\n  }\n}\n\nexport class LinkModel extends BaseModel {\n  constructor() {\n    super();\n    this.linkType = 'default';\n    this.points = [\n      new PointModel(this,{x: 0,y: 0}),\n      new PointModel(this,{x: 0,y: 0}),\n    ];\n    this.extras = {};\n    this.sourcePort = null;\n    this.targetPort = null;\n  }\n\n  deSerialize(ob) {\n    super.deSerialize(ob);\n    this.linkType = ob.type;\n    this.points = ob.points.map(point => {\n      var p = new PointModel(this, {x: point.x,y:point.y});\n      p.deSerialize(point);\n      return p;\n    });\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      type: this.linkType,\n      source: this.sourcePort ? this.sourcePort.getParent().id:null,\n      sourcePort: this.sourcePort ? this.sourcePort.id:null,\n      target: this.targetPort ? this.targetPort.getParent().id:null,\n      targetPort: this.targetPort ? this.targetPort.id:null,\n      points: this.points.map(point => point.serialize()),\n      extras: this.extras\n    };\n  }\n\n  remove() {\n    super.remove();\n    if (this.sourcePort) {\n      this.sourcePort.removeLink(this);\n    }\n    if (this.targetPort) {\n      this.targetPort.removeLink(this);\n    }\n  }\n\n  isLastPoint(point) {\n    return this.getPointIndex(point) === this.points.length-1;\n  }\n\n  getPointIndex(point) {\n    return this.points.indexOf(point);\n  }\n\n  getPointModel(id) {\n    for (let i = 0; i < this.points.length; i++) {\n      if (this.points[i].id === id) {\n        return this.points[i];\n      }\n    }\n    return null;\n  }\n\n  getFirstPoint() {\n    return this.points[0];\n  }\n\n  getLastPoint() {\n    return this.points[this.points.length - 1];\n  }\n\n  setSourcePort(port) {\n    port.addLink(this);\n    this.sourcePort = port;\n  }\n\n  getSourcePort() {\n    return this.sourcePort;\n  }\n\n  getTargetPort() {\n    return this.targetPort;\n  }\n\n  setTargetPort(port) {\n    port.addLink(this);\n    this.targetPort = port;\n  }\n\n  getPoints() {\n    return this.points;\n  }\n\n  setPoints(points) {\n    this.points = points;\n  }\n\n  removePoint(pointModel) {\n    this.points.splice(this.getPointIndex(pointModel), 1);\n  }\n\n  addPoint(pointModel, index = 1) {\n    this.points.splice(index, 0, pointModel);\n  }\n\n  getType() {\n    return this.linkType;\n  }\n}\n\nexport class PortModel extends BaseModel {\n  constructor(name) {\n    super();\n    this.name = name;\n    this.links = {};\n    this.parentNode = null;\n  }\n\n  deSerialize(ob) {\n    super.deSerialize(ob);\n    this.name = ob.name;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      name: this.name,\n      parentNode: this.parentNode.id,\n      links: _.map(this.links, link => link.id)\n    };\n  }\n\n  getName() {\n    return this.name;\n  }\n\n  getParent() {\n    return this.parentNode;\n  }\n\n  setParentNode(node) {\n    this.parentNode = node;\n  }\n\n  removeLink(link) {\n    delete this.links[link.getID()];\n  }\n\n  addLink(link) {\n    this.links[link.getID()] = link;\n  }\n\n  getLinks() {\n    return this.links;\n  }\n}\n\nexport class NodeModel extends BaseModel {\n  constructor(nodeType = 'default') {\n    super();\n    this.nodeType = nodeType;\n    this.x = 0;\n    this.y = 0;\n    this.extras = {};\n    this.ports = {};\n  }\n\n  deSerialize(ob) {\n    super.deSerialize(ob);\n    this.nodeType = ob.type;\n    this.x = ob.x;\n    this.y = ob.y;\n    this.extras = ob.extras;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      type: this.nodeType,\n      x: this.x,\n      y: this.y,\n      extras: this.extras,\n      ports: _.map(this.ports, port => port.serialize())\n    };\n  }\n\n  remove() {\n    super.remove();\n    for (const key in this.ports) {\n      this.ports[key].getLinks().forEach(link => link.remove());\n    }\n  }\n\n  getPortFromID(id) {\n    for (const key in this.ports) {\n      if (this.ports[key].id === id) {\n        return this.ports[key];\n      }\n    }\n    return null;\n  }\n\n  getPort(name) {\n    return this.ports[name];\n  }\n\n  getPorts() {\n    return this.ports;\n  }\n\n  removePort(port) {\n    // Clear the parent node reference\n    if(this.ports[port.name]) {\n      this.ports[port.name].setParentNode(null);\n      delete this.ports[port.name];\n    }\n  }\n\n  addPort(port) {\n    port.setParentNode(this);\n    this.ports[port.name] = port;\n    return port;\n  }\n\n  getType() {\n    return this.nodeType;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Common.js","import * as React from \"react\";\nimport {DiamondNodeModel} from \"./DiamondNodeModel\";\nimport * as SRD from \"../../src/main\";\n\nexport class DiamonNodeWidget extends React.Component  {\n\tstatic defaultProps = {\n\t\tsize:150,\n\t\tnode: null\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\tReact.DOM.div({className: \"diamond-node\", style: {position: 'relative', width: this.props.size, height: this.props.size}},\n\t\t\t\tReact.DOM.svg({\n\t\t\t\t\twidth:this.props.size,height: this.props.size,dangerouslySetInnerHTML: {__html:`\n\t\t\t\t\t\t<g id=\"Layer_1\">\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"Layer_2\">\n\t\t\t\t\t\t\t<polygon fill=\"cyan\" stroke=\"#000000\" stroke-width=\"3\" stroke-miterlimit=\"10\" points=\"10,`+(this.props.size/2)+` `+(this.props.size/2)+`,10 `+(this.props.size-10)+`,`+(this.props.size/2)+` `+(this.props.size/2)+`,`+(this.props.size-10)+` \"/>\n\t\t\t\t\t\t</g>\n\t\t\t\t`}}),\n\t\t\t\t\n\t\t\t\t//left node\n\t\t\t\tReact.DOM.div({style: {position: 'absolute', zIndex:10,top:this.props.size/2 - 5}},\n\t\t\t\t\tReact.createElement(SRD.PortWidget,{name: 'left', node: this.props.node})\n\t\t\t\t),\n\t\t\t\t\n\t\t\t\t//top node\n\t\t\t\tReact.DOM.div({style: {position: 'absolute', zIndex:10,left:this.props.size/2-8}},\n\t\t\t\t\tReact.createElement(SRD.PortWidget,{name: 'top', node: this.props.node})\n\t\t\t\t),\n\t\t\t\t\n\t\t\t\t//right\n\t\t\t\tReact.DOM.div({style: {position: 'absolute', zIndex:10,left:this.props.size-10,top:this.props.size/2}},\n\t\t\t\t\tReact.createElement(SRD.PortWidget,{name: 'right', node: this.props.node})\n\t\t\t\t),\n\t\t\t\t\n\t\t\t\t//bottom\n\t\t\t\tReact.DOM.div({style: {position: 'absolute', zIndex:10,left :this.props.size/2 - 8,top:this.props.size-10}},\n\t\t\t\t\tReact.createElement(SRD.PortWidget,{name: 'bottom', node: this.props.node})\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n}\n\nexport var DiamonNodeWidgetFactory = React.createFactory(DiamonNodeWidget);\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondNodeWidget.js","import _ from 'lodash';\nimport { LinkModel, NodeModel } from './Common';\nimport { BaseEntity } from './BaseEntity';\n\nexport class DiagramModel extends BaseEntity {\n  constructor(){\n    super();\n    this.links = {};\n    this.nodes = {};\n    this.offsetX = 0;\n    this.offsetY = 0;\n    this.zoom = 100;\n    this.rendered = false;\n  }\n\n  deSerializeDiagram(object, diagramEngine) {\n    this.deSerialize(object);\n    this.offsetX = object.offsetX;\n    this.offsetY = object.offsetY;\n    this.zoom = object.zoom;\n\n    // Deserialize nodes\n    _.forEach(object.nodes, node => {\n      let nodeOb = diagramEngine.getInstanceFactory(node._class).getInstance();\n      nodeOb.deSerialize(node);\n\n      // Deserialize ports\n      _.forEach(node.ports, port => {\n        let portOb = diagramEngine.getInstanceFactory(port._class).getInstance();\n        portOb.deSerialize(port);\n        nodeOb.addPort(portOb);\n      });\n\n      this.addNode(nodeOb);\n    });\n\n    // Attach ports\n    _.forEach(object.links, link  => {\n      let linkOb = diagramEngine.getInstanceFactory(link._class).getInstance();\n      linkOb.deSerialize(link);\n\n      if (link.target) {\n        linkOb.setTargetPort(this.getNode(link.target).getPortFromID(link.targetPort));\n      }\n\n      if (link.source) {\n        linkOb.setSourcePort(this.getNode(link.source).getPortFromID(link.sourcePort));\n      }\n\n      this.addLink(linkOb);\n    });\n  }\n\n  serializeDiagram() {\n    return {\n      ...this.serialize(),\n      offsetX: this.offsetX,\n      offsetY: this.offsetY,\n      zoom: this.zoom,\n      links: _.map(this.links, link => link.serialize()),\n      nodes: _.map(this.nodes, link => link.serialize())\n    };\n  }\n\n  clearSelection(ignore) {\n    _.forEach(this.getSelectedItems(), element => {\n      if (ignore && ignore.getID() === element.getID()) {\n        return;\n      }\n      element.setSelected(false); //TODO dont fire the listener\n    });\n  }\n\n  getSelectedItems() {\n    return [\n      // Nodes\n      ..._.filter(this.nodes, node => node.isSelected()),\n      // Points\n      ..._.filter(_.flatMap(this.links, node => node.points), port => port.isSelected()),\n      // Links\n      ..._.filter(this.links, link => link.isSelected())\n    ];\n  }\n\n  setZoomLevel(zoom) {\n    this.zoom = zoom;\n    this.itterateListeners((listener) => {\n      listener.controlsUpdated();\n    });\n  }\n\n  setOffset(offsetX, offsetY) {\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    this.itterateListeners((listener) => {\n      listener.controlsUpdated();\n    });\n  }\n\n  setOffsetX(offsetX) {\n    this.offsetX = offsetX;\n    this.itterateListeners((listener) => {\n      listener.controlsUpdated();\n    });\n  }\n\n  setOffsetY(offsetY) {\n    this.offsetX = offsetY;\n    this.itterateListeners((listener) => {\n      listener.controlsUpdated();\n    });\n  }\n\n  getOffsetY() {\n    return this.offsetY;\n  }\n\n  getOffsetX() {\n    return this.offsetX;\n  }\n\n  getZoomLevel() {\n    return this.zoom;\n  }\n\n  getNode(node) {\n    if (node instanceof NodeModel) {\n      return node;\n    }\n    if (!this.nodes[node]) {\n      return null;\n    }\n    return this.nodes[node];\n  }\n\n  getLink(link) {\n    if (link instanceof LinkModel) {\n      return link;\n    }\n    if(!this.links[link]) {\n      return null;\n    }\n    return this.links[link];\n  }\n\n  addLink(link) {\n    link.addListener({\n      entityRemoved: () => {\n        this.removeLink(link);\n      }\n    });\n    this.links[link.getID()] = link;\n    this.itterateListeners((listener) => {\n      listener.linksUpdated();\n    });\n    return link;\n  }\n\n  addNode(node) {\n    node.addListener({\n      entityRemoved: () => {\n        this.removeNode(node);\n      }\n    });\n    this.nodes[node.getID()] = node;\n    this.itterateListeners((listener) => {\n      listener.nodesUpdated();\n    });\n    return node;\n  }\n\n  removeLink(link) {\n    if (link instanceof LinkModel){\n      delete this.links[link.getID()];\n      this.itterateListeners((listener) => {\n        listener.linksUpdated();\n      });\n      return;\n    }\n    delete this.links['' + link];\n    this.itterateListeners((listener) => {\n      listener.linksUpdated();\n    });\n  }\n\n  removeNode(node) {\n    if (node instanceof NodeModel) {\n      delete this.nodes[node.getID()];\n      this.itterateListeners((listener) => {\n        listener.nodesUpdated();\n      });\n      return;\n    }\n\n    delete this.nodes['' + node];\n    this.itterateListeners((listener) => {\n      listener.nodesUpdated();\n    });\n  }\n\n  getLinks() {\n    return this.links;\n  }\n\n  getNodes() {\n    return this.nodes;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/DiagramModel.js","export class Toolkit {\n  /**\n   * Generats a unique ID (thanks Stack overflow :3)\n   * @returns {String}\n   */\n  static UID() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Toolkit.js","import React from 'react';\nimport { PortWidget } from '../widgets/PortWidget';\n\nexport class DefaultPortLabel extends React.Component {\n  static defaultProps = {\n    in: true,\n    label: 'port'\n  };\n\n  render() {\n    const { model } = this.props;\n    const port = (\n      <PortWidget name={model.name} node={model.getParent()} />\n    );\n    const label = (\n      <div className='name'>\n        {model.label}\n      </div>\n    );\n    \n    return (\n      <div className={(model.in ? 'in' : 'out') + '-port'}>\n        {model.in ? port : label}\n        {model.in ? label : port}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultPortLabelWidget.js","import React from 'react';\nimport _ from 'lodash';\nimport { LinkWidget } from './LinkWidget';\n\nexport class LinkLayerWidget extends React.Component {\n  generateLinks() {\n    const diagramModel = this.props.diagramEngine.getDiagramModel();\n\n    return _.map(diagramModel.getLinks(), link => {\n      // TODO: just improve this vastly x_x\n      if (link.sourcePort !== null) {\n        try{\n          //generate a point\n          link.points[0].updateLocation(this.props.diagramEngine.getPortCenter(link.sourcePort));\n        }\n        // Remove the link because its problematic (TODO implement this rather at an engine level)\n        catch(ex) {\n          diagramModel.removeLink(link);\n          return;\n        }\n      }\n      if (link.targetPort !== null) {\n        try{\n          _.last(link.points).updateLocation(this.props.diagramEngine.getPortCenter(link.targetPort));\n        }\n        //remove the link because its problematic (TODO implement this rather at an engine level)\n        catch(ex){\n          diagramModel.removeLink(link);\n          return;\n        }\n      }\n\n      // Generate the links\n      const generatedLink = this.props.diagramEngine.generateWidgetForLink(link);\n      if(!generatedLink){\n        console.log(\"no link generated for type: \" + link.getType());\n        return null;\n      }\n\n      const props = {\n        key: link.getID(),\n        link: link,\n        diagramEngine: this.props.diagramEngine,\n      };\n\n      return (\n        <LinkWidget {...props}>\n          {React.cloneElement(generatedLink, { pointAdded: this.props.pointAdded })}\n        </LinkWidget>\n      );\n    });\n  }\n\n  render() {\n    const diagramModel = this.props.diagramEngine.getDiagramModel();\n    const zoom = diagramModel.getZoomLevel();\n    const offsetX = diagramModel.getOffsetX();\n    const offsetY = diagramModel.getOffsetY();\n    const svgStyle = {\n      transform: `scale(${zoom / 100.0}) translate(${offsetX}px, ${offsetY}px)`,\n      width: '100%',\n      height: '100%'\n    };\n\n    return (\n      <svg style={svgStyle}>\n        {this.generateLinks()}\n      </svg>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/LinkLayerWidget.js","import React from 'react';\n\nexport class LinkWidget extends React.Component {\n  shouldComponentUpdate(){\n    return this.props.diagramEngine.canEntityRepaint(this.props.link);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/LinkWidget.js","import React from 'react';\nimport _ from 'lodash';\nimport { NodeWidget } from './NodeWidget';\n\nexport class NodeLayerWidget extends React.Component {\n  render() {\n    const { diagramEngine } = this.props;\n    const diagramModel = diagramEngine.getDiagramModel();\n    const props = {\n      className:'node-view',\n      style:{\n        transform: 'scale(' + diagramModel.getZoomLevel() / 100.0 + ') translate(' + diagramModel.getOffsetX()+'px,'+diagramModel.getOffsetY()+'px)',\n        width: '100%',\n        height: '100%'\n      }\n    };\n    \n    // Create children\n    const children = _.map(diagramModel.getNodes(), node => {\n      return (\n        <NodeWidget key={node.id} node={node} diagramEngine={diagramEngine}>\n          {this.props.diagramEngine.generateWidgetForNode(node)}\n        </NodeWidget>\n      );\n    });\n    \n    return (\n      <div {...props}>\n        {children}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/NodeLayerWidget.js","import React from 'react';\n\nexport class NodeWidget extends React.Component {\n  shouldComponentUpdate(){\n    return this.props.diagramEngine.canEntityRepaint(this.props.node);\n  }\n\n  render() {\n    const { node, children } = this.props;\n    const props = {\n      'data-nodeid': node.id,\n      className: 'node' + (this.props.node.isSelected() ? ' selected' : ''),\n      style:{\n        top: this.props.node.y,\n        left: this.props.node.x,\n      }\n    };\n    \n    return (\n      <div {...props}>\n        {children}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/NodeWidget.js","import React from 'react';\n\nexport class PortWidget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: false\n    };\n  }\n\n  render() {\n    const { name, node } = this.props;\n    return (\n      <div\n        className={'port' + (this.state.selected ? ' selected' : '')}\n        onMouseEnter={() => this.setState({ selected: true })}\n        onMouseLeave={() => this.setState({ selected: false })}\n        data-name={name}\n        data-nodeid={node.getID()}\n      />\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/PortWidget.js","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 19\n// module chunks = 0 1 2 3","module.exports = _;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"_\"\n// module id = 2\n// module chunks = 0 1 2 3","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./test.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./test.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./test.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/test.scss\n// module id = 20\n// module chunks = 1 2 3","import _ from 'lodash';\nimport { NodeModel, PointModel } from './Common';\nimport { BaseEntity } from './BaseEntity';\nimport { DiagramModel } from './DiagramModel';\n\n/**\n * Passed as a parameter to the DiagramWidget\n */\nexport class DiagramEngine extends BaseEntity {\n  constructor() {\n    super();\n    this.diagramModel = new DiagramModel();\n    this.nodeFactories = {};\n    this.linkFactories = {};\n    this.instanceFactories = {};\n    this.canvas = null;\n    this.paintableWidgets = null;\n    this.forceUpdate = () => {};\n  }\n\n  clearRepaintEntities() {\n    this.paintableWidgets = null;\n  }\n\n  enableRepaintEntities(entities) {\n    this.paintableWidgets = {};\n    entities.forEach((entity) => {\n\n      // If a node is requested to repaint, add all of its links\n      if (entity instanceof NodeModel) {\n        _.forEach(entity.getPorts(), port => {\n          _.forEach(port.getLinks(), link => {\n            this.paintableWidgets[link.getID()] = true;\n          });\n        });\n      }\n\n      if (entity instanceof PointModel) {\n        this.paintableWidgets[entity.getLink().getID()] = true;\n      }\n\n      this.paintableWidgets[entity.getID()] = true;\n    });\n  }\n\n  canEntityRepaint(baseModel) {\n    // No rules applied, allow repaint\n    if (this.paintableWidgets === null) {\n      return true;\n    }\n\n    return this.paintableWidgets[baseModel.getID()] !== undefined;\n  }\n\n  setCanvas(canvas) {\n    this.canvas = canvas;\n  }\n\n  setDiagramModel(model) {\n    this.diagramModel = model;\n  }\n\n  setForceUpdate(forceUpdate) {\n    this.forceUpdate = forceUpdate;\n  }\n\n  getDiagramModel() {\n    return this.diagramModel;\n  }\n\n  getNodeFactories() {\n    return this.nodeFactories;\n  }\n\n  getLinkFactories() {\n    return this.linkFactories;\n  }\n\n  getInstanceFactory(className) {\n    return this.instanceFactories[className];\n  }\n\n  registerInstanceFactory(factory) {\n    this.instanceFactories[factory.getName()] = factory;\n  }\n\n  registerNodeFactory(factory) {\n    this.nodeFactories[factory.getType()] = factory;\n    this.itterateListeners((listener) => {\n      listener.nodeFactoriesUpdated();\n    });\n  }\n\n  registerLinkFactory(factory) {\n    this.linkFactories[factory.getType()] = factory;\n    this.itterateListeners((listener) => {\n      listener.linkFactoriesUpdated();\n    });\n  }\n\n  getFactoryForNode(node) {\n    if (this.nodeFactories[node.getType()]){\n      return this.nodeFactories[node.getType()];\n    }\n    console.log(`Cannot find widget factory for node of type: [${node.getType()}]`);\n    return null;\n  }\n\n  getFactoryForLink(link) {\n    if (this.linkFactories[link.getType()]) {\n      return this.linkFactories[link.getType()];\n    }\n    console.log(`Cannot find widget factory for link of type: [${link.getType()}]`);\n    return null;\n  }\n\n  generateWidgetForLink(link) {\n    const linkFactory = this.getFactoryForLink(link);\n    if(!linkFactory) {\n      throw `Cannot find link factory for link: ${link.getType()}`;\n    }\n    return linkFactory.generateReactWidget(this, link);\n  }\n\n  generateWidgetForNode(node) {\n    const nodeFactory = this.getFactoryForNode(node);\n    if(!nodeFactory) {\n      throw `Cannot find widget factory for node: ${node.getType()}`;\n    }\n    return nodeFactory.generateReactWidget(this, node);\n  }\n\n  getRelativeMousePoint(event) {\n    const point = this.getRelativePoint(event.pageX, event.pageY);\n    return {\n      x: (point.x / (this.diagramModel.getZoomLevel() / 100.0)) - this.diagramModel.getOffsetX(),\n      y: (point.y / (this.diagramModel.getZoomLevel() / 100.0)) - this.diagramModel.getOffsetY()\n    };\n  }\n\n  getRelativePoint(x,y) {\n    const canvasRect = this.canvas.getBoundingClientRect();\n    return { x: x-canvasRect.left, y: y-canvasRect.top };\n  }\n\n  getNodePortElement(port) {\n    const selector = this.canvas.querySelector(\n      `.port[data-name=\"${port.getName()}\"][data-nodeid=\"${port.getParent().getID()}\"]`\n    );\n    if (selector === null) {\n      throw `Cannot find Node Port element with nodeID: [${port.getParent().getID()}] and name: [${port.getName()}]`;\n    }\n    return selector;\n  }\n\n  getPortCenter(port) {\n    const sourceElement = this.getNodePortElement(port);\n    const sourceRect = sourceElement.getBoundingClientRect();\n    const rel = this.getRelativePoint(sourceRect.left,sourceRect.top);\n    const x = (sourceElement.offsetWidth / 2) + rel.x / (this.diagramModel.getZoomLevel() / 100.0) -\n      this.diagramModel.getOffsetX();\n    const y = (sourceElement.offsetHeight/2) + rel.y / (this.diagramModel.getZoomLevel() / 100.0) -\n      this.diagramModel.getOffsetY();\n\n    return {\n      x,\n      y\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/DiagramEngine.js","import { LinkModel } from './Common';\nimport { AbstractInstanceFactory } from './AbstractInstanceFactory';\n\nexport class LinkInstanceFactory extends AbstractInstanceFactory {\n  constructor() {\n    super('LinkModel');\n  }\n  \n  getInstance() {\n    return new LinkModel();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/LinkInstanceFactory.js","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as RJD from '../../src/main';\nimport { DiamondNodeModel } from './DiamondNodeModel';\nimport { DiamondWidgetFactory } from './DiamondWidgetFactory';\nimport { DiamondNodeFactory, DiamondPortFactory } from './DiamondInstanceFactories';\nimport '../test.scss';\n\n/**\n *\n * Shows a much more complex way on how to use this library, by creating custom\n * node elements\n *\n */\nclass Demo3 extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Setup the diagram engine\n    this.engine = new RJD.DiagramEngine();\n    this.engine.registerNodeFactory(new RJD.DefaultNodeFactory());\n  \tthis.engine.registerLinkFactory(new RJD.DefaultLinkFactory());\n  \tthis.engine.registerNodeFactory(new DiamondWidgetFactory());\n\n  \t// Setup the diagram model\n  \tthis.model = new RJD.DiagramModel();\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.testSerialization();\n    }, 1000);\n  }\n\n  createNode(options) {\n    const { name, color, x, y } = options;\n    var node = new RJD.DefaultNodeModel(name, color);\n  \tnode.x = x;\n  \tnode.y = y;\n  \treturn node;\n  }\n\n  createPort(node, options) {\n    const { isInput, id, name } = options;\n    return node.addPort(new RJD.DefaultPortModel(isInput, id, name));\n  }\n\n  linkNodes(port1, port2) {\n    const link = new RJD.LinkModel();\n  \tlink.setSourcePort(port1);\n  \tlink.setTargetPort(port2);\n  \treturn link;\n  }\n\n  testSerialization() {\n    const { engine, model } = this;\n\n    // We need this to help the system know what models to create form the JSON\n  \tengine.registerInstanceFactory(new RJD.DefaultNodeInstanceFactory());\n  \tengine.registerInstanceFactory(new RJD.DefaultPortInstanceFactory());\n  \tengine.registerInstanceFactory(new RJD.LinkInstanceFactory());\n  \tengine.registerInstanceFactory(new DiamondNodeFactory());\n  \tengine.registerInstanceFactory(new DiamondPortFactory());\n\n  \t// Serialize the model\n  \tconst str = JSON.stringify(model.serializeDiagram());\n  \tconsole.log(str);\n\n  \t// Deserialize the model\n  \tconst model2 = new RJD.DiagramModel();\n  \tmodel2.deSerializeDiagram(JSON.parse(str),engine);\n  \tengine.setDiagramModel(model2);\n  \tconsole.log(model2);\n  }\n\n  render() {\n    const { engine, model } = this;\n\n    // Create first node and port\n    const node1 = this.createNode({\n      name: 'Node 1',\n      color: 'rgb(0, 192, 255)',\n      x: 100,\n      y: 150\n    });\n    const port1 = this.createPort(node1, {\n      isInput: false,\n      id: 'out-1',\n      name: 'Out'\n    });\n\n    // Create the diamond node\n    const diamondNode = new DiamondNodeModel();\n    diamondNode.x = 400;\n  \tdiamondNode.y = 100;\n\n    // Create second node and port\n    const node2 = this.createNode({\n      name: 'Node 2',\n      color: 'red',\n      x: 800,\n      y: 150\n    });\n    const port2 = this.createPort(node2, {\n      isInput: true,\n      id: 'in-1',\n      name: 'In'\n    });\n\n  \t// Add the nodes and link to the model\n  \tmodel.addNode(node1);\n  \tmodel.addNode(diamondNode);\n  \tmodel.addNode(node2);\n  \tmodel.addLink(this.linkNodes(port1, diamondNode.ports['left']));\n  \tmodel.addLink(this.linkNodes(diamondNode.ports['right'], port2));\n\n  \t// Load the model into the diagram engine\n  \tengine.setDiagramModel(model);\n\n    // Render the canvas\n  \treturn <RJD.DiagramWidget diagramEngine={engine} />;\n  }\n}\n\nwindow.onload = () => {\n  ReactDOM.render(<Demo3 />, document.getElementById('root'));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/index.js","import React from 'react';\nimport { LinkWidgetFactory } from '../WidgetFactories';\nimport { DefaultLinkWidget } from './DefaultLinkWidget';\n\nexport class DefaultLinkFactory extends LinkWidgetFactory {\n  constructor(){\n    super('default');\n  }\n\n  generateReactWidget(diagramEngine, link) {\n    return (\n      <DefaultLinkWidget link={link} diagramEngine={diagramEngine} />\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultLinkFactory.js","import React from 'react';\nimport { NodeWidgetFactory } from '../WidgetFactories';\nimport { DefaultNodeWidget } from './DefaultNodeWidget';\n\nexport class DefaultNodeFactory extends NodeWidgetFactory {\n  constructor(){\n    super('default');\n  }\n\n  generateReactWidget(diagramEngine, node) {\n    return (\n      <DefaultNodeWidget node={node} diagramEngine={diagramEngine} />\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultNodeFactory.js","import _ from 'lodash';\nimport { NodeModel } from '../Common';\nimport { AbstractInstanceFactory } from '../AbstractInstanceFactory';\n\nexport class DefaultNodeInstanceFactory extends AbstractInstanceFactory {\n  constructor(){\n    super('DefaultNodeModel');\n  }\n\n  getInstance(){\n    return new DefaultNodeModel();\n  }\n}\n\nexport class DefaultNodeModel extends NodeModel {\n  constructor(name = 'Untitled', color = 'rgb(0,192,255)') {\n    super('default');\n    this.name = name;\n    this.color = color;\n  }\n\n  deSerialize(object) {\n    super.deSerialize(object);\n    this.name = object.name;\n    this.color = object.color;\n  }\n\n  serialize() {\n    return _.merge(super.serialize(), {\n      name: this.name,\n      color: this.color,\n    });\n  }\n\n  getInPorts() {\n    return _.filter(this.ports,(portModel) => portModel.in);\n  }\n\n  getOutPorts() {\n    return _.filter(this.ports,(portModel) => !portModel.in);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultNodeModel.js","import { PortModel } from '../Common';\nimport { AbstractInstanceFactory } from '../AbstractInstanceFactory';\n\nexport class DefaultPortInstanceFactory extends AbstractInstanceFactory {\n  constructor(){\n    super('DefaultPortModel');\n  }\n\n  getInstance(){\n    return new DefaultPortModel(true, 'unknown');\n  }\n}\n\nexport class DefaultPortModel extends PortModel {\n  constructor(isInput, name, label = null) {\n    super(name);\n    this.in = isInput;\n    this.label = label || name;\n  }\n\n  deSerialize(object) {\n    super.deSerialize(object);\n    this.in = object.in;\n    this.label = object.label;\n  }\n\n  serialize() {\n    return {\n      ...super.serialize(),\n      in: this.in,\n      label: this.label\n    };\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultPortModel.js","import React from 'react';\nimport _ from 'lodash';\nimport { PointModel, NodeModel, LinkModel, PortModel } from '../Common';\nimport { SelectingAction, MoveCanvasAction, MoveItemsAction } from './actions';\nimport { LinkLayerWidget } from './LinkLayerWidget';\nimport { NodeLayerWidget } from './NodeLayerWidget';\n\nexport class DiagramWidget extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      action: null,\n      renderedNodes: false,\n      windowListener: null\n    };\n  }\n\n  componentWillUnmount(){\n    this.props.diagramEngine.setCanvas(null);\n    window.removeEventListener('keydown', this.state.windowListener);\n  }\n\n  componentWillUpdate(nextProps) {\n    if (this.props.diagramEngine.diagramModel.id !== nextProps.diagramEngine.diagramModel.id) {\n      this.setState({ renderedNodes: false });\n      nextProps.diagramEngine.diagramModel.rendered = true;\n    }\n    if (!nextProps.diagramEngine.diagramModel.rendered) {\n      this.setState({ renderedNodes: false });\n      nextProps.diagramEngine.diagramModel.rendered = true;\n    }\n  }\n\n  componentDidUpdate() {\n    if (!this.state.renderedNodes) {\n      this.setState({\n        renderedNodes: true\n      });\n    }\n  }\n\n  componentDidMount() {\n    const { diagramEngine } = this.props;\n    diagramEngine.setCanvas(this.refs['canvas']);\n    diagramEngine.setForceUpdate(this.forceUpdate.bind(this));\n\n    // Add a keyboard listener\n    this.setState({\n      renderedNodes: true,\n      windowListener: window.addEventListener('keydown', event => {\n        // Delete all selected\n        if(event.keyCode === 46 || event.keyCode === 8) {\n          diagramEngine.getDiagramModel().getSelectedItems().forEach(element => {\n            element.remove();\n          });\n          this.forceUpdate();\n        }\n      })\n    });\n    window.focus();\n  }\n\n  /**\n   * Gets a model and element under the mouse cursor\n   */\n  getMouseElement(event) {\n    const { diagramModel } = this.props.diagramEngine;\n    const { target } = event;\n\n    // Look for a port\n    let element = target.closest('.port[data-name]');\n    if (element) {\n      const nodeElement = target.closest('.node[data-nodeid]');\n      return {\n        model: diagramModel.getNode(nodeElement.getAttribute('data-nodeid')).getPort(element.getAttribute('data-name')),\n        element\n      };\n    }\n\n    // Look for a point\n    element = target.closest('.point[data-id]');\n    if (element) {\n      return {\n        model: diagramModel.getLink(element.getAttribute('data-linkid')).getPointModel(element.getAttribute('data-id')),\n        element\n      };\n    }\n\n    // Look for a link\n    element = target.closest('[data-linkid]');\n    if (element) {\n      return {\n        model: diagramModel.getLink(element.getAttribute('data-linkid')),\n        element\n      };\n    }\n\n    // Look for a node\n    element = target.closest('.node[data-nodeid]');\n    if (element) {\n      return {\n        model: diagramModel.getNode(element.getAttribute('data-nodeid')),\n        element\n      };\n    }\n\n    return null;\n  }\n\n  onWheel(event) {\n    const  { diagramEngine } = this.props;\n    const diagramModel = diagramEngine.getDiagramModel();\n    event.preventDefault();\n    event.stopPropagation();\n    diagramModel.setZoomLevel(diagramModel.getZoomLevel() + (event.deltaY / 60));\n    diagramEngine.enableRepaintEntities([]);\n    this.forceUpdate();\n  }\n\n  onMouseMove(event) {\n    const  { diagramEngine } = this.props;\n    const { action } = this.state;\n    const diagramModel = diagramEngine.getDiagramModel();\n\n    // Select items so draw a bounding box\n    if (action instanceof SelectingAction) {\n      const relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n\n      _.forEach(diagramModel.getNodes(), node => {\n        if (action.containsElement(node.x, node.y, diagramModel)) {\n          node.setSelected(true);\n        }\n      });\n\n      _.forEach(diagramModel.getLinks(), link => {\n        let allSelected = true;\n        link.points.forEach(point => {\n          if (action.containsElement(point.x, point.y, diagramModel)) {\n            point.setSelected(true);\n          } else {\n            allSelected = false;\n          }\n        });\n\n        if (allSelected) {\n          link.setSelected(true);\n        }\n      });\n\n      action.mouseX2 = relative.x;\n      action.mouseY2 = relative.y;\n      this.setState({ action });\n      return;\n    } else if (action instanceof MoveItemsAction) {\n      // Translate the items on the canvas\n      action.selectionModels.forEach(model => {\n        if (model.model instanceof NodeModel || model.model instanceof PointModel) {\n          model.model.x = model.initialX + (\n            (event.pageX - this.state.action.mouseX) / (diagramModel.getZoomLevel() / 100)\n          );\n          model.model.y = model.initialY + (\n            (event.pageY - this.state.action.mouseY) / (diagramModel.getZoomLevel() / 100)\n          );\n        }\n      });\n      this.forceUpdate();\n    } else if (this.state.action instanceof MoveCanvasAction) {\n      // Translate the actual canvas\n      diagramModel.setOffset(\n        action.initialOffsetX + (\n          (event.pageX - this.state.action.mouseX) / (diagramModel.getZoomLevel() / 100)\n        ),\n        action.initialOffsetY + (\n          (event.pageY-this.state.action.mouseY) / (diagramModel.getZoomLevel() / 100)\n        )\n      );\n      this.forceUpdate();\n    }\n  }\n\n  onMouseDown(event) {\n    const  { diagramEngine } = this.props;\n    const diagramModel = diagramEngine.getDiagramModel();\n    const model = this.getMouseElement(event);\n\n    diagramEngine.clearRepaintEntities();\n\n    // Check if this is the canvas\n    if (model === null) {\n      // Check for a multiple selection\n      if (event.shiftKey) {\n        const relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n        this.setState({\n          action: new SelectingAction(\n            relative.x, relative.y\n          )\n        });\n      } else {\n        // This is a drag canvas event\n        const relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n        diagramModel.clearSelection();\n        this.setState({\n          action: new MoveCanvasAction(relative.x, relative.y, diagramModel)\n        });\n      }\n    } else if (model.model instanceof PortModel) {\n      // This is a port element, we want to drag a link\n      const relative = diagramEngine.getRelativeMousePoint(event);\n      const link = new LinkModel();\n      link.setSourcePort(model.model);\n\n      link.getFirstPoint().updateLocation(relative);\n      link.getLastPoint().updateLocation(relative);\n\n      diagramModel.clearSelection();\n      link.getLastPoint().setSelected(true);\n      diagramModel.addLink(link);\n\n      this.setState({\n        action: new MoveItemsAction(event.pageX, event.pageY, diagramEngine)\n      });\n    } else {\n      // It's some other element that needs to be moved\n      if (!event.shiftKey && !model.model.isSelected()) {\n        diagramModel.clearSelection();\n      }\n      model.model.setSelected(true);\n\n      this.setState({\n        action: new MoveItemsAction(event.pageX, event.pageY,diagramEngine)\n      });\n    }\n  }\n\n  onMouseUp(event) {\n    const  { diagramEngine } = this.props;\n\n    // Check if we going to connect a link to something\n    if (this.state.action instanceof MoveItemsAction) {\n      const element = this.getMouseElement(event);\n      if (element) {\n        this.state.action.selectionModels.forEach(model => {\n          // Only care about points connecting to things\n          if (!(model.model instanceof PointModel)) {\n            return;\n          }\n\n          if (element.model instanceof PortModel) {\n            model.model.getLink().setTargetPort(element.model);\n          }\n        });\n      }\n    }\n\n    diagramEngine.clearRepaintEntities();\n    this.setState({ action: null });\n  }\n\n  renderLinkLayerWidget() {\n    const  { diagramEngine } = this.props;\n    const diagramModel = diagramEngine.getDiagramModel();\n\n    if (!this.state.renderedNodes) {\n      return null;\n    }\n\n    return (\n      <LinkLayerWidget\n        diagramEngine={diagramEngine}\n        pointAdded={(point, event) => {\n          event.stopPropagation();\n          diagramModel.clearSelection(point);\n          this.setState({\n            action: new MoveItemsAction(event.pageX, event.pageY, diagramEngine)\n          });\n        }}\n      />\n    );\n  }\n\n  renderSelector() {\n    const { action } = this.state;\n    const offsetWidth = this.refs.canvas && this.refs.canvas.offsetWidth || window.innerWidth;\n    const offsetHeight = this.refs.canvas && this.refs.canvas.offsetHeight || window.innerHeight;\n\n    if (!(action instanceof SelectingAction)) {\n      return null;\n    }\n\n    const style = {\n      width: Math.abs(action.mouseX2 - action.mouseX),\n      height: Math.abs(action.mouseY2 - action.mouseY),\n    };\n\n    if ((action.mouseX2 - action.mouseX) < 0) {\n      style.right = offsetWidth - action.mouseX;\n    } else {\n      style.left = action.mouseX;\n    }\n\n    if ((action.mouseY2 - action.mouseY) < 0) {\n      style.bottom = offsetHeight - action.mouseY;\n    } else {\n      style.top = action.mouseY;\n    }\n\n    return (\n      <div\n        className='selector'\n        style={style}\n      />\n    );\n  }\n\n  render() {\n    const  { diagramEngine } = this.props;\n\n    return (\n      <div\n        ref='canvas'\n        className='react-js-diagrams-canvas'\n        onWheel={this.onWheel.bind(this)}\n        onMouseMove={this.onMouseMove.bind(this)}\n        onMouseDown={this.onMouseDown.bind(this)}\n        onMouseUp={this.onMouseUp.bind(this)}\n      >\n        {this.renderLinkLayerWidget()}\n        <NodeLayerWidget diagramEngine={diagramEngine} />\n        {this.renderSelector()}\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/DiagramWidget.js","import { BaseAction } from './BaseAction';\n\nexport class MoveCanvasAction extends BaseAction {\n  constructor(mouseX, mouseY, diagramModel) {\n    super(mouseX, mouseY);\n    this.initialOffsetX = diagramModel.getOffsetX();\n    this.initialOffsetY = diagramModel.getOffsetY();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/MoveCanvasAction.js","import { BaseAction } from './BaseAction';\n\nexport class MoveItemsAction extends BaseAction {\n  constructor(mouseX, mouseY, diagramEngine) {\n    super(mouseX, mouseY);\n    this.moved = false;\n    diagramEngine.enableRepaintEntities(diagramEngine.getDiagramModel().getSelectedItems());\n    this.selectionModels = diagramEngine.getDiagramModel().getSelectedItems().map(item => ({\n      model: item,\n      initialX: item.x,\n      initialY: item.y,\n    }));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/MoveItemsAction.js","import { Toolkit } from './Toolkit';\n\nexport class BaseEntity {\n  constructor() {\n    this.listeners = {};\n    this.id = Toolkit.UID();\n  }\n\n  getID() {\n    return this.id;\n  }\n\n  clearListeners() {\n    this.listeners = {};\n  }\n\n  deSerialize(data) {\n    this.id = data.id;\n  }\n\n  serialize() {\n    return {\n      id: this.id,\n    };\n  }\n\n  itterateListeners(cb) {\n    for (const key in this.listeners) {\n      cb(this.listeners[key]);\n    }\n  }\n\n  removeListener(listener) {\n    if (this.listeners[listener]) {\n      delete this.listeners[listener];\n      return true;\n    }\n    return false;\n  }\n\n  addListener(listener) {\n    const uid = Toolkit.UID();\n    this.listeners[uid] = listener;\n    return uid;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BaseEntity.js","import { BaseAction } from './BaseAction';\n\nexport class SelectingAction extends BaseAction {\n  constructor(mouseX, mouseY) {\n    super(mouseX, mouseY);\n    this.mouseX2 = mouseX;\n    this.mouseY2 = mouseY;\n  }\n\n  containsElement(x, y, diagramModel) {\n    const { mouseX, mouseX2, mouseY, mouseY2 } = this;\n    const z = diagramModel.getZoomLevel() / 100;\n    const elX = (x + diagramModel.getOffsetX()) * z;\n    const elY = (y + diagramModel.getOffsetY()) * z;\n\n    return (\n      ((mouseX2 < mouseX) ? elX < mouseX : elX > mouseX) &&\n      ((mouseX2 < mouseX) ? elX > mouseX2 : elX < mouseX2) &&\n      ((mouseY2 < mouseY) ? elY < mouseY : elY > mouseY) &&\n      ((mouseY2 < mouseY) ? elY > mouseY2 : elY < mouseY2)\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/SelectingAction.js","export * from './SelectingAction';\nexport * from './MoveCanvasAction';\nexport * from './MoveItemsAction';\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/index.js","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 32\n// module chunks = 0 1 2 3","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 35\n// module chunks = 0 1 2 3","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\n  margin: 0;\\n  padding: 0; }\\n\\nhtml, body, #root {\\n  width: 100%;\\n  height: 100%;\\n  background: #3c3c3c;\\n  display: flex; }\\n\\n.demo-link {\\n  padding: 0.5rem 1rem; }\\n  .demo-link a {\\n    color: white;\\n    text-decoration: underline;\\n    cursor: pointer; }\\n\\n.react-js-diagrams-canvas {\\n  position: relative;\\n  flex-grow: 1;\\n  display: flex;\\n  cursor: move;\\n  overflow: hidden; }\\n  .react-js-diagrams-canvas .point {\\n    fill: rgba(255, 255, 255, 0.5); }\\n    .react-js-diagrams-canvas .point.selected {\\n      fill: #00c0ff; }\\n  .react-js-diagrams-canvas .selector {\\n    position: absolute;\\n    background-color: rgba(0, 192, 255, 0.2);\\n    border: solid 2px #00c0ff; }\\n  .react-js-diagrams-canvas svg {\\n    position: absolute;\\n    height: 100%;\\n    width: 100%;\\n    transform-origin: 0 0;\\n    overflow: visible; }\\n  .react-js-diagrams-canvas .node-view {\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    position: absolute;\\n    pointer-events: none;\\n    transform-origin: 0 0; }\\n  .react-js-diagrams-canvas .node {\\n    position: absolute;\\n    -webkit-touch-callout: none;\\n    /* iOS Safari */\\n    -webkit-user-select: none;\\n    /* Chrome/Safari/Opera */\\n    user-select: none;\\n    cursor: move;\\n    pointer-events: all; }\\n    .react-js-diagrams-canvas .node.selected > * {\\n      border-color: #00c0ff !important;\\n      -webkit-filter: drop-shadow(0 0 20px rgba(0, 192, 255, 0.5)); }\\n\\n@keyframes dash {\\n  from {\\n    stroke-dashoffset: 24; }\\n  to {\\n    stroke-dashoffset: 0; } }\\n  .react-js-diagrams-canvas path {\\n    fill: none;\\n    pointer-events: all; }\\n    .react-js-diagrams-canvas path.selected {\\n      stroke: #00c0ff !important;\\n      stroke-dasharray: 10,2;\\n      animation: dash 1s linear infinite; }\\n  .react-js-diagrams-canvas .port {\\n    width: 15px;\\n    height: 15px;\\n    background: rgba(255, 255, 255, 0.1); }\\n    .react-js-diagrams-canvas .port:hover, .react-js-diagrams-canvas .port.selected {\\n      background: #c0ff00; }\\n\\n.basic-node {\\n  background-color: #1e1e1e;\\n  border-radius: 5px;\\n  font-family: Arial;\\n  color: white;\\n  border: solid 2px black;\\n  overflow: visible;\\n  font-size: 11px;\\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); }\\n  .basic-node .title {\\n    /*      background-image: linear-gradient(rgba(black,0.1),rgba(black,0.2));*/\\n    background: rgba(0, 0, 0, 0.3);\\n    display: flex;\\n    white-space: nowrap; }\\n    .basic-node .title > * {\\n      align-self: center; }\\n    .basic-node .title .fa {\\n      padding: 5px;\\n      opacity: 0.2;\\n      cursor: pointer; }\\n      .basic-node .title .fa:hover {\\n        opacity: 1.0; }\\n    .basic-node .title .name {\\n      flex-grow: 1;\\n      padding: 5px 5px; }\\n  .basic-node .ports {\\n    display: flex;\\n    background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)); }\\n    .basic-node .ports .in, .basic-node .ports .out {\\n      flex-grow: 1;\\n      display: flex;\\n      flex-direction: column; }\\n    .basic-node .ports .in-port, .basic-node .ports .out-port {\\n      display: flex;\\n      margin-top: 1px; }\\n      .basic-node .ports .in-port > *, .basic-node .ports .out-port > * {\\n        align-self: center; }\\n      .basic-node .ports .in-port .name, .basic-node .ports .out-port .name {\\n        padding: 0 5px; }\\n    .basic-node .ports .out-port {\\n      justify-content: flex-end; }\\n      .basic-node .ports .out-port .name {\\n        justify-content: flex-end;\\n        text-align: right; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader/lib/loader.js!./demos/test.scss\n// module id = 37\n// module chunks = 1 2 3","import { BaseEntity } from './BaseEntity';\n\nexport class AbstractInstanceFactory extends BaseEntity {\n  constructor(className) {\n    super(className);\n    this.className = className;\n  }\n\n  getName() {\n    return this.className;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/AbstractInstanceFactory.js","export * from './defaults/DefaultLinkFactory';\nexport * from './defaults/DefaultLinkWidget';\nexport * from './defaults/DefaultNodeFactory';\nexport * from './defaults/DefaultNodeWidget';\nexport * from './defaults/DefaultNodeModel';\nexport * from './defaults/DefaultPortModel';\nexport * from './defaults/DefaultPortLabelWidget';\n\nexport * from './WidgetFactories';\nexport * from './Toolkit';\n\nexport * from './DiagramEngine';\nexport * from './DiagramModel';\nexport * from './BaseEntity';\nexport * from './Common';\nexport * from './AbstractInstanceFactory';\nexport * from './LinkInstanceFactory';\n\nexport * from './widgets/DiagramWidget';\nexport * from './widgets/LinkLayerWidget';\nexport * from './widgets/LinkWidget';\nexport * from './widgets/NodeLayerWidget';\nexport * from './widgets/NodeWidget';\nexport * from './widgets/PortWidget';\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import * as SRD from \"../../src/main\";\nimport {DiamondPortModel} from \"./DiamondPortModel\";\n\nexport class DiamondNodeModel extends SRD.NodeModel{\n\tconstructor(){\n\t\tsuper('diamond');\n\t\tthis.addPort(new DiamondPortModel('top'));\n\t\tthis.addPort(new DiamondPortModel('left'));\n\t\tthis.addPort(new DiamondPortModel('bottom'));\n\t\tthis.addPort(new DiamondPortModel('right'));\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondNodeModel.js","import React from 'react';\nimport { DefaultNodeWidget } from './defaults/DefaultNodeWidget';\nimport { DefaultLinkWidget } from './defaults/DefaultLinkWidget';\n\nexport class WidgetFactory {\n  constructor(name) {\n    this.type = name;\n  }\n\n  getType() {\n    return this.type;\n  }\n}\n\nexport class NodeWidgetFactory extends WidgetFactory {\n  generateReactWidget(diagramEngine, node) {\n    return <DefaultNodeWidget node={node} diagramEngine={diagramEngine} />;\n  }\n}\n\nexport class LinkWidgetFactory extends WidgetFactory {\n  generateReactWidget(diagramEngine, link) {\n    return <DefaultLinkWidget link={link} diagramEngine={diagramEngine} />;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/WidgetFactories.js","import * as SRD from \"../../src/main\";\nimport * as _ from \"lodash\";\n\nexport class DiamondPortModel extends SRD.PortModel{\n\tconstructor(pos = 'top'){\n\t\tsuper(pos);\n\t\tthis.position = pos ;\n\t}\n\t\n\tserialize(){\n\t\treturn _.merge(super.serialize(),{\n\t\t\tposition: this.position,\n\t\t});\n\t}\n\t\n\tdeSerialize(data) {\n\t\tsuper.deSerialize(data);\n\t\tthis.position = data.position;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondPortModel.js","import React from 'react';\nimport { PointModel } from '../Common';\n\nexport class DefaultLinkWidget extends React.Component {\n  static defaultProps = {\n    color: 'black',\n    width: 3,\n    link:null,\n    engine: null,\n    smooth: false,\n    diagramEngine: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      selected: false\n    };\n  }\n\n  generatePoint(pointIndex) {\n    const { link } = this.props;\n    const uiCircleProps = {\n      className: `point pointui${(link.points[pointIndex].isSelected() ? ' selected' : '')}`,\n      cx: link.points[pointIndex].x,\n      cy: link.points[pointIndex].y,\n      r: 5,\n    };\n    const circleProps = {\n      className: 'point',\n      'data-linkid': link.id,\n      'data-id': link.points[pointIndex].id,\n      cx: link.points[pointIndex].x,\n      cy: link.points[pointIndex].y,\n      r: 15,\n      opacity: 0,\n      onMouseLeave: () => this.setState({selected: false}),\n      onMouseEnter: () => this.setState({selected: true}),\n    };\n\n    return (\n      <g key={`point-${link.points[pointIndex].id}`}>\n        <circle {...uiCircleProps}/>\n        <circle {...circleProps}/>\n      </g>\n    );\n  }\n\n  generateLink(extraProps) {\n    const { link, width, color } = this.props;\n    const { selected } = this.state;\n    const bottom = (\n      <path\n        className={(selected || link.isSelected()) ? 'selected' : ''}\n        strokeWidth={width}\n        stroke={color}\n        {...extraProps}\n      />\n    );\n\n    const top = (\n      <path\n        strokeLinecap={'round'}\n        data-linkid={link.getID()}\n        stroke={color}\n        strokeOpacity={selected ? 0.1 : 0}\n        strokeWidth={20}\n        onMouseLeave={() => this.setState({selected: false})}\n        onMouseEnter={() => this.setState({selected: true})}\n        onContextMenu={event => {\n          event.preventDefault();\n          this.props.link.remove();\n        }}\n        {...extraProps}\n      />\n    );\n\n    return (\n      <g key={`link-${extraProps.id}`}>\n        {bottom}\n        {top}\n      </g>\n    );\n  }\n\n  drawLine() {\n    const { link, diagramEngine, pointAdded } = this.props;\n    const { points } = link;\n    const paths = [];\n\n    // If the points are too close, just draw a straight line\n    const margin = (Math.abs(points[0].x - points[1].x) < 50) ? 5 : 50;\n\n    let pointLeft = points[0];\n    let pointRight = points[1];\n\n    // Some defensive programming to make sure the smoothing is\n    // Always in the right direction\n    if (pointLeft.x > pointRight.x) {\n      pointLeft = points[1];\n      pointRight = points[0];\n    }\n\n    paths.push(this.generateLink({\n      id: 0,\n      onMouseDown: (event) => {\n        if (!event.shiftKey){\n          var point = new PointModel(link, diagramEngine.getRelativeMousePoint(event));\n          point.setSelected(true);\n          this.forceUpdate();\n          link.addPoint(point,1);\n          pointAdded(point,event);\n        }\n      },\n      d: ' M' + pointLeft.x + ' ' + pointLeft.y +\n         ' C' + (pointLeft.x + margin) + ' ' + pointLeft.y +\n         ' ' + (pointRight.x - margin) + ' ' + pointRight.y +\n         ' ' + pointRight.x + ' ' + pointRight.y\n    }));\n\n    if (link.targetPort === null){\n      paths.push(this.generatePoint(1));\n    }\n    \n    return paths;\n  }\n\n  drawAdvancedLine() {\n    const { link, smooth, diagramEngine, pointAdded } = this.props;\n    const { points } = link;\n    const ds = [];\n\n    if (smooth) {\n      ds.push(\n        ' M' + points[0].x + ' ' + points[0].y + ' C ' + (points[0].x+50) + ' ' + points[0].y +\n        ' ' + points[1].x + ' ' + points[1].y + ' ' + points[1].x + ' ' + points[1].y\n      );\n\n      let i;\n      for (i = 1; i < points.length - 2; i++) {\n        ds.push(' M ' + points[i].x + ' ' + points[i].y + ' L ' + points[i + 1].x + ' ' + points[i + 1].y);\n      }\n\n      ds.push(\n        ' M' + points[i].x + ' ' + points[i].y + ' C ' + points[i].x + ' ' + points[i].y + ' ' +\n        (points[i + 1].x - 50) + ' ' + points[i + 1].y + ' ' + points[i + 1].x + ' ' + points[i + 1].y\n      );\n    } else {\n      for (let i = 0; i < points.length - 1; i++) {\n        ds.push(' M ' + points[i].x + ' ' + points[i].y + ' L ' + points[i + 1].x + ' ' + points[i + 1].y);\n      }\n    }\n\n    const paths = ds.map((data, index) => this.generateLink({\n      id: index,\n      d: data,\n      'data-linkid': link.id,\n      'data-point': index,\n      onMouseDown: event => {\n        if (!event.shiftKey) {\n          const point = new PointModel(link, diagramEngine.getRelativeMousePoint(event));\n          point.setSelected(true);\n          this.forceUpdate();\n          link.addPoint(point, index + 1);\n          pointAdded(point, event);\n        }\n      }\n    }));\n\n    // Render the circles\n    for (let i = 1; i < points.length - 1; i++) {\n      paths.push(this.generatePoint(i));\n    }\n\n    if (link.targetPort === null) {\n      paths.push(this.generatePoint(points.length - 1));\n    }\n\n    return paths;\n  }\n\n  render() {\n    const { points } = this.props.link;\n    let paths = [];\n\n    // Draw the line\n    if (points.length === 2) {\n      paths = this.drawLine();\n    } else {\n      paths = this.drawAdvancedLine();\n    }\n\n    return (\n      <g>\n        {paths}\n      </g>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultLinkWidget.js","import React from 'react';\nimport { DefaultPortLabel } from './DefaultPortLabelWidget';\n\nexport class DefaultNodeWidget extends React.Component {\n  static defaultProps = {\n    node: null,\n  };\n\n  onRemove() {\n    const { node, diagramEngine } = this.props;\n    node.remove();\n    diagramEngine.forceUpdate();\n  }\n\n  getInPorts() {\n    const { node } = this.props;\n    return node.getInPorts().map((port, i) => <DefaultPortLabel model={port} key={`in-port-${i}`} />);\n  }\n\n  getOutPorts() {\n    const { node } = this.props;\n    return node.getOutPorts().map((port, i) => <DefaultPortLabel model={port} key={`out-port-${i}`} />);\n  }\n\n  render() {\n    const { node } = this.props;\n    return (\n      <div className='basic-node' style={{background: node.color }}>\n        <div className='title'>\n          <div className='name'>\n            {node.name}\n          </div>\n          <div className='fa fa-close' onClick={this.onRemove.bind(this)} />\n        </div>\n        <div className='ports'>\n          <div className='in'>\n            {this.getInPorts()}\n          </div>\n          <div className='out'>\n            {this.getOutPorts()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultNodeWidget.js","export class BaseAction {\n  constructor(mouseX, mouseY) {\n    this.mouseX = mouseX;\n    this.mouseY = mouseY;\n    this.ms = (new Date()).getTime();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/BaseAction.js","import * as SRD from \"../../src/main\";\nimport {DiamondNodeModel} from \"./DiamondNodeModel\";\nimport {DiamondPortModel} from \"./DiamondPortModel\";\n\nexport class DiamondNodeFactory extends SRD.AbstractInstanceFactory {\n\tconstructor(){\n\t\tsuper(\"DiamondNodeModel\");\n\t}\n\t\n\tgetInstance(){\n\t\treturn new DiamondNodeModel();\n\t}\n}\n\nexport class DiamondPortFactory extends SRD.AbstractInstanceFactory {\n\tconstructor(){\n\t\tsuper(\"DiamondPortModel\");\n\t}\n\t\n\tgetInstance(){\n\t\treturn new DiamondPortModel();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondInstanceFactories.js","import * as SRD from \"../../src/main\";\nimport {DiamonNodeWidgetFactory} from \"./DiamondNodeWidget\";\n\nexport class DiamondWidgetFactory extends SRD.NodeWidgetFactory{\n\tconstructor(){\n\t\tsuper('diamond');\n\t}\n\t\n\tgenerateReactWidget(diagramEngine, node) {\n\t\treturn DiamonNodeWidgetFactory({ node });\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondWidgetFactory.js"],"sourceRoot":""}