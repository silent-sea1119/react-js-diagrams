{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 6a83ff2a8411dbcc59e7","webpack:///external \"React\"","webpack:///./src/Common.js","webpack:///external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"_\",\"root\":\"_\"}","webpack:///./src/BaseEntity.js","webpack:///./src/AbstractInstanceFactory.js","webpack:///./src/main.js","webpack:///./src/WidgetFactories.js","webpack:///./src/defaults/DefaultLinkWidget.js","webpack:///./src/defaults/DefaultNodeWidget.js","webpack:///./src/widgets/actions/BaseAction.js","webpack:///./src/DiagramModel.js","webpack:///./src/Toolkit.js","webpack:///./src/defaults/DefaultPortLabelWidget.js","webpack:///./src/widgets/LinkLayerWidget.js","webpack:///./src/widgets/LinkWidget.js","webpack:///./src/widgets/NodeLayerWidget.js","webpack:///./src/widgets/NodeWidget.js","webpack:///./src/widgets/PortWidget.js","webpack:///./demos/test.scss?acf3","webpack:///external \"ReactDOM\"","webpack:///./src/DiagramEngine.js","webpack:///./src/LinkInstanceFactory.js","webpack:///./src/defaults/DefaultLinkFactory.js","webpack:///./src/defaults/DefaultNodeFactory.js","webpack:///./src/defaults/DefaultNodeModel.js","webpack:///./src/defaults/DefaultPortModel.js","webpack:///./src/widgets/DiagramWidget.js","webpack:///./src/widgets/actions/MoveCanvasAction.js","webpack:///./src/widgets/actions/MoveItemsAction.js","webpack:///./src/widgets/actions/SelectingAction.js","webpack:///./src/widgets/actions/index.js","webpack:///./demos/test.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./demos/demo3/DiamondNodeModel.js","webpack:///./demos/demo3/DiamondPortModel.js","webpack:///./demos/demo3/DiamondInstanceFactories.js","webpack:///./demos/demo3/DiamondWidgetFactory.js","webpack:///./demos/demo3/DiamondNodeWidget.js","webpack:///./demos/demo3/index.js"],"names":["BaseModel","selected","ob","_class","constructor","name","id","itterateListeners","listener","selectionChanged","entityRemoved","PointModel","link","points","x","y","removePoint","LinkModel","linkType","extras","sourcePort","targetPort","type","map","p","point","deSerialize","source","getParent","target","serialize","removeLink","getPointIndex","length","indexOf","i","port","addLink","pointModel","splice","index","PortModel","links","parentNode","_","node","getID","NodeModel","nodeType","ports","key","getLinks","forEach","remove","setParentNode","BaseEntity","listeners","Toolkit","UID","data","cb","uid","AbstractInstanceFactory","className","WidgetFactory","NodeWidgetFactory","diagramEngine","LinkWidgetFactory","DefaultLinkWidget","props","state","pointIndex","uiCircleProps","isSelected","cx","cy","r","circleProps","opacity","onMouseLeave","setState","onMouseEnter","extraProps","width","color","bottom","top","event","preventDefault","pointAdded","paths","margin","Math","abs","pointLeft","pointRight","push","generateLink","onMouseDown","shiftKey","getRelativeMousePoint","setSelected","forceUpdate","addPoint","d","generatePoint","smooth","ds","drawLine","drawAdvancedLine","React","Component","defaultProps","engine","DefaultNodeWidget","getInPorts","getOutPorts","background","onRemove","bind","BaseAction","mouseX","mouseY","ms","Date","getTime","DiagramModel","nodes","offsetX","offsetY","zoom","rendered","object","nodeOb","getInstanceFactory","getInstance","portOb","addPort","addNode","linkOb","setTargetPort","getNode","getPortFromID","setSourcePort","ignore","getSelectedItems","element","filter","flatMap","controlsUpdated","addListener","linksUpdated","removeNode","nodesUpdated","replace","c","random","v","toString","DefaultPortLabel","model","label","in","LinkLayerWidget","diagramModel","getDiagramModel","updateLocation","getPortCenter","ex","last","generatedLink","generateWidgetForLink","console","log","getType","cloneElement","getZoomLevel","getOffsetX","getOffsetY","svgStyle","transform","height","generateLinks","LinkWidget","canEntityRepaint","children","NodeLayerWidget","style","getNodes","generateWidgetForNode","NodeWidget","left","PortWidget","DiagramEngine","nodeFactories","linkFactories","instanceFactories","canvas","paintableWidgets","entities","entity","getPorts","getLink","baseModel","undefined","factory","getName","nodeFactoriesUpdated","linkFactoriesUpdated","linkFactory","getFactoryForLink","generateReactWidget","nodeFactory","getFactoryForNode","getRelativePoint","pageX","pageY","canvasRect","getBoundingClientRect","selector","querySelector","sourceElement","getNodePortElement","sourceRect","rel","offsetWidth","offsetHeight","LinkInstanceFactory","DefaultLinkFactory","DefaultNodeFactory","DefaultNodeInstanceFactory","DefaultNodeModel","merge","portModel","DefaultPortInstanceFactory","DefaultPortModel","isInput","DiagramWidget","action","renderedNodes","windowListener","setCanvas","window","removeEventListener","nextProps","refs","setForceUpdate","addEventListener","keyCode","focus","closest","nodeElement","getAttribute","getPort","getPointModel","stopPropagation","setZoomLevel","deltaY","enableRepaintEntities","relative","containsElement","allSelected","mouseX2","mouseY2","selectionModels","initialX","initialY","setOffset","initialOffsetX","initialOffsetY","getMouseElement","clearRepaintEntities","clearSelection","getFirstPoint","getLastPoint","onWheel","onMouseMove","onMouseUp","renderLinkLayerWidget","renderSelector","MoveCanvasAction","MoveItemsAction","moved","item","SelectingAction","z","DiamondNodeModel","DiamondPortModel","pos","position","DiamondNodeFactory","DiamondPortFactory","DiamondWidgetFactory","DiamonNodeWidgetFactory","DiamonNodeWidget","div","size","svg","dangerouslySetInnerHTML","__html","zIndex","require","onload","registerNodeFactory","registerLinkFactory","node1","port1","node2","node3","port3","link1","link2","setDiagramModel","ReactDOM","document","getElementById","registerInstanceFactory","str","JSON","stringify","serializeDiagram","model2","deSerializeDiagram","parse"],"mappings":"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lC;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;ACrPA;AACA;;AAEA,IAAauB,gBAAb;AAAA;;AACC,6BAAa;AAAA;;AAAA,kIACN,SADM;;AAEZ,QAAKrJ,OAAL,CAAa,IAAI,2EAAJ,CAAqB,KAArB,CAAb;AACA,QAAKA,OAAL,CAAa,IAAI,2EAAJ,CAAqB,MAArB,CAAb;AACA,QAAKA,OAAL,CAAa,IA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","file":"demo3/bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"lodash\"), require(\"ReactDOM\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"React\", \"_\", \"ReactDOM\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-js-diagrams\"] = factory(require(\"React\"), require(\"lodash\"), require(\"ReactDOM\"));\n\telse\n\t\troot[\"react-js-diagrams\"] = factory(root[\"React\"], root[\"_\"], root[\"ReactDOM\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_19__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 41);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6a83ff2a8411dbcc59e7","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0 1 2","import _ from 'lodash';\nimport { BaseEntity } from './BaseEntity';\n\nexport class BaseModel extends BaseEntity {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.selected = false;\n\t}\n\n\tdeSerialize(ob) {\n\t\tsuper.deSerialize(ob);\n\t\tthis.selected = ob.selected;\n\t}\n\n\tserialize() {\n\t\treturn {\n\t\t  ...super.serialize(),\n\t\t\t_class: this.constructor.name,\n\t\t\tselected: this.selected\n\t\t};\n\t}\n\n\tgetID() {\n\t\treturn this.id;\n\t}\n\n\tisSelected() {\n\t\treturn this.selected;\n\t}\n\n\tsetSelected(selected) {\n\t\tthis.selected = selected;\n\n\t\tthis.itterateListeners(listener => {\n\t\t\tif(listener.selectionChanged) {\n\t\t\t\tlistener.selectionChanged();\n\t\t\t}\n\t\t});\n\t}\n\n\tremove() {\n\t\tthis.itterateListeners(listener => {\n\t\t\tif(listener.entityRemoved) {\n\t\t\t\tlistener.entityRemoved();\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport class PointModel extends BaseModel {\n\tconstructor(link, points) {\n\t\tsuper();\n\t\tthis.x = points.x;\n\t\tthis.y = points.y;\n\t\tthis.link = link;\n\t}\n\n\tdeSerialize(ob) {\n\t\tsuper.deSerialize(ob);\n\t\tthis.x = ob.x;\n\t\tthis.y = ob.y;\n\t}\n\n\tserialize() {\n\t\treturn {\n\t\t  ...super.serialize(),\n\t\t\tx: this.x,\n\t\t\ty: this.y\n\t\t};\n\t}\n\n\tremove() {\n\t\tsuper.remove();\n\n\t\t// Clear references\n\t\tif (this.link) {\n\t\t\tthis.link.removePoint(this);\n\t\t}\n\t}\n\n\tupdateLocation(points) {\n\t\tthis.x = points.x;\n\t\tthis.y = points.y;\n\t}\n\n\tgetX() {\n\t\treturn this.x;\n\t}\n\n\tgetY() {\n\t\treturn this.y;\n\t}\n\n\tgetLink() {\n\t\treturn this.link;\n\t}\n}\n\nexport class LinkModel extends BaseModel {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.linkType = 'default';\n\t\tthis.points = [\n\t\t\tnew PointModel(this,{x: 0,y: 0}),\n\t\t\tnew PointModel(this,{x: 0,y: 0}),\n\t\t];\n\t\tthis.extras = {};\n\t\tthis.sourcePort = null;\n\t\tthis.targetPort = null;\n\t}\n\n\tdeSerialize(ob) {\n\t\tsuper.deSerialize(ob);\n\t\tthis.linkType = ob.type;\n\t\tthis.points = ob.points.map(point => {\n\t\t\tvar p = new PointModel(this, {x: point.x,y:point.y});\n\t\t\tp.deSerialize(point);\n\t\t\treturn p;\n\t\t});\n\t}\n\n\tserialize() {\n\t\treturn {\n\t\t  ...super.serialize(),\n\t\t\ttype: this.linkType,\n\t\t\tsource: this.sourcePort ? this.sourcePort.getParent().id:null,\n\t\t\tsourcePort: this.sourcePort ? this.sourcePort.id:null,\n\t\t\ttarget: this.targetPort ? this.targetPort.getParent().id:null,\n\t\t\ttargetPort: this.targetPort ? this.targetPort.id:null,\n\t\t\tpoints: this.points.map(point => point.serialize()),\n\t\t\textras: this.extras\n\t\t};\n\t}\n\n\tremove() {\n\t\tsuper.remove();\n\t\tif (this.sourcePort) {\n\t\t\tthis.sourcePort.removeLink(this);\n\t\t}\n\t\tif (this.targetPort) {\n\t\t\tthis.targetPort.removeLink(this);\n\t\t}\n\t}\n\n\tisLastPoint(point) {\n\t\treturn this.getPointIndex(point) === this.points.length-1;\n\t}\n\n\tgetPointIndex(point) {\n\t\treturn this.points.indexOf(point);\n\t}\n\n\tgetPointModel(id) {\n\t\tfor (let i = 0; i < this.points.length; i++) {\n\t\t\tif (this.points[i].id === id) {\n\t\t\t\treturn this.points[i];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetFirstPoint() {\n\t\treturn this.points[0];\n\t}\n\n\tgetLastPoint() {\n\t\treturn this.points[this.points.length - 1];\n\t}\n\n\tsetSourcePort(port) {\n\t\tport.addLink(this);\n\t\tthis.sourcePort = port;\n\t}\n\n\tgetSourcePort() {\n\t\treturn this.sourcePort;\n\t}\n\n\tgetTargetPort() {\n\t\treturn this.targetPort;\n\t}\n\n\tsetTargetPort(port) {\n\t\tport.addLink(this);\n\t\tthis.targetPort = port;\n\t}\n\n\tgetPoints() {\n\t\treturn this.points;\n\t}\n\n\tsetPoints(points) {\n\t\tthis.points = points;\n\t}\n\n\tremovePoint(pointModel) {\n\t\tthis.points.splice(this.getPointIndex(pointModel), 1);\n\t}\n\n\taddPoint(pointModel, index = 1) {\n\t\tthis.points.splice(index, 0, pointModel);\n\t}\n\n\tgetType() {\n\t\treturn this.linkType;\n\t}\n}\n\nexport class PortModel extends BaseModel {\n\tconstructor(name) {\n\t\tsuper();\n\t\tthis.name = name;\n\t\tthis.links = {};\n\t\tthis.parentNode = null;\n\t}\n\n\tdeSerialize(ob) {\n\t\tsuper.deSerialize(ob);\n\t\tthis.name = ob.name;\n\t}\n\n\tserialize() {\n\t\treturn {\n\t\t  ...super.serialize(),\n\t\t\tname: this.name,\n\t\t\tparentNode: this.parentNode.id,\n\t\t\tlinks: _.map(this.links, link => link.id)\n\t\t};\n\t}\n\n\tgetName() {\n\t\treturn this.name;\n\t}\n\n\tgetParent() {\n\t\treturn this.parentNode;\n\t}\n\n\tsetParentNode(node) {\n\t\tthis.parentNode = node;\n\t}\n\n\tremoveLink(link) {\n\t\tdelete this.links[link.getID()];\n\t}\n\n\taddLink(link) {\n\t\tthis.links[link.getID()] = link;\n\t}\n\n\tgetLinks() {\n\t\treturn this.links;\n\t}\n}\n\nexport class NodeModel extends BaseModel {\n\tconstructor(nodeType = 'default') {\n\t\tsuper();\n\t\tthis.nodeType = nodeType;\n\t\tthis.x = 0;\n\t\tthis.y = 0;\n\t\tthis.extras = {};\n\t\tthis.ports = {};\n\t}\n\n\tdeSerialize(ob) {\n\t\tsuper.deSerialize(ob);\n\t\tthis.nodeType = ob.type;\n\t\tthis.x = ob.x;\n\t\tthis.y = ob.y;\n\t\tthis.extras = ob.extras;\n\t}\n\n\tserialize() {\n\t\treturn {\n\t\t  ...super.serialize(),\n\t\t\ttype: this.nodeType,\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t\textras: this.extras,\n\t\t\tports: _.map(this.ports, port => port.serialize())\n\t\t};\n\t}\n\n\tremove() {\n\t\tsuper.remove();\n\t\tfor (const key in this.ports) {\n\t\t\tthis.ports[key].getLinks().forEach(link => link.remove());\n\t\t}\n\t}\n\n\tgetPortFromID(id) {\n\t\tfor (const key in this.ports) {\n\t\t\tif (this.ports[key].id === id) {\n\t\t\t\treturn this.ports[key];\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetPort(name) {\n\t\treturn this.ports[name];\n\t}\n\n\tgetPorts() {\n\t\treturn this.ports;\n\t}\n\n\tremovePort(port) {\n\t\t// Clear the parent node reference\n\t\tif(this.ports[port.name]) {\n\t\t\tthis.ports[port.name].setParentNode(null);\n\t\t\tdelete this.ports[port.name];\n\t\t}\n\t}\n\n\taddPort(port) {\n\t\tport.setParentNode(this);\n\t\tthis.ports[port.name] = port;\n\t\treturn port;\n\t}\n\n\tgetType() {\n\t\treturn this.nodeType;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Common.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"lodash\",\"commonjs2\":\"lodash\",\"amd\":\"_\",\"root\":\"_\"}\n// module id = 2\n// module chunks = 0 1 2","import { Toolkit } from './Toolkit';\n\nexport class BaseEntity {\n\tconstructor() {\n\t\tthis.listeners = {};\n\t\tthis.id = Toolkit.UID();\n\t}\n\n\tgetID() {\n\t\treturn this.id;\n\t}\n\n\tclearListeners() {\n\t\tthis.listeners = {};\n\t}\n\n\tdeSerialize(data) {\n\t\tthis.id = data.id;\n\t}\n\n\tserialize() {\n\t\treturn {\n\t\t\tid: this.id,\n\t\t};\n\t}\n\n\titterateListeners(cb) {\n\t\tfor (const key in this.listeners) {\n\t\t\tcb(this.listeners[key]);\n\t\t}\n\t}\n\n\tremoveListener(listener) {\n\t\tif (this.listeners[listener]) {\n\t\t\tdelete this.listeners[listener];\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\taddListener(listener) {\n\t\tconst uid = Toolkit.UID();\n\t\tthis.listeners[uid] = listener;\n\t\treturn uid;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/BaseEntity.js","import { BaseEntity } from './BaseEntity';\n\nexport class AbstractInstanceFactory extends BaseEntity {\n\tconstructor(className) {\n\t  super(className);\n\t\tthis.className = className;\n\t}\n\n\tgetName() {\n\t\treturn this.className;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/AbstractInstanceFactory.js","export * from './defaults/DefaultLinkFactory';\nexport * from './defaults/DefaultLinkWidget';\nexport * from './defaults/DefaultNodeFactory';\nexport * from './defaults/DefaultNodeWidget';\nexport * from './defaults/DefaultNodeModel';\nexport * from './defaults/DefaultPortModel';\nexport * from './defaults/DefaultPortLabelWidget';\n\nexport * from './WidgetFactories';\nexport * from './Toolkit';\n\nexport * from './DiagramEngine';\nexport * from './DiagramModel';\nexport * from './BaseEntity';\nexport * from './Common';\nexport * from './AbstractInstanceFactory';\nexport * from './LinkInstanceFactory';\n\nexport * from './widgets/DiagramWidget';\nexport * from './widgets/LinkLayerWidget';\nexport * from './widgets/LinkWidget';\nexport * from './widgets/NodeLayerWidget';\nexport * from './widgets/NodeWidget';\nexport * from './widgets/PortWidget';\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import React from 'react';\nimport { DefaultNodeWidget } from './defaults/DefaultNodeWidget';\nimport { DefaultLinkWidget } from './defaults/DefaultLinkWidget';\n\nexport class WidgetFactory {\n\tconstructor(name) {\n\t\tthis.type = name;\n\t}\n\n\tgetType() {\n\t\treturn this.type;\n\t}\n}\n\nexport class NodeWidgetFactory extends WidgetFactory {\n\tgenerateReactWidget(diagramEngine, node) {\n\t  return <DefaultNodeWidget node={node} diagramEngine={diagramEngine} />;\n\t}\n}\n\nexport class LinkWidgetFactory extends WidgetFactory {\n\tgenerateReactWidget(diagramEngine, link) {\n\t  return <DefaultLinkWidget link={link} diagramEngine={diagramEngine} />;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/WidgetFactories.js","import React from 'react';\nimport { PointModel } from '../Common';\n\nexport class DefaultLinkWidget extends React.Component {\n\tstatic defaultProps = {\n\t\tcolor: 'black',\n\t\twidth: 3,\n\t\tlink:null,\n\t\tengine: null,\n\t\tsmooth: false,\n\t\tdiagramEngine: null\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselected: false\n\t\t};\n\t}\n\n\tgeneratePoint(pointIndex) {\n\t  const { link } = this.props;\n\t  const uiCircleProps = {\n\t\t\tclassName: `point pointui${(link.points[pointIndex].isSelected() ? ' selected' : '')}`,\n\t\t\tcx: link.points[pointIndex].x,\n\t\t\tcy: link.points[pointIndex].y,\n\t\t\tr: 5,\n\t\t};\n\t\tconst circleProps = {\n\t\t\tclassName: 'point',\n\t\t\t'data-linkid': link.id,\n\t\t\t'data-id': link.points[pointIndex].id,\n\t\t\tcx: link.points[pointIndex].x,\n\t\t\tcy: link.points[pointIndex].y,\n\t\t\tr: 15,\n\t\t\topacity: 0,\n\t\t\tonMouseLeave: () => this.setState({selected: false}),\n\t\t\tonMouseEnter: () => this.setState({selected: true}),\n\t\t};\n\n\t  return (\n\t    <g key={`point-${link.points[pointIndex].id}`}>\n\t      <circle {...uiCircleProps}/>\n\t      <circle {...circleProps}/>\n\t    </g>\n    );\n\t}\n\n\tgenerateLink(extraProps) {\n\t\tconst { link, width, color } = this.props;\n\t  const { selected } = this.state;\n\t  const bottom = (\n\t    <path\n\t      className={(selected || link.isSelected()) ? 'selected' : ''}\n\t      strokeWidth={width}\n\t      stroke={color}\n\t      {...extraProps}\n\t    />\n    );\n\n\t\tconst top = (\n      <path\n        strokeLinecap={'round'}\n  \t\t\tdata-linkid={link.getID()}\n  \t\t\tstroke={color}\n  \t\t\tstrokeOpacity={selected ? 0.1 : 0}\n  \t\t\tstrokeWidth={20}\n  \t\t\tonMouseLeave={() => this.setState({selected: false})}\n  \t\t\tonMouseEnter={() => this.setState({selected: true})}\n  \t\t\tonContextMenu={event => {\n  \t\t\t\tevent.preventDefault();\n  \t\t\t\tthis.props.link.remove();\n  \t\t\t}}\n  \t\t\t{...extraProps}\n      />\n    );\n\n\t\treturn (\n      <g key={`link-${extraProps.id}`}>\n        {bottom}\n        {top}\n      </g>\n    );\n\t}\n\n\tdrawLine() {\n\t  const { link, diagramEngine, pointAdded } = this.props;\n\t  const { points } = link;\n\t  const paths = [];\n\n    // If the points are too close, just draw a straight line\n\t\tconst margin = (Math.abs(points[0].x - points[1].x) < 50) ? 5 : 50;\n\n    let pointLeft = points[0];\n    let pointRight = points[1];\n\n    // Some defensive programming to make sure the smoothing is\n    // Always in the right direction\n    if (pointLeft.x > pointRight.x) {\n      pointLeft = points[1];\n      pointRight = points[0];\n    }\n\n\t\tpaths.push(this.generateLink({\n\t\t\tid: 0,\n\t\t\tonMouseDown: (event) => {\n\t\t\t\tif (!event.shiftKey){\n\t\t\t\t\tvar point = new PointModel(link, diagramEngine.getRelativeMousePoint(event));\n\t\t\t\t\tpoint.setSelected(true);\n\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\tlink.addPoint(point,1);\n\t\t\t\t\tpointAdded(point,event);\n\t\t\t\t}\n\t\t\t},\n\t\t\td: ' M' + pointLeft.x + ' ' + pointLeft.y +\n\t\t\t\t ' C' + (pointLeft.x + margin) + ' ' + pointLeft.y +\n\t\t\t\t ' ' + (pointRight.x - margin) + ' ' + pointRight.y +\n\t\t\t\t ' ' + pointRight.x + ' ' + pointRight.y\n\t\t}));\n\n\t\tif (link.targetPort === null){\n\t\t\tpaths.push(this.generatePoint(1));\n\t\t}\n\t\t\n\t\treturn paths;\n\t}\n\n\tdrawAdvancedLine() {\n\t  const { link, smooth, diagramEngine, pointAdded } = this.props;\n\t  const { points } = link;\n\t  const ds = [];\n\n\t\tif (smooth) {\n\t\t\tds.push(\n\t\t\t  ' M' + points[0].x + ' ' + points[0].y + ' C ' + (points[0].x+50) + ' ' + points[0].y +\n\t\t\t  ' ' + points[1].x + ' ' + points[1].y + ' ' + points[1].x + ' ' + points[1].y\n\t\t\t);\n\n      let i;\n\t\t\tfor (i = 1; i < points.length - 2; i++) {\n\t\t\t\tds.push(' M ' + points[i].x + ' ' + points[i].y + ' L ' + points[i + 1].x + ' ' + points[i + 1].y);\n\t\t\t}\n\n\t\t\tds.push(\n\t\t\t  ' M' + points[i].x + ' ' + points[i].y + ' C ' + points[i].x + ' ' + points[i].y + ' ' +\n\t\t\t  (points[i + 1].x - 50) + ' ' + points[i + 1].y + ' ' + points[i + 1].x + ' ' + points[i + 1].y\n\t\t\t);\n\t\t} else {\n\t\t\tfor (let i = 0; i < points.length - 1; i++) {\n\t\t\t\tds.push(' M ' + points[i].x + ' ' + points[i].y + ' L ' + points[i + 1].x + ' ' + points[i + 1].y);\n\t\t\t}\n\t\t}\n\n\t\tconst paths = ds.map((data, index) => this.generateLink({\n\t\t\tid: index,\n\t\t\td: data,\n\t\t\t'data-linkid': link.id,\n\t\t\t'data-point': index,\n\t\t\tonMouseDown: event => {\n\t\t\t\tif (!event.shiftKey) {\n\t\t\t\t\tconst point = new PointModel(link, diagramEngine.getRelativeMousePoint(event));\n\t\t\t\t\tpoint.setSelected(true);\n\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t\tlink.addPoint(point, index + 1);\n\t\t\t\t\tpointAdded(point, event);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// Render the circles\n\t\tfor (let i = 1; i < points.length - 1; i++) {\n\t\t\tpaths.push(this.generatePoint(i));\n\t\t}\n\n\t\tif (link.targetPort === null) {\n\t\t\tpaths.push(this.generatePoint(points.length - 1));\n\t\t}\n\n\t\treturn paths;\n\t}\n\n\trender() {\n\t  const { points } = this.props.link;\n\t\tlet paths = [];\n\n    // Draw the line\n\t\tif (points.length === 2) {\n      paths = this.drawLine();\n\t\t} else {\n\t\t\tpaths = this.drawAdvancedLine();\n\t\t}\n\n\t\treturn (\n\t\t\t<g>\n\t\t\t  {paths}\n\t\t\t</g>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultLinkWidget.js","import React from 'react';\nimport { DefaultPortLabel } from './DefaultPortLabelWidget';\n\nexport class DefaultNodeWidget extends React.Component {\n\tstatic defaultProps = {\n\t\tnode: null,\n\t};\n\n\tonRemove() {\n\t  const { node, diagramEngine } = this.props;\n\t  node.remove();\n\t  diagramEngine.forceUpdate();\n\t}\n\n\tgetInPorts() {\n\t  const { node } = this.props;\n\t  return node.getInPorts().map((port, i) => <DefaultPortLabel model={port} key={`in-port-${i}`} />);\n\t}\n\n\tgetOutPorts() {\n\t  const { node } = this.props;\n\t  return node.getOutPorts().map((port, i) => <DefaultPortLabel model={port} key={`out-port-${i}`} />);\n\t}\n\n\trender() {\n\t  const { node } = this.props;\n\t  return (\n\t    <div className='basic-node' style={{background: node.color }}>\n\t      <div className='title'>\n\t        <div className='name'>\n\t          {node.name}\n\t        </div>\n\t        <div className='fa fa-close' onClick={this.onRemove.bind(this)} />\n\t      </div>\n\t      <div className='ports'>\n\t        <div className='in'>\n\t          {this.getInPorts()}\n\t        </div>\n\t        <div className='out'>\n\t          {this.getOutPorts()}\n\t        </div>\n\t      </div>\n\t    </div>\n    );\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultNodeWidget.js","export class BaseAction {\n\tconstructor(mouseX, mouseY) {\n\t\tthis.mouseX = mouseX;\n\t\tthis.mouseY = mouseY;\n\t\tthis.ms = (new Date()).getTime();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/BaseAction.js","import _ from 'lodash';\nimport { LinkModel, NodeModel } from './Common';\nimport { BaseEntity } from './BaseEntity';\n\nexport class DiagramModel extends BaseEntity {\n\tconstructor(){\n\t\tsuper();\n\t\tthis.links = {};\n\t\tthis.nodes = {};\n\t\tthis.offsetX = 0;\n\t\tthis.offsetY = 0;\n\t\tthis.zoom = 100;\n\t\tthis.rendered = false;\n\t}\n\n\tdeSerializeDiagram(object, diagramEngine) {\n\t\tthis.deSerialize(object);\n\t\tthis.offsetX = object.offsetX;\n\t\tthis.offsetY = object.offsetY;\n\t\tthis.zoom = object.zoom;\n\n\t\t// Deserialize nodes\n\t\t_.forEach(object.nodes, node => {\n\t\t\tlet nodeOb = diagramEngine.getInstanceFactory(node._class).getInstance();\n\t\t\tnodeOb.deSerialize(node);\n\n\t\t\t// Deserialize ports\n\t\t\t_.forEach(node.ports, port => {\n\t\t\t\tlet portOb = diagramEngine.getInstanceFactory(port._class).getInstance();\n\t\t\t\tportOb.deSerialize(port);\n\t\t\t\tnodeOb.addPort(portOb);\n\t\t\t});\n\n\t\t\tthis.addNode(nodeOb);\n\t\t});\n\n    // Attach ports\n\t\t_.forEach(object.links, link  => {\n\t\t\tlet linkOb = diagramEngine.getInstanceFactory(link._class).getInstance();\n\t\t\tlinkOb.deSerialize(link);\n\n\t\t\tif (link.target) {\n\t\t\t\tlinkOb.setTargetPort(this.getNode(link.target).getPortFromID(link.targetPort));\n\t\t\t}\n\n\t\t\tif (link.source) {\n\t\t\t\tlinkOb.setSourcePort(this.getNode(link.source).getPortFromID(link.sourcePort));\n\t\t\t}\n\n\t\t\tthis.addLink(linkOb);\n\t\t});\n\t}\n\n\tserializeDiagram() {\n\t\treturn {\n\t\t  ...this.serialize(),\n\t\t\toffsetX: this.offsetX,\n\t\t\toffsetY: this.offsetY,\n\t\t\tzoom: this.zoom,\n\t\t\tlinks: _.map(this.links, link => link.serialize()),\n\t\t\tnodes: _.map(this.nodes, link => link.serialize())\n\t\t};\n\t}\n\n\tclearSelection(ignore) {\n\t\t_.forEach(this.getSelectedItems(), element => {\n\t\t\tif (ignore && ignore.getID() === element.getID()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telement.setSelected(false); //TODO dont fire the listener\n\t\t});\n\t}\n\n\tgetSelectedItems() {\n\t\treturn [\n\t\t  // Nodes\n\t\t  ..._.filter(this.nodes, node => node.isSelected()),\n\t\t  // Points\n\t\t  ..._.filter(_.flatMap(this.links, node => node.points), port => port.isSelected()),\n\t\t  // Links\n\t\t  ..._.filter(this.links, link => link.isSelected())\n\t\t];\n\t}\n\n\tsetZoomLevel(zoom) {\n\t\tthis.zoom = zoom;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.controlsUpdated();\n\t\t});\n\t}\n\n\tsetOffset(offsetX, offsetY) {\n\t\tthis.offsetX = offsetX;\n\t\tthis.offsetY = offsetY;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.controlsUpdated();\n\t\t});\n\t}\n\n\tsetOffsetX(offsetX) {\n\t\tthis.offsetX = offsetX;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.controlsUpdated();\n\t\t});\n\t}\n\n\tsetOffsetY(offsetY) {\n\t\tthis.offsetX = offsetY;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.controlsUpdated();\n\t\t});\n\t}\n\n\tgetOffsetY() {\n\t\treturn this.offsetY;\n\t}\n\n\tgetOffsetX() {\n\t\treturn this.offsetX;\n\t}\n\n\tgetZoomLevel() {\n\t\treturn this.zoom;\n\t}\n\n\tgetNode(node) {\n\t\tif (node instanceof NodeModel) {\n\t\t\treturn node;\n\t\t}\n\t\tif (!this.nodes[node]) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.nodes[node];\n\t}\n\n\tgetLink(link) {\n\t\tif (link instanceof LinkModel) {\n\t\t\treturn link;\n\t\t}\n\t\tif(!this.links[link]) {\n\t\t\treturn null;\n\t\t}\n\t\treturn this.links[link];\n\t}\n\n\taddLink(link) {\n\t\tlink.addListener({\n\t\t\tentityRemoved: () => {\n\t\t\t\tthis.removeLink(link);\n\t\t\t}\n\t\t});\n\t\tthis.links[link.getID()] = link;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.linksUpdated();\n\t\t});\n\t\treturn link;\n\t}\n\n\taddNode(node) {\n\t\tnode.addListener({\n\t\t\tentityRemoved: () => {\n\t\t\t\tthis.removeNode(node);\n\t\t\t}\n\t\t});\n\t\tthis.nodes[node.getID()] = node;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.nodesUpdated();\n\t\t});\n\t\treturn node;\n\t}\n\n\tremoveLink(link) {\n\t\tif (link instanceof LinkModel){\n\t\t\tdelete this.links[link.getID()];\n\t\t\tthis.itterateListeners((listener) => {\n\t\t\t\tlistener.linksUpdated();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tdelete this.links['' + link];\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.linksUpdated();\n\t\t});\n\t}\n\n\tremoveNode(node) {\n\t\tif (node instanceof NodeModel) {\n\t\t\tdelete this.nodes[node.getID()];\n\t\t\tthis.itterateListeners((listener) => {\n\t\t\t\tlistener.nodesUpdated();\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tdelete this.nodes['' + node];\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.nodesUpdated();\n\t\t});\n\t}\n\n\tgetLinks() {\n\t\treturn this.links;\n\t}\n\n\tgetNodes() {\n\t\treturn this.nodes;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/DiagramModel.js","export class Toolkit {\n\t/**\n   * Generats a unique ID (thanks Stack overflow :3)\n   * @returns {String}\n   */\n\tstatic UID() {\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Toolkit.js","import React from 'react';\nimport { PortWidget } from '../widgets/PortWidget';\n\nexport class DefaultPortLabel extends React.Component {\n\tstatic defaultProps = {\n\t\tin: true,\n\t\tlabel: 'port'\n\t};\n\n\trender() {\n\t  const { model } = this.props;\n\t  const port = (\n\t    <PortWidget name={model.name} node={model.getParent()} />\n    );\n\t  const label = (\n\t    <div className='name'>\n\t      {model.label}\n\t    </div>\n    );\n    \n    return (\n      <div className={(model.in ? 'in' : 'out') + '-port'}>\n        {model.in ? port : label}\n        {model.in ? label : port}\n      </div>\n    );\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultPortLabelWidget.js","import React from 'react';\nimport _ from 'lodash';\nimport { LinkWidget } from './LinkWidget';\n\nexport class LinkLayerWidget extends React.Component {\n\tgenerateLinks() {\n\t  const diagramModel = this.props.diagramEngine.getDiagramModel();\n\n\t  return _.map(diagramModel.getLinks(), link => {\n\t\t\t// TODO: just improve this vastly x_x\n\t\t\tif (link.sourcePort !== null) {\n\t\t\t\ttry{\n\t\t\t\t\t//generate a point\n\t\t\t\t\tlink.points[0].updateLocation(this.props.diagramEngine.getPortCenter(link.sourcePort));\n\t\t\t\t}\n\t\t\t\t// Remove the link because its problematic (TODO implement this rather at an engine level)\n\t\t\t\tcatch(ex) {\n\t\t\t\t\tdiagramModel.removeLink(link);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (link.targetPort !== null) {\n\t\t\t\ttry{\n\t\t\t\t\t_.last(link.points).updateLocation(this.props.diagramEngine.getPortCenter(link.targetPort));\n\t\t\t\t}\n\t\t\t\t//remove the link because its problematic (TODO implement this rather at an engine level)\n\t\t\t\tcatch(ex){\n\t\t\t\t\tdiagramModel.removeLink(link);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Generate the links\n\t\t\tconst generatedLink = this.props.diagramEngine.generateWidgetForLink(link);\n      if(!generatedLink){\n\t\t\t\tconsole.log(\"no link generated for type: \" + link.getType());\n\t\t\t\treturn null;\n      }\n\n\t\t\tconst props = {\n\t\t\t\tkey: link.getID(),\n\t\t\t\tlink: link,\n\t\t\t\tdiagramEngine: this.props.diagramEngine,\n\t\t\t};\n\n\t\t\treturn (\n\t\t\t  <LinkWidget {...props}>\n\t\t\t    {React.cloneElement(generatedLink, { pointAdded: this.props.pointAdded })}\n\t\t\t  </LinkWidget>\n\t\t\t);\n\t\t});\n\t}\n\n\trender() {\n\t\tconst diagramModel = this.props.diagramEngine.getDiagramModel();\n\t\tconst zoom = diagramModel.getZoomLevel();\n\t\tconst offsetX = diagramModel.getOffsetX();\n\t\tconst offsetY = diagramModel.getOffsetY();\n\t\tconst svgStyle = {\n\t\t  transform: `scale(${zoom / 100.0}) translate(${offsetX}px, ${offsetY}px)`,\n      width: '100%',\n      height: '100%'\n    };\n\n\t\treturn (\n\t\t  <svg style={svgStyle}>\n\t\t    {this.generateLinks()}\n\t\t  </svg>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/LinkLayerWidget.js","import React from 'react';\n\nexport class LinkWidget extends React.Component {\n\tshouldComponentUpdate(){\n\t\treturn this.props.diagramEngine.canEntityRepaint(this.props.link);\n\t}\n\n\trender() {\n\t\treturn this.props.children;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/LinkWidget.js","import React from 'react';\nimport _ from 'lodash';\nimport { NodeWidget } from './NodeWidget';\n\nexport class NodeLayerWidget extends React.Component {\n\trender() {\n\t  const { diagramEngine } = this.props;\n\t\tconst diagramModel = diagramEngine.getDiagramModel();\n\t\tconst props = {\n\t\t  className:'node-view',\n\t\t\tstyle:{\n\t\t\t\ttransform: 'scale(' + diagramModel.getZoomLevel() / 100.0 + ') translate(' + diagramModel.getOffsetX()+'px,'+diagramModel.getOffsetY()+'px)',\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%'\n\t\t\t}\n\t\t};\n\t\t\n\t\t// Create children\n\t\tconst children = _.map(diagramModel.getNodes(), node => {\n\t\t\treturn (\n\t\t\t  <NodeWidget key={node.id} node={node} diagramEngine={diagramEngine}>\n\t\t\t    {this.props.diagramEngine.generateWidgetForNode(node)}\n\t\t\t  </NodeWidget>\n\t\t\t);\n\t\t});\n\t\t\n\t\treturn (\n\t\t  <div {...props}>\n\t\t    {children}\n\t\t  </div>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/NodeLayerWidget.js","import React from 'react';\n\nexport class NodeWidget extends React.Component {\n\tshouldComponentUpdate(){\n\t\treturn this.props.diagramEngine.canEntityRepaint(this.props.node);\n\t}\n\n\trender() {\n\t  const { node, children } = this.props;\n\t  const props = {\n\t    'data-nodeid': node.id,\n\t    className: 'node' + (this.props.node.isSelected() ? ' selected' : ''),\n\t\t\tstyle:{\n\t\t\t\ttop: this.props.node.y,\n\t\t\t\tleft: this.props.node.x,\n\t\t\t}\n\t  };\n\t  \n\t  return (\n\t    <div {...props}>\n\t      {children}\n\t    </div>\n\t  );\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/NodeWidget.js","import React from 'react';\n\nexport class PortWidget extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tselected: false\n\t\t};\n\t}\n\n\trender() {\n\t  const { name, node } = this.props;\n    return (\n      <div\n        className={'port' + (this.state.selected ? ' selected' : '')}\n        onMouseEnter={() => this.setState({ selected: true })}\n        onMouseLeave={() => this.setState({ selected: false })}\n        data-name={name}\n        data-nodeid={node.getID()}\n      />\n    );\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/PortWidget.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./test.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./test.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js!../node_modules/sass-loader/lib/loader.js!./test.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./demos/test.scss\n// module id = 18\n// module chunks = 0 1 2","module.exports = __WEBPACK_EXTERNAL_MODULE_19__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 19\n// module chunks = 0 1 2","import _ from 'lodash';\nimport { NodeModel, PointModel } from './Common';\nimport { BaseEntity } from './BaseEntity';\nimport { DiagramModel } from './DiagramModel';\n\n/**\n * Passed as a parameter to the DiagramWidget\n */\nexport class DiagramEngine extends BaseEntity {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.diagramModel = new DiagramModel();\n\t\tthis.nodeFactories = {};\n\t\tthis.linkFactories = {};\n\t\tthis.instanceFactories = {};\n\t\tthis.canvas = null;\n\t\tthis.paintableWidgets = null;\n\t\tthis.forceUpdate = () => {};\n\t}\n\n\tclearRepaintEntities() {\n\t\tthis.paintableWidgets = null;\n\t}\n\n\tenableRepaintEntities(entities) {\n\t\tthis.paintableWidgets = {};\n\t\tentities.forEach((entity) => {\n\n\t\t\t// If a node is requested to repaint, add all of its links\n\t\t\tif (entity instanceof NodeModel) {\n\t\t\t\t_.forEach(entity.getPorts(), port => {\n\t\t\t\t\t_.forEach(port.getLinks(), link => {\n\t\t\t\t\t\tthis.paintableWidgets[link.getID()] = true;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (entity instanceof PointModel) {\n\t\t\t\tthis.paintableWidgets[entity.getLink().getID()] = true;\n\t\t\t}\n\n\t\t\tthis.paintableWidgets[entity.getID()] = true;\n\t\t});\n\t}\n\n\tcanEntityRepaint(baseModel) {\n\t\t// No rules applied, allow repaint\n\t\tif (this.paintableWidgets === null) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn this.paintableWidgets[baseModel.getID()] !== undefined;\n\t}\n\n\tsetCanvas(canvas) {\n\t\tthis.canvas = canvas;\n\t}\n\n\tsetDiagramModel(model) {\n\t\tthis.diagramModel = model;\n\t}\n\n\tsetForceUpdate(forceUpdate) {\n\t  this.forceUpdate = forceUpdate;\n\t}\n\n\tgetDiagramModel() {\n\t\treturn this.diagramModel;\n\t}\n\n\tgetNodeFactories() {\n\t\treturn this.nodeFactories;\n\t}\n\n\tgetLinkFactories() {\n\t\treturn this.linkFactories;\n\t}\n\n\tgetInstanceFactory(className) {\n\t\treturn this.instanceFactories[className];\n\t}\n\n\tregisterInstanceFactory(factory) {\n\t\tthis.instanceFactories[factory.getName()] = factory;\n\t}\n\n\tregisterNodeFactory(factory) {\n\t\tthis.nodeFactories[factory.getType()] = factory;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.nodeFactoriesUpdated();\n\t\t});\n\t}\n\n\tregisterLinkFactory(factory) {\n\t\tthis.linkFactories[factory.getType()] = factory;\n\t\tthis.itterateListeners((listener) => {\n\t\t\tlistener.linkFactoriesUpdated();\n\t\t});\n\t}\n\n\tgetFactoryForNode(node) {\n\t\tif (this.nodeFactories[node.getType()]){\n\t\t\treturn this.nodeFactories[node.getType()];\n\t\t}\n\t\tconsole.log(`Cannot find widget factory for node of type: [${node.getType()}]`);\n\t\treturn null;\n\t}\n\n\tgetFactoryForLink(link) {\n\t\tif (this.linkFactories[link.getType()]) {\n\t\t\treturn this.linkFactories[link.getType()];\n\t\t}\n\t\tconsole.log(`Cannot find widget factory for link of type: [${link.getType()}]`);\n\t\treturn null;\n\t}\n\n\tgenerateWidgetForLink(link) {\n\t\tconst linkFactory = this.getFactoryForLink(link);\n\t\tif(!linkFactory) {\n\t\t\tthrow `Cannot find link factory for link: ${link.getType()}`;\n\t\t}\n\t\treturn linkFactory.generateReactWidget(this, link);\n\t}\n\n\tgenerateWidgetForNode(node) {\n\t\tconst nodeFactory = this.getFactoryForNode(node);\n\t\tif(!nodeFactory) {\n\t\t\tthrow `Cannot find widget factory for node: ${node.getType()}`;\n\t\t}\n\t\treturn nodeFactory.generateReactWidget(this, node);\n\t}\n\n\tgetRelativeMousePoint(event) {\n\t\tconst point = this.getRelativePoint(event.pageX, event.pageY);\n\t\treturn {\n\t\t\tx: (point.x / (this.diagramModel.getZoomLevel() / 100.0)) - this.diagramModel.getOffsetX(),\n\t\t\ty: (point.y / (this.diagramModel.getZoomLevel() / 100.0)) - this.diagramModel.getOffsetY()\n\t\t};\n\t}\n\n\tgetRelativePoint(x,y) {\n\t\tconst canvasRect = this.canvas.getBoundingClientRect();\n\t\treturn { x: x-canvasRect.left, y: y-canvasRect.top };\n\t}\n\n\tgetNodePortElement(port) {\n\t\tconst selector = this.canvas.querySelector(\n\t\t  `.port[data-name=\"${port.getName()}\"][data-nodeid=\"${port.getParent().getID()}\"]`\n\t\t);\n\t\tif (selector === null) {\n\t\t\tthrow `Cannot find Node Port element with nodeID: [${port.getParent().getID()}] and name: [${port.getName()}]`;\n\t\t}\n\t\treturn selector;\n\t}\n\n\tgetPortCenter(port) {\n\t\tconst sourceElement = this.getNodePortElement(port);\n\t\tconst sourceRect = sourceElement.getBoundingClientRect();\n\t\tconst rel = this.getRelativePoint(sourceRect.left,sourceRect.top);\n\t\tconst x = (sourceElement.offsetWidth / 2) + rel.x / (this.diagramModel.getZoomLevel() / 100.0) -\n\t\t  this.diagramModel.getOffsetX();\n\t\tconst y = (sourceElement.offsetHeight/2) + rel.y / (this.diagramModel.getZoomLevel() / 100.0) -\n\t\t  this.diagramModel.getOffsetY();\n\n\t\treturn {\n\t\t  x,\n\t\t  y\n\t\t};\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/DiagramEngine.js","import { LinkModel } from './Common';\nimport { AbstractInstanceFactory } from './AbstractInstanceFactory';\n\nexport class LinkInstanceFactory extends AbstractInstanceFactory {\n\tconstructor() {\n\t\tsuper('LinkModel');\n\t}\n\t\n\tgetInstance() {\n\t\treturn new LinkModel();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/LinkInstanceFactory.js","import React from 'react';\nimport { LinkWidgetFactory } from '../WidgetFactories';\nimport { DefaultLinkWidget } from './DefaultLinkWidget';\n\nexport class DefaultLinkFactory extends LinkWidgetFactory {\n\tconstructor(){\n\t\tsuper('default');\n\t}\n\n\tgenerateReactWidget(diagramEngine, link) {\n\t  return (\n\t    <DefaultLinkWidget link={link} diagramEngine={diagramEngine} />\n    );\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultLinkFactory.js","import React from 'react';\nimport { NodeWidgetFactory } from '../WidgetFactories';\nimport { DefaultNodeWidget } from './DefaultNodeWidget';\n\nexport class DefaultNodeFactory extends NodeWidgetFactory {\n\tconstructor(){\n\t\tsuper('default');\n\t}\n\n\tgenerateReactWidget(diagramEngine, node) {\n\t\treturn (\n\t\t  <DefaultNodeWidget node={node} diagramEngine={diagramEngine} />\n\t\t);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultNodeFactory.js","import _ from 'lodash';\nimport { NodeModel } from '../Common';\nimport { AbstractInstanceFactory } from '../AbstractInstanceFactory';\n\nexport class DefaultNodeInstanceFactory extends AbstractInstanceFactory {\n\tconstructor(){\n\t\tsuper('DefaultNodeModel');\n\t}\n\n\tgetInstance(){\n\t\treturn new DefaultNodeModel();\n\t}\n}\n\nexport class DefaultNodeModel extends NodeModel {\n\tconstructor(name = 'Untitled', color = 'rgb(0,192,255)') {\n\t\tsuper('default');\n\t\tthis.name = name;\n\t\tthis.color = color;\n\t}\n\n\tdeSerialize(object) {\n\t\tsuper.deSerialize(object);\n\t\tthis.name = object.name;\n\t\tthis.color = object.color;\n\t}\n\n\tserialize() {\n\t\treturn _.merge(super.serialize(), {\n\t\t\tname: this.name,\n\t\t\tcolor: this.color,\n\t\t});\n\t}\n\n\tgetInPorts() {\n\t\treturn _.filter(this.ports,(portModel) => portModel.in);\n\t}\n\n\tgetOutPorts() {\n\t\treturn _.filter(this.ports,(portModel) => !portModel.in);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultNodeModel.js","import { PortModel } from '../Common';\nimport { AbstractInstanceFactory } from '../AbstractInstanceFactory';\n\nexport class DefaultPortInstanceFactory extends AbstractInstanceFactory {\n\tconstructor(){\n\t\tsuper('DefaultPortModel');\n\t}\n\n\tgetInstance(){\n\t\treturn new DefaultPortModel(true, 'unknown');\n\t}\n}\n\nexport class DefaultPortModel extends PortModel {\n\tconstructor(isInput, name, label = null) {\n\t\tsuper(name);\n\t\tthis.in = isInput;\n\t\tthis.label = label || name;\n\t}\n\n\tdeSerialize(object) {\n\t\tsuper.deSerialize(object);\n\t\tthis.in = object.in;\n\t\tthis.label = object.label;\n\t}\n\n\tserialize() {\n\t\treturn {\n\t\t  ...super.serialize(),\n\t\t\tin: this.in,\n\t\t\tlabel: this.label\n\t\t};\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/defaults/DefaultPortModel.js","import React from 'react';\nimport { PointModel, NodeModel, LinkModel, PortModel } from '../Common';\nimport { SelectingAction, MoveCanvasAction, MoveItemsAction } from './actions';\nimport { LinkLayerWidget } from './LinkLayerWidget';\nimport { NodeLayerWidget } from './NodeLayerWidget';\n\nexport class DiagramWidget extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\taction: null,\n\t\t\trenderedNodes: false,\n\t\t\twindowListener: null\n\t\t};\n\t}\n\n\tcomponentWillUnmount(){\n\t\tthis.props.diagramEngine.setCanvas(null);\n\t\twindow.removeEventListener('keydown', this.state.windowListener);\n\t}\n\n\tcomponentWillUpdate(nextProps) {\n\t\tif (this.props.diagramEngine.diagramModel.id !== nextProps.diagramEngine.diagramModel.id) {\n\t\t\tthis.setState({ renderedNodes: false });\n\t\t\tnextProps.diagramEngine.diagramModel.rendered = true;\n\t\t}\n\t\tif (!nextProps.diagramEngine.diagramModel.rendered) {\n\t\t\tthis.setState({ renderedNodes: false });\n\t\t\tnextProps.diagramEngine.diagramModel.rendered = true;\n\t\t}\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (!this.state.renderedNodes) {\n\t\t\tthis.setState({\n\t\t\t\trenderedNodes: true\n\t\t\t});\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t  const { diagramEngine } = this.props;\n\t\tdiagramEngine.setCanvas(this.refs['canvas']);\n\t\tdiagramEngine.setForceUpdate(this.forceUpdate.bind(this));\n\n\t\t// Add a keyboard listener\n\t\tthis.setState({\n\t\t\trenderedNodes: true,\n\t\t\twindowListener: window.addEventListener('keydown', event => {\n\t\t\t\t// Delete all selected\n\t\t\t\tif(event.keyCode === 46 || event.keyCode === 8) {\n\t\t\t\t\tdiagramEngine.getDiagramModel().getSelectedItems().forEach(element => {\n\t\t\t\t\t\telement.remove();\n\t\t\t\t\t});\n\t\t\t\t\tthis.forceUpdate();\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t\twindow.focus();\n\t}\n\n\t/**\n\t * Gets a model and element under the mouse cursor\n\t */\n\tgetMouseElement(event) {\n\t  const { diagramModel } = this.props.diagramEngine;\n\t\tconst { target } = event;\n\n\t\t// Look for a port\n\t\tlet element = target.closest('.port[data-name]');\n\t\tif (element) {\n\t\t\tconst nodeElement = target.closest('.node[data-nodeid]');\n\t\t\treturn {\n\t\t\t\tmodel: diagramModel.getNode(nodeElement.getAttribute('data-nodeid')).getPort(element.getAttribute('data-name')),\n\t\t\t\telement\n\t\t\t};\n\t\t}\n\n\t\t// Look for a point\n\t\telement = target.closest('.point[data-id]');\n\t\tif (element) {\n\t\t\treturn {\n\t\t\t\tmodel: diagramModel.getLink(element.getAttribute('data-linkid')).getPointModel(element.getAttribute('data-id')),\n\t\t\t\telement\n\t\t\t};\n\t\t}\n\n\t\t// Look for a link\n\t\telement = target.closest('[data-linkid]');\n\t\tif (element) {\n\t\t\treturn {\n\t\t\t\tmodel: diagramModel.getLink(element.getAttribute('data-linkid')),\n\t\t\t\telement\n\t\t\t};\n\t\t}\n\n\t\t// Look for a node\n\t\telement = target.closest('.node[data-nodeid]');\n\t\tif (element) {\n\t\t\treturn {\n\t\t\t\tmodel: diagramModel.getNode(element.getAttribute('data-nodeid')),\n\t\t\t\telement\n\t\t\t};\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tonWheel(event) {\n\t  const  { diagramEngine } = this.props;\n\t\tconst diagramModel = diagramEngine.getDiagramModel();\n\t  event.preventDefault();\n    event.stopPropagation();\n\t\tdiagramModel.setZoomLevel(diagramModel.getZoomLevel()+(event.deltaY/60));\n\t\tdiagramEngine.enableRepaintEntities([]);\n\t\tthis.forceUpdate();\n\t}\n\n\tonMouseMove(event) {\n\t  const  { diagramEngine } = this.props;\n\t  const { action } = this.state;\n\t\tconst diagramModel = diagramEngine.getDiagramModel();\n\n\t  // Select items so draw a bounding box\n\t\tif (action instanceof SelectingAction) {\n\t\t\tconst relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n\n\t\t\tdiagramModel.getNodes().forEach(node => {\n\t\t\t\tif (action.containsElement(node.x, node.y, diagramModel)) {\n\t\t\t\t\tnode.setSelected(true);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdiagramModel.getLinks().forEach(link => {\n\t\t\t\tlet allSelected = true;\n\t\t\t\tlink.points.forEach(point => {\n\t\t\t\t\tif (action.containsElement(point.x, point.y, diagramModel)) {\n\t\t\t\t\t\tpoint.setSelected(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tallSelected = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (allSelected) {\n\t\t\t\t\tlink.setSelected(true);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\taction.mouseX2 = relative.x;\n\t\t\taction.mouseY2 = relative.y;\n\t\t\tthis.setState({ action });\n\t\t\treturn;\n\t\t} else if (action instanceof MoveItemsAction) {\n\t\t  // Translate the items on the canvas\n\t\t\taction.selectionModels.forEach(model => {\n\t\t\t\tif (model.model instanceof NodeModel || model.model instanceof PointModel) {\n\t\t\t\t\tmodel.model.x = model.initialX + (\n\t\t\t\t\t  (event.pageX - this.state.action.mouseX) / (diagramModel.getZoomLevel() / 100)\n\t\t\t\t\t);\n\t\t\t\t\tmodel.model.y = model.initialY + (\n\t\t\t\t\t  (event.pageY - this.state.action.mouseY) / (diagramModel.getZoomLevel() / 100)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.forceUpdate();\n\t\t} else if (this.state.action instanceof MoveCanvasAction) {\n\t\t  // Translate the actual canvas\n\t\t\tdiagramModel.setOffset(\n\t\t\t\taction.initialOffsetX + (\n\t\t\t\t  (event.pageX - this.state.action.mouseX) / (diagramModel.getZoomLevel() / 100)\n\t\t\t\t),\n\t\t\t\taction.initialOffsetY + (\n\t\t\t\t  (event.pageY-this.state.action.mouseY) / (diagramModel.getZoomLevel() / 100)\n\t\t\t\t)\n\t\t\t);\n\t\t\tthis.forceUpdate();\n\t\t}\n\t}\n\n\tonMouseDown(event) {\n\t  const  { diagramEngine } = this.props;\n\t\tconst diagramModel = diagramEngine.getDiagramModel();\n\t\tconst model = this.getMouseElement(event);\n\n\t  diagramEngine.clearRepaintEntities();\n\n\t\t// Check if this is the canvas\n\t\tif (model === null) {\n\t\t\t// Check for a multiple selection\n\t\t\tif (event.shiftKey) {\n\t\t\t\tconst relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n\t\t\t\tthis.setState({\n\t\t\t\t\taction: new SelectingAction(\n\t\t\t\t\t\trelative.x, relative.y\n\t\t\t\t\t)\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t  // This is a drag canvas event\n\t\t\t\tconst relative = diagramEngine.getRelativePoint(event.pageX, event.pageY);\n\t\t\t\tdiagramModel.clearSelection();\n\t\t\t\tthis.setState({\n\t\t\t\t\taction: new MoveCanvasAction(relative.x, relative.y, diagramModel)\n\t\t\t\t});\n\t\t\t}\n\t\t} else if (model.model instanceof PortModel) {\n\t\t  // This is a port element, we want to drag a link\n\t\t\tconst relative = diagramEngine.getRelativeMousePoint(event);\n\t\t\tconst link = new LinkModel();\n\t\t\tlink.setSourcePort(model.model);\n\n\t\t\tlink.getFirstPoint().updateLocation(relative);\n\t\t\tlink.getLastPoint().updateLocation(relative);\n\n\t\t\tdiagramModel.clearSelection();\n\t\t\tlink.getLastPoint().setSelected(true);\n\t\t\tdiagramModel.addLink(link);\n\n\t\t\tthis.setState({\n\t\t\t\taction: new MoveItemsAction(event.pageX, event.pageY, diagramEngine)\n\t\t\t});\n\t\t} else {\n      // It's some other element that needs to be moved\n\t\t\tif (!event.shiftKey && !model.model.isSelected()) {\n\t\t\t\tdiagramModel.clearSelection();\n\t\t\t}\n\t\t\tmodel.model.setSelected(true);\n\n\t\t\tthis.setState({\n\t\t\t\taction: new MoveItemsAction(event.pageX, event.pageY,diagramEngine)\n\t\t\t});\n\t\t}\n\t}\n\n\tonMouseUp(event) {\n\t  const  { diagramEngine } = this.props;\n\t  \n\t  // Check if we going to connect a link to something\n\t\tif (this.state.action instanceof MoveItemsAction) {\n\t\t\tconst element = this.getMouseElement(event);\n\t\t\tif (element) {\n\t\t\t\tthis.state.action.selectionModels.forEach(model => {\n\t\t\t\t\t// Only care about points connecting to things\n\t\t\t\t\tif (!(model.model instanceof PointModel)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (element.model instanceof PortModel) {\n\t\t\t\t\t\tmodel.model.getLink().setTargetPort(element.model);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tdiagramEngine.clearRepaintEntities();\n\t\tthis.setState({ action: null });\n\t}\n\n\trenderLinkLayerWidget() {\n\t  const  { diagramEngine } = this.props;\n\t\tconst diagramModel = diagramEngine.getDiagramModel();\n\n\t\tif (!this.state.renderedNodes) {\n\t\t  return null;\n\t\t}\n\n\t\treturn (\n  \t  <LinkLayerWidget\n  \t\t\tdiagramEngine={diagramEngine}\n  \t\t\tpointAdded={(point, event) => {\n  \t\t\t\tevent.stopPropagation();\n  \t\t\t\tdiagramModel.clearSelection(point);\n  \t\t\t\tthis.setState({\n  \t\t\t\t\taction: new MoveItemsAction(event.pageX, event.pageY, diagramEngine)\n  \t\t\t\t});\n  \t\t\t}}\n      />\n    );\n\t}\n\n\trenderSelector() {\n\t  const { action } = this.state;\n\n\t  if (!(action instanceof SelectingAction)) {\n\t    return null;\n\t  }\n\n\t  return (\n\t    <div\n\t\t\t\tclassName='selector'\n\t\t\t\tstyle={{\n\t\t\t\t\ttop: action.mouseY,\n\t\t\t\t\tleft: action.mouseX,\n\t\t\t\t\twidth: action.mouseX2 - action.mouseX,\n\t\t\t\t\theight: action.mouseY2 - action.mouseY,\n\t\t\t\t}}\n\t    />\n    );\n\t}\n\n\trender() {\n\t\tconst  { diagramEngine } = this.props;\n\n\t\treturn (\n\t\t  <div\n\t\t    ref='canvas'\n\t\t    className='react-js-diagrams-canvas'\n\t\t    onWheel={this.onWheel.bind(this)}\n\t\t\t\tonMouseMove={this.onMouseMove.bind(this)}\n\t\t\t\tonMouseDown={this.onMouseDown.bind(this)}\n\t\t\t\tonMouseUp={this.onMouseUp.bind(this)}\n\t\t  >\n\t\t    {this.renderLinkLayerWidget()}\n\t\t    <NodeLayerWidget diagramEngine={diagramEngine} />\n\t\t    {this.renderSelector()}\n\t\t  </div>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/DiagramWidget.js","import { BaseAction } from './BaseAction';\n\nexport class MoveCanvasAction extends BaseAction {\n\tconstructor(mouseX, mouseY, diagramModel) {\n\t\tsuper(mouseX, mouseY);\n\t\tthis.initialOffsetX = diagramModel.getOffsetX();\n\t\tthis.initialOffsetY = diagramModel.getOffsetY();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/MoveCanvasAction.js","import { BaseAction } from './BaseAction';\n\nexport class MoveItemsAction extends BaseAction {\n\tconstructor(mouseX, mouseY, diagramEngine) {\n\t\tsuper(mouseX, mouseY);\n\t\tthis.moved = false;\n\t\tdiagramEngine.enableRepaintEntities(diagramEngine.getDiagramModel().getSelectedItems());\n\t\tthis.selectionModels = diagramEngine.getDiagramModel().getSelectedItems().map(item => ({\n\t\t\tmodel: item,\n\t\t\tinitialX: item.x,\n\t\t\tinitialY: item.y,\n\t\t}));\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/MoveItemsAction.js","import { BaseAction } from './BaseAction';\n\nexport class SelectingAction extends BaseAction {\n\tconstructor(mouseX, mouseY) {\n\t\tsuper(mouseX, mouseY);\n\t\tthis.mouseX2 = mouseX;\n\t\tthis.mouseY2 = mouseY;\n\t}\n\n\tcontainsElement(x, y, diagramModel) {\n\t\tconst z = diagramModel.getZoomLevel() / 100.0;\n\t\treturn (\n\t\t\t(x + diagramModel.getOffsetX()) * z > this.mouseX\t&&\n\t\t\t(x + diagramModel.getOffsetX()) * z < this.mouseX2 &&\n\t\t\t(y + diagramModel.getOffsetY()) * z > this.mouseY\t&&\n\t\t\t(y + diagramModel.getOffsetY()) * z < this.mouseY2\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/SelectingAction.js","export * from './SelectingAction';\nexport * from './MoveCanvasAction';\nexport * from './MoveItemsAction';\n\n\n\n// WEBPACK FOOTER //\n// ./src/widgets/actions/index.js","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\n  margin: 0;\\n  padding: 0; }\\n\\nhtml, body, #root {\\n  width: 100%;\\n  height: 100%;\\n  background: #3c3c3c;\\n  display: flex; }\\n\\n.demo-link {\\n  padding: 0.5rem 1rem; }\\n  .demo-link a {\\n    color: white;\\n    text-decoration: underline;\\n    cursor: pointer; }\\n\\n.react-js-diagrams-canvas {\\n  position: relative;\\n  flex-grow: 1;\\n  display: flex;\\n  cursor: move;\\n  overflow: hidden; }\\n  .react-js-diagrams-canvas .point {\\n    fill: rgba(255, 255, 255, 0.5); }\\n    .react-js-diagrams-canvas .point.selected {\\n      fill: #00c0ff; }\\n  .react-js-diagrams-canvas .selector {\\n    position: absolute;\\n    background-color: rgba(0, 192, 255, 0.2);\\n    border: solid 2px #00c0ff; }\\n  .react-js-diagrams-canvas svg {\\n    position: absolute;\\n    height: 100%;\\n    width: 100%;\\n    transform-origin: 0 0;\\n    overflow: visible; }\\n  .react-js-diagrams-canvas .node-view {\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    bottom: 0;\\n    position: absolute;\\n    pointer-events: none;\\n    transform-origin: 0 0; }\\n  .react-js-diagrams-canvas .node {\\n    position: absolute;\\n    -webkit-touch-callout: none;\\n    /* iOS Safari */\\n    -webkit-user-select: none;\\n    /* Chrome/Safari/Opera */\\n    user-select: none;\\n    cursor: move;\\n    pointer-events: all; }\\n    .react-js-diagrams-canvas .node.selected > * {\\n      border-color: #00c0ff !important;\\n      -webkit-filter: drop-shadow(0 0 20px rgba(0, 192, 255, 0.5)); }\\n\\n@keyframes dash {\\n  from {\\n    stroke-dashoffset: 24; }\\n  to {\\n    stroke-dashoffset: 0; } }\\n  .react-js-diagrams-canvas path {\\n    fill: none;\\n    pointer-events: all; }\\n    .react-js-diagrams-canvas path.selected {\\n      stroke: #00c0ff !important;\\n      stroke-dasharray: 10,2;\\n      animation: dash 1s linear infinite; }\\n  .react-js-diagrams-canvas .port {\\n    width: 15px;\\n    height: 15px;\\n    background: rgba(255, 255, 255, 0.1); }\\n    .react-js-diagrams-canvas .port:hover, .react-js-diagrams-canvas .port.selected {\\n      background: #c0ff00; }\\n  .react-js-diagrams-canvas .basic-node {\\n    background-color: #1e1e1e;\\n    border-radius: 5px;\\n    font-family: Arial;\\n    color: white;\\n    border: solid 2px black;\\n    overflow: visible;\\n    font-size: 11px;\\n    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); }\\n    .react-js-diagrams-canvas .basic-node .title {\\n      /*\\t\\t\\tbackground-image: linear-gradient(rgba(black,0.1),rgba(black,0.2));*/\\n      background: rgba(0, 0, 0, 0.3);\\n      display: flex;\\n      white-space: nowrap; }\\n      .react-js-diagrams-canvas .basic-node .title > * {\\n        align-self: center; }\\n      .react-js-diagrams-canvas .basic-node .title .fa {\\n        padding: 5px;\\n        opacity: 0.2;\\n        cursor: pointer; }\\n        .react-js-diagrams-canvas .basic-node .title .fa:hover {\\n          opacity: 1.0; }\\n      .react-js-diagrams-canvas .basic-node .title .name {\\n        flex-grow: 1;\\n        padding: 5px 5px; }\\n    .react-js-diagrams-canvas .basic-node .ports {\\n      display: flex;\\n      background-image: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)); }\\n      .react-js-diagrams-canvas .basic-node .ports .in, .react-js-diagrams-canvas .basic-node .ports .out {\\n        flex-grow: 1;\\n        display: flex;\\n        flex-direction: column; }\\n      .react-js-diagrams-canvas .basic-node .ports .in-port, .react-js-diagrams-canvas .basic-node .ports .out-port {\\n        display: flex;\\n        margin-top: 1px; }\\n        .react-js-diagrams-canvas .basic-node .ports .in-port > *, .react-js-diagrams-canvas .basic-node .ports .out-port > * {\\n          align-self: center; }\\n        .react-js-diagrams-canvas .basic-node .ports .in-port .name, .react-js-diagrams-canvas .basic-node .ports .out-port .name {\\n          padding: 0 5px; }\\n      .react-js-diagrams-canvas .basic-node .ports .out-port {\\n        justify-content: flex-end; }\\n        .react-js-diagrams-canvas .basic-node .ports .out-port .name {\\n          justify-content: flex-end;\\n          text-align: right; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader/lib/loader.js!./demos/test.scss\n// module id = 31\n// module chunks = 0 1 2","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 32\n// module chunks = 0 1 2","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 33\n// module chunks = 0 1 2","import * as SRD from \"../../src/main\";\nimport {DiamondPortModel} from \"./DiamondPortModel\";\n\nexport class DiamondNodeModel extends SRD.NodeModel{\n\tconstructor(){\n\t\tsuper('diamond');\n\t\tthis.addPort(new DiamondPortModel('top'));\n\t\tthis.addPort(new DiamondPortModel('left'));\n\t\tthis.addPort(new DiamondPortModel('bottom'));\n\t\tthis.addPort(new DiamondPortModel('right'));\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondNodeModel.js","import * as SRD from \"../../src/main\";\nimport * as _ from \"lodash\";\n\nexport class DiamondPortModel extends SRD.PortModel{\n\tconstructor(pos = 'top'){\n\t\tsuper(pos);\n\t\tthis.position = pos ;\n\t}\n\t\n\tserialize(){\n\t\treturn _.merge(super.serialize(),{\n\t\t\tposition: this.position,\n\t\t});\n\t}\n\t\n\tdeSerialize(data) {\n\t\tsuper.deSerialize(data);\n\t\tthis.position = data.position;\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondPortModel.js","import * as SRD from \"../../src/main\";\nimport {DiamondNodeModel} from \"./DiamondNodeModel\";\nimport {DiamondPortModel} from \"./DiamondPortModel\";\n\nexport class DiamondNodeFactory extends SRD.AbstractInstanceFactory {\n\tconstructor(){\n\t\tsuper(\"DiamondNodeModel\");\n\t}\n\t\n\tgetInstance(){\n\t\treturn new DiamondNodeModel();\n\t}\n}\n\nexport class DiamondPortFactory extends SRD.AbstractInstanceFactory {\n\tconstructor(){\n\t\tsuper(\"DiamondPortModel\");\n\t}\n\t\n\tgetInstance(){\n\t\treturn new DiamondPortModel();\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondInstanceFactories.js","import * as SRD from \"../../src/main\";\nimport {DiamonNodeWidgetFactory} from \"./DiamondNodeWidget\";\n\nexport class DiamondWidgetFactory extends SRD.NodeWidgetFactory{\n\tconstructor(){\n\t\tsuper('diamond');\n\t}\n\t\n\tgenerateReactWidget(diagramEngine, node) {\n\t\treturn DiamonNodeWidgetFactory({ node });\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondWidgetFactory.js","import * as React from \"react\";\nimport {DiamondNodeModel} from \"./DiamondNodeModel\";\nimport * as SRD from \"../../src/main\";\n\nexport class DiamonNodeWidget extends React.Component  {\n\tstatic defaultProps = {\n\t\tsize:150,\n\t\tnode: null\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\tReact.DOM.div({className: \"diamond-node\", style: {position: 'relative', width: this.props.size, height: this.props.size}},\n\t\t\t\tReact.DOM.svg({\n\t\t\t\t\twidth:this.props.size,height: this.props.size,dangerouslySetInnerHTML: {__html:`\n\t\t\t\t\t\t<g id=\"Layer_1\">\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<g id=\"Layer_2\">\n\t\t\t\t\t\t\t<polygon fill=\"cyan\" stroke=\"#000000\" stroke-width=\"3\" stroke-miterlimit=\"10\" points=\"10,`+(this.props.size/2)+` `+(this.props.size/2)+`,10 `+(this.props.size-10)+`,`+(this.props.size/2)+` `+(this.props.size/2)+`,`+(this.props.size-10)+` \"/>\n\t\t\t\t\t\t</g>\n\t\t\t\t`}}),\n\t\t\t\t\n\t\t\t\t//left node\n\t\t\t\tReact.DOM.div({style: {position: 'absolute', zIndex:10,top:this.props.size/2 - 5}},\n\t\t\t\t\tReact.createElement(SRD.PortWidget,{name: 'left', node: this.props.node})\n\t\t\t\t),\n\t\t\t\t\n\t\t\t\t//top node\n\t\t\t\tReact.DOM.div({style: {position: 'absolute', zIndex:10,left:this.props.size/2-8}},\n\t\t\t\t\tReact.createElement(SRD.PortWidget,{name: 'top', node: this.props.node})\n\t\t\t\t),\n\t\t\t\t\n\t\t\t\t//right\n\t\t\t\tReact.DOM.div({style: {position: 'absolute', zIndex:10,left:this.props.size-10,top:this.props.size/2}},\n\t\t\t\t\tReact.createElement(SRD.PortWidget,{name: 'right', node: this.props.node})\n\t\t\t\t),\n\t\t\t\t\n\t\t\t\t//bottom\n\t\t\t\tReact.DOM.div({style: {position: 'absolute', zIndex:10,left :this.props.size/2 - 8,top:this.props.size-10}},\n\t\t\t\t\tReact.createElement(SRD.PortWidget,{name: 'bottom', node: this.props.node})\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t}\n}\n\nexport var DiamonNodeWidgetFactory = React.createFactory(DiamonNodeWidget);\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/DiamondNodeWidget.js","import * as SRD from \"../../src/main\";\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport {DiamondNodeModel} from \"./DiamondNodeModel\";\nimport {DiamondWidgetFactory} from \"./DiamondWidgetFactory\";\nimport {DiamondNodeFactory, DiamondPortFactory} from \"./DiamondInstanceFactories\";\n\nrequire(\"../test.scss\");\n\n/**\n *\n * Shows a much more complex way on how to use this library, by creating custom\n * node elements\n *\n *\n * @Author Dylan Vorster\n */\nwindow.onload = () => {\n\n\t//1) setup the diagram engine\n\tvar engine = new SRD.DiagramEngine();\n\tengine.registerNodeFactory(new SRD.DefaultNodeFactory());\n\tengine.registerLinkFactory(new SRD.DefaultLinkFactory());\n\tengine.registerNodeFactory(new DiamondWidgetFactory());\n\n\n\t//2) setup the diagram model\n\tvar model = new SRD.DiagramModel();\n\n\t//3-A) create a default node\n\tvar node1 = new SRD.DefaultNodeModel(\"Node 1\",\"rgb(0,192,255)\");\n\tvar port1 = node1.addPort(new SRD.DefaultPortModel(false,\"out-1\",\"Out\"));\n\tnode1.x = 100;\n\tnode1.y = 150;\n\n\t//3-B) create our new custom node\n\tvar node2 = new DiamondNodeModel();\n\tnode2.x = 400;\n\tnode2.y = 100;\n\n\tvar node3 = new SRD.DefaultNodeModel(\"Node 3\",\"red\");\n\tvar port3 = node3.addPort(new SRD.DefaultPortModel(true,\"in-1\",\"In\"));\n\tnode3.x = 800;\n\tnode3.y = 150;\n\n\t//3-C) link the 2 nodes together\n\tvar link1 = new SRD.LinkModel();\n\tlink1.setSourcePort(port1);\n\tlink1.setTargetPort(node2.ports['left']);\n\n\tvar link2 = new SRD.LinkModel();\n\tlink2.setSourcePort(node2.ports['right']);\n\tlink2.setTargetPort(port3);\n\n\t//4) add the models to the root graph\n\tmodel.addNode(node1);\n\tmodel.addNode(node2);\n\tmodel.addNode(node3);\n\tmodel.addLink(link1);\n\tmodel.addLink(link2);\n\n\t//5) load model into engine\n\tengine.setDiagramModel(model);\n\n\t//6) render the diagram!\n\n\n\tReactDOM.render(React.createElement(SRD.DiagramWidget,{diagramEngine: engine}), document.getElementById('root'));\n\n\n\t//!------------- SERIALIZING / DESERIALIZING ------------\n\n\t//we need this to help the system know what models to create form the JSON\n\tengine.registerInstanceFactory(new SRD.DefaultNodeInstanceFactory());\n\tengine.registerInstanceFactory(new SRD.DefaultPortInstanceFactory());\n\tengine.registerInstanceFactory(new SRD.LinkInstanceFactory());\n\tengine.registerInstanceFactory(new DiamondNodeFactory());\n\tengine.registerInstanceFactory(new DiamondPortFactory());\n\n\t//serialize the model\n\tvar str = JSON.stringify(model.serializeDiagram());\n\tconsole.log(str);\n\n\t//deserialize the model\n\tvar model2 = new SRD.DiagramModel();\n\tmodel2.deSerializeDiagram(JSON.parse(str),engine);\n\tengine.setDiagramModel(model2);\n\tconsole.log(model2);\n\n\t//re-render the model\n\tReactDOM.render(React.createElement(SRD.DiagramWidget,{diagramEngine: engine}), document.getElementById('root'));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./demos/demo3/index.js"],"sourceRoot":""}